define(["lodash","@grafana/data","app/plugins/sdk","app/core/utils/kbn","app/core/time_series2"],(function(__WEBPACK_EXTERNAL_MODULE__2__,__WEBPACK_EXTERNAL_MODULE__3__,__WEBPACK_EXTERNAL_MODULE__5__,__WEBPACK_EXTERNAL_MODULE__8__,__WEBPACK_EXTERNAL_MODULE__16__){return function(t){var e={};function a(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,a),i.l=!0,i.exports}return a.m=t,a.c=e,a.d=function(t,e,n){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(a.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(n,i,function(e){return t[e]}.bind(null,i));return n},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="/",a(a.s=40)}([function(t,e,a){"use strict";(function(t){a.d(e,"a",(function(){return p}));var n=a(1),i=a(2),r=a.n(i);function s(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var a=[],n=!0,i=!1,r=void 0;try{for(var s,o=t[Symbol.iterator]();!(n=(s=o.next()).done)&&(a.push(s.value),!e||a.length!==e);n=!0);}catch(t){i=!0,r=t}finally{try{n||null==o.return||o.return()}finally{if(i)throw r}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function l(t,e,a){return e&&o(t.prototype,e),a&&o(t,a),t}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var u=function(){function t(){h(this,t),this._variables=new Map}return l(t,[{key:"set",value:function(t,e){return this._variables.set(t,e),this}},{key:"unset",value:function(t){return this._variables.delete(t),this}},{key:"get",value:function(t){return this._variables.get(t)}},{key:"keys",value:function(){return Array.from(this._variables.keys())}},{key:"getFullVarsNames",value:function(){return p.getGrafanaVars().concat(this.getVarsNames())}},{key:"getVarsNames",value:function(){return this.keys().map((function(t){return"${"+t+"}"}))}},{key:"clear",value:function(){return this._variables.clear(),this}},{key:"replaceText",value:function(t){try{var e=p.getVar(p.CONSTANTS.VAR_OBJ_TEMPLATESRV);t=void 0!==e?e.replaceWithText(t):t;var a=!0,n=!1,i=void 0;try{for(var r,o=this._variables[Symbol.iterator]();!(a=(r=o.next()).done);a=!0){var l=s(r.value,2),h=l[0],u=l[1];t=t.replace("${"+h+"}",u)}}catch(t){n=!0,i=t}finally{try{a||null==o.return||o.return()}finally{if(n)throw i}}}catch(e){return t}return t}},{key:"eval",value:function(t){var e=this.replaceText(t);return p.utils.evalIt(e)}}],[{key:"getAvailableLocalVarNames",value:function(){return p.CONSTANTS.LOCALVARIABLENAMES.map((function(t){return"${"+t.value+"}"}))}}]),t}(),c=function(){function t(){h(this,t)}return l(t,[{key:"debug",value:function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.toDisplay(t.DEBUG)&&(i=a.shift(),(n=console).debug.apply(n,["GF DEBUG : ".concat(i)].concat(a)));case 1:case"end":return e.stop()}}),e)})))}},{key:"warn",value:function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.toDisplay(t.WARN)&&(i=a.shift(),(n=console).warn.apply(n,["GF WARN : ".concat(i)].concat(a)));case 1:case"end":return e.stop()}}),e)})))}},{key:"info",value:function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.toDisplay(t.INFO)&&(i=a.shift(),(n=console).info.apply(n,["GF INFO : ".concat(i)].concat(a)));case 1:case"end":return e.stop()}}),e)})))}},{key:"error",value:function(){for(var e=arguments.length,a=new Array(e),i=0;i<e;i++)a[i]=arguments[i];return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.toDisplay(t.ERROR)&&(i=a.shift(),(n=console).error.apply(n,["GF ERROR : ".concat(i)].concat(a)));case 1:case"end":return e.stop()}}),e)})))}}],[{key:"init",value:function(){return new t}},{key:"toDisplay",value:function(e){return void 0!==t.logDisplay&&!0===t.logDisplay&&void 0!==t.logLevel&&e>=t.logLevel}}]),t}();c.DEBUG=0,c.INFO=1,c.WARN=2,c.ERROR=3,c.logLevel=c.WARN,c.logDisplay=!0;var d=function(){function e(){h(this,e)}return l(e,[{key:"getRepo",value:function(){var t="";return e.data.info.links.forEach((function(e){"Documentation"===e.name&&(t=e.url)})),t}},{key:"getVersion",value:function(){return e.data.info.version}},{key:"getRootPath",value:function(){return p.getVar(p.CONSTANTS.VAR_STG_CTXROOT)}},{key:"getLibsPath",value:function(){return"".concat(p.getVar(p.CONSTANTS.VAR_STG_CTXROOT),"libs/")}},{key:"getDrawioPath",value:function(){return"".concat(this.getLibsPath(),"drawio/")}},{key:"getStaticPath",value:function(){return"".concat(this.getRootPath(),"static/")}},{key:"getMxBasePath",value:function(){return"".concat(this.getDrawioPath(),"mxgraph/")}},{key:"getMxStylePath",value:function(){return"".concat(this.getDrawioPath(),"styles/")}},{key:"getShapesPath",value:function(){return"".concat(this.getDrawioPath(),"/shapes/")}},{key:"getPartialPath",value:function(){return"".concat(this.getRootPath(),"partials/")}},{key:"getStencilsPath",value:function(){return"".concat(this.getDrawioPath(),"/stencils/")}},{key:"getMxCssPath",value:function(){return"".concat(this.getDrawioPath(),"styles/")}},{key:"getMxResourcePath",value:function(){return"".concat(this.getMxBasePath(),"css/")}},{key:"getMxImagePath",value:function(){return"".concat(this.getMxBasePath(),"images/")}}],[{key:"init",value:function(a,n){var i=new e;return this.contextRoot=e.defaultContextRoot,void 0===a?(this.contextRoot=t,this.contextRoot.length>0&&p.setVar(p.CONSTANTS.VAR_STG_CTXROOT,this.contextRoot)):this.contextRoot=a.$root.appSubUrl+this.defaultContextRoot,p.setVar(p.CONSTANTS.VAR_OBJ_TEMPLATESRV,n),p.setVar(p.CONSTANTS.VAR_STG_CTXROOT,this.contextRoot),i}}]),e}();d.data=a(17),d.defaultContextRoot="/public/plugins/agenty-flowcharting-panel/";var f=function(){function t(e){h(this,t),t.enable&&void 0!==e&&(this.trace={Name:e,Id:p.utils.uniqueID(),Args:void 0,Return:void 0,Before:Date.now(),End:void 0,ExecTime:void 0,Indent:t.indent},t.trc.set(this.trace.Id,this.trace))}return l(t,[{key:"before",value:function(e){if(t.enable&&void 0!==e){var a=new t(e);return t.indent++,t._inc(e),a}return{after:function(){}}}},{key:"after",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.enable&&void 0!==this.trace&&this.trace&&(this.trace.End=Date.now(),t.indent--);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"clear",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.enable&&t.trc.clear();case 1:case"end":return e.stop()}}),e)})))}},{key:"resume",value:function(){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.enable&&(a=[],n=[],t.trc.forEach((function(e){e.ExecTime=e.End-e.Before,t.fn.get(e.Name).TotalTimes+=e.ExecTime,a.push(e)})),console.table(a,["Indent","Name","ExecTime"]),t.fn.forEach((function(t){n.push(t)})),console.table(n,["Function","Calls","TotalTimes"]),t.trc.clear(),t.fn.clear());case 1:case"end":return e.stop()}}),e)})))}}],[{key:"init",value:function(){return new t}},{key:"_inc",value:function(e){var a=t.fn.get(e);void 0===a&&(a={Calls:0,Function:e,TotalTimes:0}),a.Calls++,t.fn.set(e,a)}}]),t}();f.enable=!1,f.trc=new Map,f.fn=new Map,f.indent=0;var p=function(){function t(){h(this,t)}return l(t,null,[{key:"init",value:function(t,e){return this.plugin=d.init(t,e),this}},{key:"me",value:function(){return this}},{key:"createLocalVars",value:function(){return new u}},{key:"getGlobalVars",value:function(){return void 0===t._globalvars&&(t._globalvars=new u),t._globalvars}},{key:"getGrafanaVars",value:function(){var e=t.getVar(t.CONSTANTS.VAR_OBJ_TEMPLATESRV);return null!=e?r.a.map(e.variables,(function(t){return"${".concat(t.name,"}")})):[]}},{key:"getVar",value:function(e){return t.getGlobalVars().get(e)}},{key:"setVar",value:function(e,a){t.getGlobalVars().set(e,a)}},{key:"unsetVar",value:function(e){t.getGlobalVars().unset(e)}},{key:"getFullAvailableVarNames",value:function(){return u.getAvailableLocalVarNames().concat(t.getGrafanaVars())}},{key:"getIntervalCounter",value:function(t,e,a){arguments.length>3&&void 0!==arguments[3]&&arguments[3];var n=[],i=e-t,r=Math.round(i/a),s=t,o=0;for(o=0;o<a;o++)s+=r,n.push(s);return n[o]=e,n}},{key:"setInterval",value:function(e,a){var n=t.getVar(t.CONSTANTS.VAR_MAP_INTERVAL);void 0===n&&(n=new Set,t.setVar(t.CONSTANTS.VAR_MAP_INTERVAL,n));var i=window.setInterval(e,a);return n.add(i),i}},{key:"clearInterval",value:function(e){var a=t.getVar(t.CONSTANTS.VAR_MAP_INTERVAL);if(void 0!==a){try{window.clearInterval(e)}catch(a){t.log.warn("Failed to clear interval thread",e,a)}a.delete(e)}}},{key:"loadLocalFile",value:function(e,a){return Object(n.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,r,s;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(void 0!==t.getVar(e)){n.next=16;break}if(void 0===(i=t.getVar(t.CONSTANTS.VAR_STG_CTXROOT))){n.next=15;break}if(r="".concat(i,"/").concat(a),!window.fetch){n.next=9;break}fetch(r).then((function(a){a.ok&&a.text().then((function(a){return t.log.info("loadLocalFile called succesfully",r),t.setVar(e,a),a})).catch((function(e){return t.log.error("Error when download text file",r,e)}))})).catch((function(e){return t.log.error("Error when download file",r,e)})),n.next=13;break;case 9:if(!(s=t.utils.loadFile(a))){n.next=13;break}return t.setVar(e,t.utils.loadFile(a)),n.abrupt("return",s);case 13:n.next=16;break;case 15:t.log.warn("loadLocalFile Contexroot : ",i);case 16:return n.abrupt("return",!1);case 17:case"end":return n.stop()}}),n)})))}},{key:"popover",value:function(e,a,n){var i=t.plugin.getRepo(),r="".concat(this.plugin.getRepo(),"images/"),s=String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;"),o="".concat(s),l="",h="";return a&&(l='<a href="'.concat(i).concat(a,'" target="_blank"><i class="fa fa-book fa-fw"></i>Help</a>')),n&&(h='<a href="'.concat(r).concat(n,'.png" target="_blank"><i class="fa fa-image fa-fw"></i>Example</a>')),'\n    <div id="popover" style="display:flex;flex-wrap:wrap;width: 100%;">\n      <div style="flex:1;height:100px;margin-bottom: 20px;">'.concat(o,'</div>\n      <div style="flex:1;height:100px;margin-bottom: 20px;">').concat(l,'</div>\n      <div style="flex-basis: 100%;height:100px;margin-bottom:20px;">').concat(h,"</div>\n    </div>")}},{key:"destroy",value:function(){var e=t.getVar("interval");void 0!==e&&(e.forEach((function(e){return t.clearInterval(e)})),e.clear())}}]),t}();p._globalvars=new u,p.CONSTANTS=new function t(){h(this,t),this.CONF_PATH_LIBS="libs/",this.CONF_PATH_DRAWIO="libs/drawio/",this.CONF_PATH_STATIC="static/",this.CONF_PATH_PARTIALS="partials/",this.CONF_PATH_STYLES="styles/",this.CONF_FILE_PLUGINJSON="./plugin.json",this.CONF_FILE_DEFAULTGRAPH="static/defaultGraph.drawio",this.CONF_FILE_SHAPESTXT="static/shapes.txt",this.CONF_FILE_APPJS="libs/drawio/js/app.min.js",this.CONF_FILE_SHAPESJS="libs/drawio/js/shapes.min.js",this.CONF_FILE_VIEWERJS="libs/drawio/js/viewer.min.js",this.CONF_FILE_PRECONFIGJS="libs/drawio/js/PreConfig.js",this.CONF_FILE_POSTCONFIGJS="libs/drawio/js/PostConfig.js",this.CONF_COLORS_STEPS=5,this.CONF_COLORS_MS=40,this.CONF_ANIMS_STEP=5,this.CONF_ANIMS_MS=40,this.CONF_BLINK_COLOR="#f5f242",this.VAR_STG_SHAPES="shapestext",this.VAR_TBL_SHAPES="shapesarray",this.VAR_STR_VIEWERJS="viewer.min.js",this.VAR_STR_SHAPESJS="shapes.min.js",this.VAR_STG_CTXROOT="contextroot",this.VAR_OBJ_TEMPLATESRV="templatesrv",this.VAR_OBJ_CTRL="ctrl",this.VAR_MAP_INTERVAL="interval",this.VAR_STR_RULENAME="_rule",this.VAR_NUM_LEVEL="_level",this.VAR_NUM_VALUE="_value",this.VAR_STR_FORMATED="_formated",this.VAR_STR_COLOR="_color",this.TOOLTIP_APPLYON=[{text:"Warning / Critical",value:"wc"},{text:"Always",value:"a"}],this.COLOR_APPLYON=[{text:"Never",value:"n"},{text:"Warning / Critical",value:"wc"},{text:"Always",value:"a"}],this.TEXT_APPLYON=[{text:"Never",value:"n"},{text:"When Metric Displayed",value:"wmd"},{text:"Warning / Critical",value:"wc"},{text:"Critical Only",value:"co"}],this.LINK_APPLYON=[{text:"Warning / Critical",value:"wc"},{text:"Always",value:"a"}],this.VALUE_TYPES=[{text:"Number",value:"number"},{text:"String",value:"string"},{text:"Date",value:"date"}],this.METRIC_TYPES=[{text:"Series",value:"serie"},{text:"Table",value:"table"}],this.IDENT_TYPES=[{text:"Id",value:"id"},{text:"Label",value:"value"}],this.AGGREGATION_TYPES=[{text:"First",value:"first"},{text:"Last",value:"current"},{text:"Min",value:"min"},{text:"Max",value:"max"},{text:"Sum",value:"total"},{text:"Avg",value:"avg"},{text:"Count",value:"count"},{text:"Delta",value:"delta"},{text:"Range",value:"range"},{text:"Diff",value:"diff"}],this.TOOLTIP_GRAPH_TYPES=[{text:"Line",value:"line"},{text:"Histogram",value:"bar"}],this.TOOLTIP_GRAPH_SCALE_TYPES=[{text:"Linear",value:"linear"},{text:"Logarithmic",value:"log"}],this.TOOLTIP_GRAPH_SIZE_TYPES=[{text:"Adjustable",value:"100%"},{text:"Small",value:"100px"},{text:"Medium",value:"200px"},{text:"Large",value:"400px"}],this.TOOLTIP_DIRECTION_TYPES=[{text:"Vertical",value:"v"},{text:"Horizontal ",value:"h"}],this.VALUE_DATEFORMAT_TYPES=[{text:"YYYY-MM-DD HH:mm:ss",value:"YYYY-MM-DD HH:mm:ss"},{text:"YYYY-MM-DD HH:mm:ss.SSS",value:"YYYY-MM-DD HH:mm:ss.SSS"},{text:"MM/DD/YY h:mm:ss a",value:"MM/DD/YY h:mm:ss a"},{text:"MMMM D, YYYY LT",value:"MMMM D, YYYY LT"},{text:"YYYY-MM-DD",value:"YYYY-MM-DD"}],this.VALUEMAPPINGTYPES=[{text:"Value to text",value:1},{text:"Range to text",value:2}],this.TEXTMETHODS=[{text:"All content",value:"content"},{text:"Substring",value:"pattern",placeholder:"/RegEx/"},{text:"Append (Space) ",value:"as"},{text:"Append (New line) ",value:"anl"}],this.COLORMETHODS=[{text:"Shape Stroke/Border",value:"strokeColor"},{text:"Shape Fill",value:"fillColor"},{text:"Label font color",value:"fontColor"},{text:"Label background color",value:"labelBackgroundColor"},{text:"Label border color",value:"labelBorderColor"},{text:"Image background",value:"imageBackground"},{text:"Image border",value:"imageBorder"}],this.EVENTMETHODS=[{text:"Shape : Change form (text)",value:"shape",type:"text",placeholder:"Shape name"},{text:"Shape : Rotate Shape (0-360)",value:"rotation",type:"number",placeholder:"0-360",default:0},{text:"Shape : Blink (frequence ms)",value:"blink",type:"number",placeholder:"Number in ms",default:500},{text:"Shape : Hide/Show (0|1)",value:"visibility",type:"number",placeholder:"0 or 1",typeahead:"0|1"},{text:"Shape : Change height (number)",value:"height",type:"number",placeholder:"Number of px"},{text:"Shape : Change width (number)",value:"width",type:"number",placeholder:"Number of px"},{text:"Shape : Opacity (0-100)",value:"opacity",type:"number",placeholder:"0-100",default:100},{text:"Shape : Collapse/Expande (0|1)",value:"fold",type:"number",placeholder:"0 or 1",typeahead:"0|1",default:"1"},{text:"Shape : Change position in Bar (0-100)",value:"barPos",type:"number",placeholder:"0-100"},{text:"Label : Replace text (text)",value:"text",type:"text",placeholder:"Text"},{text:"Label : Font Size (numeric)",value:"fontSize",type:"number",placeholder:"Number"},{text:"Label : Opacity (numeric)",value:"textOpacity",type:"number",placeholder:"0-100",default:100},{text:"Image : Change URL (text)",value:"image",type:"text",placeholder:"Url"}],this.LOCALVARIABLENAMES=[{text:"Name of the rule",value:this.VAR_STR_RULENAME},{text:"Current color according to the thresholds",value:this.VAR_STR_COLOR},{text:"Current raw value according to the aggregation",value:this.VAR_NUM_VALUE},{text:"Current level according to the thresholds",value:this.VAR_NUM_LEVEL},{text:"Current formated value accordingto the type",value:this.VAR_STR_FORMATED}]},p.log=c.init(),p.trace=f.init(),p.utils=a(18)}).call(this,"/")},function(t,e,a){"use strict";a.d(e,"a",(function(){return n}));function n(t,e,a,n){return new(a||(a=Promise))((function(i,r){function s(t){try{l(n.next(t))}catch(t){r(t)}}function o(t){try{l(n.throw(t))}catch(t){r(t)}}function l(t){t.done?i(t.value):new a((function(e){e(t.value)})).then(s,o)}l((n=n.apply(t,e||[])).next())}))}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__2__},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__3__},function(t,e,a){"use strict";var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;function i(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.assign=function(t){for(var e=Array.prototype.slice.call(arguments,1);e.length;){var a=e.shift();if(a){if("object"!=typeof a)throw new TypeError(a+"must be non-object");for(var n in a)i(a,n)&&(t[n]=a[n])}}return t},e.shrinkBuf=function(t,e){return t.length===e?t:t.subarray?t.subarray(0,e):(t.length=e,t)};var r={arraySet:function(t,e,a,n,i){if(e.subarray&&t.subarray)t.set(e.subarray(a,a+n),i);else for(var r=0;r<n;r++)t[i+r]=e[a+r]},flattenChunks:function(t){var e,a,n,i,r,s;for(n=0,e=0,a=t.length;e<a;e++)n+=t[e].length;for(s=new Uint8Array(n),i=0,e=0,a=t.length;e<a;e++)r=t[e],s.set(r,i),i+=r.length;return s}},s={arraySet:function(t,e,a,n,i){for(var r=0;r<n;r++)t[i+r]=e[a+r]},flattenChunks:function(t){return[].concat.apply([],t)}};e.setTyped=function(t){t?(e.Buf8=Uint8Array,e.Buf16=Uint16Array,e.Buf32=Int32Array,e.assign(e,r)):(e.Buf8=Array,e.Buf16=Array,e.Buf32=Array,e.assign(e,s))},e.setTyped(n)},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__5__},function(t,e,a){(function(a){var n,i;i=this,void 0===(n=function(){return i.Chartist=function(){var t={version:"0.11.4"};return function(t,e){"use strict";var a=t.window,n=t.document;e.namespaces={svg:"http://www.w3.org/2000/svg",xmlns:"http://www.w3.org/2000/xmlns/",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",ct:"http://gionkunz.github.com/chartist-js/ct"},e.noop=function(t){return t},e.alphaNumerate=function(t){return String.fromCharCode(97+t%26)},e.extend=function(t){var a,n,i;for(t=t||{},a=1;a<arguments.length;a++)for(var r in n=arguments[a])i=n[r],t[r]="object"!=typeof i||null===i||i instanceof Array?i:e.extend(t[r],i);return t},e.replaceAll=function(t,e,a){return t.replace(new RegExp(e,"g"),a)},e.ensureUnit=function(t,e){return"number"==typeof t&&(t+=e),t},e.quantity=function(t){if("string"==typeof t){var e=/^(\d+)\s*(.*)$/g.exec(t);return{value:+e[1],unit:e[2]||void 0}}return{value:t}},e.querySelector=function(t){return t instanceof Node?t:n.querySelector(t)},e.times=function(t){return Array.apply(null,new Array(t))},e.sum=function(t,e){return t+(e||0)},e.mapMultiply=function(t){return function(e){return e*t}},e.mapAdd=function(t){return function(e){return e+t}},e.serialMap=function(t,a){var n=[],i=Math.max.apply(null,t.map((function(t){return t.length})));return e.times(i).forEach((function(e,i){var r=t.map((function(t){return t[i]}));n[i]=a.apply(null,r)})),n},e.roundWithPrecision=function(t,a){var n=Math.pow(10,a||e.precision);return Math.round(t*n)/n},e.precision=8,e.escapingMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"},e.serialize=function(t){return null==t?t:("number"==typeof t?t=""+t:"object"==typeof t&&(t=JSON.stringify({data:t})),Object.keys(e.escapingMap).reduce((function(t,a){return e.replaceAll(t,a,e.escapingMap[a])}),t))},e.deserialize=function(t){if("string"!=typeof t)return t;t=Object.keys(e.escapingMap).reduce((function(t,a){return e.replaceAll(t,e.escapingMap[a],a)}),t);try{t=void 0!==(t=JSON.parse(t)).data?t.data:t}catch(t){}return t},e.createSvg=function(t,a,n,i){var r;return a=a||"100%",n=n||"100%",Array.prototype.slice.call(t.querySelectorAll("svg")).filter((function(t){return t.getAttributeNS(e.namespaces.xmlns,"ct")})).forEach((function(e){t.removeChild(e)})),(r=new e.Svg("svg").attr({width:a,height:n}).addClass(i))._node.style.width=a,r._node.style.height=n,t.appendChild(r._node),r},e.normalizeData=function(t,a,n){var i,r={raw:t,normalized:{}};return r.normalized.series=e.getDataArray({series:t.series||[]},a,n),i=r.normalized.series.every((function(t){return t instanceof Array}))?Math.max.apply(null,r.normalized.series.map((function(t){return t.length}))):r.normalized.series.length,r.normalized.labels=(t.labels||[]).slice(),Array.prototype.push.apply(r.normalized.labels,e.times(Math.max(0,i-r.normalized.labels.length)).map((function(){return""}))),a&&e.reverseData(r.normalized),r},e.safeHasProperty=function(t,e){return null!==t&&"object"==typeof t&&t.hasOwnProperty(e)},e.isDataHoleValue=function(t){return null==t||"number"==typeof t&&isNaN(t)},e.reverseData=function(t){t.labels.reverse(),t.series.reverse();for(var e=0;e<t.series.length;e++)"object"==typeof t.series[e]&&void 0!==t.series[e].data?t.series[e].data.reverse():t.series[e]instanceof Array&&t.series[e].reverse()},e.getDataArray=function(t,a,n){return t.series.map((function t(a){if(e.safeHasProperty(a,"value"))return t(a.value);if(e.safeHasProperty(a,"data"))return t(a.data);if(a instanceof Array)return a.map(t);if(!e.isDataHoleValue(a)){if(n){var i={};return"string"==typeof n?i[n]=e.getNumberOrUndefined(a):i.y=e.getNumberOrUndefined(a),i.x=a.hasOwnProperty("x")?e.getNumberOrUndefined(a.x):i.x,i.y=a.hasOwnProperty("y")?e.getNumberOrUndefined(a.y):i.y,i}return e.getNumberOrUndefined(a)}}))},e.normalizePadding=function(t,e){return e=e||0,"number"==typeof t?{top:t,right:t,bottom:t,left:t}:{top:"number"==typeof t.top?t.top:e,right:"number"==typeof t.right?t.right:e,bottom:"number"==typeof t.bottom?t.bottom:e,left:"number"==typeof t.left?t.left:e}},e.getMetaData=function(t,e){var a=t.data?t.data[e]:t[e];return a?a.meta:void 0},e.orderOfMagnitude=function(t){return Math.floor(Math.log(Math.abs(t))/Math.LN10)},e.projectLength=function(t,e,a){return e/a.range*t},e.getAvailableHeight=function(t,a){return Math.max((e.quantity(a.height).value||t.height())-(a.chartPadding.top+a.chartPadding.bottom)-a.axisX.offset,0)},e.getHighLow=function(t,a,n){var i={high:void 0===(a=e.extend({},a,n?a["axis"+n.toUpperCase()]:{})).high?-Number.MAX_VALUE:+a.high,low:void 0===a.low?Number.MAX_VALUE:+a.low},r=void 0===a.high,s=void 0===a.low;return(r||s)&&function t(e){if(void 0!==e)if(e instanceof Array)for(var a=0;a<e.length;a++)t(e[a]);else{var o=n?+e[n]:+e;r&&o>i.high&&(i.high=o),s&&o<i.low&&(i.low=o)}}(t),(a.referenceValue||0===a.referenceValue)&&(i.high=Math.max(a.referenceValue,i.high),i.low=Math.min(a.referenceValue,i.low)),i.high<=i.low&&(0===i.low?i.high=1:i.low<0?i.high=0:i.high>0?i.low=0:(i.high=1,i.low=0)),i},e.isNumeric=function(t){return null!==t&&isFinite(t)},e.isFalseyButZero=function(t){return!t&&0!==t},e.getNumberOrUndefined=function(t){return e.isNumeric(t)?+t:void 0},e.isMultiValue=function(t){return"object"==typeof t&&("x"in t||"y"in t)},e.getMultiValue=function(t,a){return e.isMultiValue(t)?e.getNumberOrUndefined(t[a||"y"]):e.getNumberOrUndefined(t)},e.rho=function(t){if(1===t)return t;function e(t,a){return t%a==0?a:e(a,t%a)}function a(t){return t*t+1}var n,i=2,r=2;if(t%2==0)return 2;do{i=a(i)%t,r=a(a(r))%t,n=e(Math.abs(i-r),t)}while(1===n);return n},e.getBounds=function(t,a,n,i){var r,s,o,l=0,h={high:a.high,low:a.low};h.valueRange=h.high-h.low,h.oom=e.orderOfMagnitude(h.valueRange),h.step=Math.pow(10,h.oom),h.min=Math.floor(h.low/h.step)*h.step,h.max=Math.ceil(h.high/h.step)*h.step,h.range=h.max-h.min,h.numberOfSteps=Math.round(h.range/h.step);var u=e.projectLength(t,h.step,h)<n,c=i?e.rho(h.range):0;if(i&&e.projectLength(t,1,h)>=n)h.step=1;else if(i&&c<h.step&&e.projectLength(t,c,h)>=n)h.step=c;else for(;;){if(u&&e.projectLength(t,h.step,h)<=n)h.step*=2;else{if(u||!(e.projectLength(t,h.step/2,h)>=n))break;if(h.step/=2,i&&h.step%1!=0){h.step*=2;break}}if(l++>1e3)throw new Error("Exceeded maximum number of iterations while optimizing scale step!")}var d=2221e-19;function f(t,e){return t===(t+=e)&&(t*=1+(e>0?d:-d)),t}for(h.step=Math.max(h.step,d),s=h.min,o=h.max;s+h.step<=h.low;)s=f(s,h.step);for(;o-h.step>=h.high;)o=f(o,-h.step);h.min=s,h.max=o,h.range=h.max-h.min;var p=[];for(r=h.min;r<=h.max;r=f(r,h.step)){var g=e.roundWithPrecision(r);g!==p[p.length-1]&&p.push(g)}return h.values=p,h},e.polarToCartesian=function(t,e,a,n){var i=(n-90)*Math.PI/180;return{x:t+a*Math.cos(i),y:e+a*Math.sin(i)}},e.createChartRect=function(t,a,n){var i=!(!a.axisX&&!a.axisY),r=i?a.axisY.offset:0,s=i?a.axisX.offset:0,o=t.width()||e.quantity(a.width).value||0,l=t.height()||e.quantity(a.height).value||0,h=e.normalizePadding(a.chartPadding,n);o=Math.max(o,r+h.left+h.right),l=Math.max(l,s+h.top+h.bottom);var u={padding:h,width:function(){return this.x2-this.x1},height:function(){return this.y1-this.y2}};return i?("start"===a.axisX.position?(u.y2=h.top+s,u.y1=Math.max(l-h.bottom,u.y2+1)):(u.y2=h.top,u.y1=Math.max(l-h.bottom-s,u.y2+1)),"start"===a.axisY.position?(u.x1=h.left+r,u.x2=Math.max(o-h.right,u.x1+1)):(u.x1=h.left,u.x2=Math.max(o-h.right-r,u.x1+1))):(u.x1=h.left,u.x2=Math.max(o-h.right,u.x1+1),u.y2=h.top,u.y1=Math.max(l-h.bottom,u.y2+1)),u},e.createGrid=function(t,a,n,i,r,s,o,l){var h={};h[n.units.pos+"1"]=t,h[n.units.pos+"2"]=t,h[n.counterUnits.pos+"1"]=i,h[n.counterUnits.pos+"2"]=i+r;var u=s.elem("line",h,o.join(" "));l.emit("draw",e.extend({type:"grid",axis:n,index:a,group:s,element:u},h))},e.createGridBackground=function(t,e,a,n){var i=t.elem("rect",{x:e.x1,y:e.y2,width:e.width(),height:e.height()},a,!0);n.emit("draw",{type:"gridBackground",group:t,element:i})},e.createLabel=function(t,a,i,r,s,o,l,h,u,c,d){var f,p={};if(p[s.units.pos]=t+l[s.units.pos],p[s.counterUnits.pos]=l[s.counterUnits.pos],p[s.units.len]=a,p[s.counterUnits.len]=Math.max(0,o-10),c){var g=n.createElement("span");g.className=u.join(" "),g.setAttribute("xmlns",e.namespaces.xhtml),g.innerText=r[i],g.style[s.units.len]=Math.round(p[s.units.len])+"px",g.style[s.counterUnits.len]=Math.round(p[s.counterUnits.len])+"px",f=h.foreignObject(g,e.extend({style:"overflow: visible;"},p))}else f=h.elem("text",p,u.join(" ")).text(r[i]);d.emit("draw",e.extend({type:"label",axis:s,index:i,group:h,element:f,text:r[i]},p))},e.getSeriesOption=function(t,e,a){if(t.name&&e.series&&e.series[t.name]){var n=e.series[t.name];return n.hasOwnProperty(a)?n[a]:e[a]}return e[a]},e.optionsProvider=function(t,n,i){var r,s,o=e.extend({},t),l=[];function h(t){var l=r;if(r=e.extend({},o),n)for(s=0;s<n.length;s++)a.matchMedia(n[s][0]).matches&&(r=e.extend(r,n[s][1]));i&&t&&i.emit("optionsChanged",{previousOptions:l,currentOptions:r})}if(!a.matchMedia)throw"window.matchMedia not found! Make sure you're using a polyfill.";if(n)for(s=0;s<n.length;s++){var u=a.matchMedia(n[s][0]);u.addListener(h),l.push(u)}return h(),{removeMediaQueryListeners:function(){l.forEach((function(t){t.removeListener(h)}))},getCurrentOptions:function(){return e.extend({},r)}}},e.splitIntoSegments=function(t,a,n){n=e.extend({},{increasingX:!1,fillHoles:!1},n);for(var i=[],r=!0,s=0;s<t.length;s+=2)void 0===e.getMultiValue(a[s/2].value)?n.fillHoles||(r=!0):(n.increasingX&&s>=2&&t[s]<=t[s-2]&&(r=!0),r&&(i.push({pathCoordinates:[],valueData:[]}),r=!1),i[i.length-1].pathCoordinates.push(t[s],t[s+1]),i[i.length-1].valueData.push(a[s/2]));return i}}(this||a,t),function(t,e){"use strict";e.Interpolation={},e.Interpolation.none=function(t){return t=e.extend({},{fillHoles:!1},t),function(a,n){for(var i=new e.Svg.Path,r=!0,s=0;s<a.length;s+=2){var o=a[s],l=a[s+1],h=n[s/2];void 0!==e.getMultiValue(h.value)?(r?i.move(o,l,!1,h):i.line(o,l,!1,h),r=!1):t.fillHoles||(r=!0)}return i}},e.Interpolation.simple=function(t){t=e.extend({},{divisor:2,fillHoles:!1},t);var a=1/Math.max(1,t.divisor);return function(n,i){for(var r,s,o,l=new e.Svg.Path,h=0;h<n.length;h+=2){var u=n[h],c=n[h+1],d=(u-r)*a,f=i[h/2];void 0!==f.value?(void 0===o?l.move(u,c,!1,f):l.curve(r+d,s,u-d,c,u,c,!1,f),r=u,s=c,o=f):t.fillHoles||(r=u=o=void 0)}return l}},e.Interpolation.cardinal=function(t){t=e.extend({},{tension:1,fillHoles:!1},t);var a=Math.min(1,Math.max(0,t.tension)),n=1-a;return function i(r,s){var o=e.splitIntoSegments(r,s,{fillHoles:t.fillHoles});if(o.length){if(o.length>1){var l=[];return o.forEach((function(t){l.push(i(t.pathCoordinates,t.valueData))})),e.Svg.Path.join(l)}if(r=o[0].pathCoordinates,s=o[0].valueData,r.length<=4)return e.Interpolation.none()(r,s);for(var h=(new e.Svg.Path).move(r[0],r[1],!1,s[0]),u=0,c=r.length;c-2>u;u+=2){var d=[{x:+r[u-2],y:+r[u-1]},{x:+r[u],y:+r[u+1]},{x:+r[u+2],y:+r[u+3]},{x:+r[u+4],y:+r[u+5]}];c-4===u?d[3]=d[2]:u||(d[0]={x:+r[u],y:+r[u+1]}),h.curve(a*(-d[0].x+6*d[1].x+d[2].x)/6+n*d[2].x,a*(-d[0].y+6*d[1].y+d[2].y)/6+n*d[2].y,a*(d[1].x+6*d[2].x-d[3].x)/6+n*d[2].x,a*(d[1].y+6*d[2].y-d[3].y)/6+n*d[2].y,d[2].x,d[2].y,!1,s[(u+2)/2])}return h}return e.Interpolation.none()([])}},e.Interpolation.monotoneCubic=function(t){return t=e.extend({},{fillHoles:!1},t),function a(n,i){var r=e.splitIntoSegments(n,i,{fillHoles:t.fillHoles,increasingX:!0});if(r.length){if(r.length>1){var s=[];return r.forEach((function(t){s.push(a(t.pathCoordinates,t.valueData))})),e.Svg.Path.join(s)}if(n=r[0].pathCoordinates,i=r[0].valueData,n.length<=4)return e.Interpolation.none()(n,i);var o,l,h=[],u=[],c=n.length/2,d=[],f=[],p=[],g=[];for(o=0;o<c;o++)h[o]=n[2*o],u[o]=n[2*o+1];for(o=0;o<c-1;o++)p[o]=u[o+1]-u[o],g[o]=h[o+1]-h[o],f[o]=p[o]/g[o];for(d[0]=f[0],d[c-1]=f[c-2],o=1;o<c-1;o++)0===f[o]||0===f[o-1]||f[o-1]>0!=f[o]>0?d[o]=0:(d[o]=3*(g[o-1]+g[o])/((2*g[o]+g[o-1])/f[o-1]+(g[o]+2*g[o-1])/f[o]),isFinite(d[o])||(d[o]=0));for(l=(new e.Svg.Path).move(h[0],u[0],!1,i[0]),o=0;o<c-1;o++)l.curve(h[o]+g[o]/3,u[o]+d[o]*g[o]/3,h[o+1]-g[o]/3,u[o+1]-d[o+1]*g[o]/3,h[o+1],u[o+1],!1,i[o+1]);return l}return e.Interpolation.none()([])}},e.Interpolation.step=function(t){return t=e.extend({},{postpone:!0,fillHoles:!1},t),function(a,n){for(var i,r,s,o=new e.Svg.Path,l=0;l<a.length;l+=2){var h=a[l],u=a[l+1],c=n[l/2];void 0!==c.value?(void 0===s?o.move(h,u,!1,c):(t.postpone?o.line(h,r,!1,s):o.line(i,u,!1,c),o.line(h,u,!1,c)),i=h,r=u,s=c):t.fillHoles||(i=r=s=void 0)}return o}}}(0,t),function(t,e){"use strict";e.EventEmitter=function(){var t=[];return{addEventHandler:function(e,a){t[e]=t[e]||[],t[e].push(a)},removeEventHandler:function(e,a){t[e]&&(a?(t[e].splice(t[e].indexOf(a),1),0===t[e].length&&delete t[e]):delete t[e])},emit:function(e,a){t[e]&&t[e].forEach((function(t){t(a)})),t["*"]&&t["*"].forEach((function(t){t(e,a)}))}}}}(0,t),function(t,e){"use strict";e.Class={extend:function(t,a){var n=a||this.prototype||e.Class,i=Object.create(n);e.Class.cloneDefinitions(i,t);var r=function(){var t,a=i.constructor||function(){};return t=this===e?Object.create(i):this,a.apply(t,Array.prototype.slice.call(arguments,0)),t};return r.prototype=i,r.super=n,r.extend=this.extend,r},cloneDefinitions:function(){var t=function(t){var e=[];if(t.length)for(var a=0;a<t.length;a++)e.push(t[a]);return e}(arguments),e=t[0];return t.splice(1,t.length-1).forEach((function(t){Object.getOwnPropertyNames(t).forEach((function(a){delete e[a],Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))})),e}}}(0,t),function(t,e){"use strict";var a=t.window;function n(){a.addEventListener("resize",this.resizeListener),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter),this.eventEmitter.addEventHandler("optionsChanged",function(){this.update()}.bind(this)),this.options.plugins&&this.options.plugins.forEach(function(t){t instanceof Array?t[0](this,t[1]):t(this)}.bind(this)),this.eventEmitter.emit("data",{type:"initial",data:this.data}),this.createChart(this.optionsProvider.getCurrentOptions()),this.initializeTimeoutId=void 0}e.Base=e.Class.extend({constructor:function(t,a,i,r,s){this.container=e.querySelector(t),this.data=a||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.defaultOptions=i,this.options=r,this.responsiveOptions=s,this.eventEmitter=e.EventEmitter(),this.supportsForeignObject=e.Svg.isSupported("Extensibility"),this.supportsAnimations=e.Svg.isSupported("AnimationEventsAttribute"),this.resizeListener=function(){this.update()}.bind(this),this.container&&(this.container.__chartist__&&this.container.__chartist__.detach(),this.container.__chartist__=this),this.initializeTimeoutId=setTimeout(n.bind(this),0)},optionsProvider:void 0,container:void 0,svg:void 0,eventEmitter:void 0,createChart:function(){throw new Error("Base chart type can't be instantiated!")},update:function(t,a,n){return t&&(this.data=t||{},this.data.labels=this.data.labels||[],this.data.series=this.data.series||[],this.eventEmitter.emit("data",{type:"update",data:this.data})),a&&(this.options=e.extend({},n?this.options:this.defaultOptions,a),this.initializeTimeoutId||(this.optionsProvider.removeMediaQueryListeners(),this.optionsProvider=e.optionsProvider(this.options,this.responsiveOptions,this.eventEmitter))),this.initializeTimeoutId||this.createChart(this.optionsProvider.getCurrentOptions()),this},detach:function(){return this.initializeTimeoutId?a.clearTimeout(this.initializeTimeoutId):(a.removeEventListener("resize",this.resizeListener),this.optionsProvider.removeMediaQueryListeners()),this},on:function(t,e){return this.eventEmitter.addEventHandler(t,e),this},off:function(t,e){return this.eventEmitter.removeEventHandler(t,e),this},version:e.version,supportsForeignObject:!1})}(this||a,t),function(t,e){"use strict";var a=t.document;e.Svg=e.Class.extend({constructor:function(t,n,i,r,s){t instanceof Element?this._node=t:(this._node=a.createElementNS(e.namespaces.svg,t),"svg"===t&&this.attr({"xmlns:ct":e.namespaces.ct})),n&&this.attr(n),i&&this.addClass(i),r&&(s&&r._node.firstChild?r._node.insertBefore(this._node,r._node.firstChild):r._node.appendChild(this._node))},attr:function(t,a){return"string"==typeof t?a?this._node.getAttributeNS(a,t):this._node.getAttribute(t):(Object.keys(t).forEach(function(a){if(void 0!==t[a])if(-1!==a.indexOf(":")){var n=a.split(":");this._node.setAttributeNS(e.namespaces[n[0]],a,t[a])}else this._node.setAttribute(a,t[a])}.bind(this)),this)},elem:function(t,a,n,i){return new e.Svg(t,a,n,this,i)},parent:function(){return this._node.parentNode instanceof SVGElement?new e.Svg(this._node.parentNode):null},root:function(){for(var t=this._node;"svg"!==t.nodeName;)t=t.parentNode;return new e.Svg(t)},querySelector:function(t){var a=this._node.querySelector(t);return a?new e.Svg(a):null},querySelectorAll:function(t){var a=this._node.querySelectorAll(t);return a.length?new e.Svg.List(a):null},getNode:function(){return this._node},foreignObject:function(t,n,i,r){if("string"==typeof t){var s=a.createElement("div");s.innerHTML=t,t=s.firstChild}t.setAttribute("xmlns",e.namespaces.xmlns);var o=this.elem("foreignObject",n,i,r);return o._node.appendChild(t),o},text:function(t){return this._node.appendChild(a.createTextNode(t)),this},empty:function(){for(;this._node.firstChild;)this._node.removeChild(this._node.firstChild);return this},remove:function(){return this._node.parentNode.removeChild(this._node),this.parent()},replace:function(t){return this._node.parentNode.replaceChild(t._node,this._node),t},append:function(t,e){return e&&this._node.firstChild?this._node.insertBefore(t._node,this._node.firstChild):this._node.appendChild(t._node),this},classes:function(){return this._node.getAttribute("class")?this._node.getAttribute("class").trim().split(/\s+/):[]},addClass:function(t){return this._node.setAttribute("class",this.classes(this._node).concat(t.trim().split(/\s+/)).filter((function(t,e,a){return a.indexOf(t)===e})).join(" ")),this},removeClass:function(t){var e=t.trim().split(/\s+/);return this._node.setAttribute("class",this.classes(this._node).filter((function(t){return-1===e.indexOf(t)})).join(" ")),this},removeAllClasses:function(){return this._node.setAttribute("class",""),this},height:function(){return this._node.getBoundingClientRect().height},width:function(){return this._node.getBoundingClientRect().width},animate:function(t,a,n){return void 0===a&&(a=!0),Object.keys(t).forEach(function(i){function r(t,a){var r,s,o,l={};t.easing&&(o=t.easing instanceof Array?t.easing:e.Svg.Easing[t.easing],delete t.easing),t.begin=e.ensureUnit(t.begin,"ms"),t.dur=e.ensureUnit(t.dur,"ms"),o&&(t.calcMode="spline",t.keySplines=o.join(" "),t.keyTimes="0;1"),a&&(t.fill="freeze",l[i]=t.from,this.attr(l),s=e.quantity(t.begin||0).value,t.begin="indefinite"),r=this.elem("animate",e.extend({attributeName:i},t)),a&&setTimeout(function(){try{r._node.beginElement()}catch(e){l[i]=t.to,this.attr(l),r.remove()}}.bind(this),s),n&&r._node.addEventListener("beginEvent",function(){n.emit("animationBegin",{element:this,animate:r._node,params:t})}.bind(this)),r._node.addEventListener("endEvent",function(){n&&n.emit("animationEnd",{element:this,animate:r._node,params:t}),a&&(l[i]=t.to,this.attr(l),r.remove())}.bind(this))}t[i]instanceof Array?t[i].forEach(function(t){r.bind(this)(t,!1)}.bind(this)):r.bind(this)(t[i],a)}.bind(this)),this}}),e.Svg.isSupported=function(t){return a.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#"+t,"1.1")},e.Svg.Easing={easeInSine:[.47,0,.745,.715],easeOutSine:[.39,.575,.565,1],easeInOutSine:[.445,.05,.55,.95],easeInQuad:[.55,.085,.68,.53],easeOutQuad:[.25,.46,.45,.94],easeInOutQuad:[.455,.03,.515,.955],easeInCubic:[.55,.055,.675,.19],easeOutCubic:[.215,.61,.355,1],easeInOutCubic:[.645,.045,.355,1],easeInQuart:[.895,.03,.685,.22],easeOutQuart:[.165,.84,.44,1],easeInOutQuart:[.77,0,.175,1],easeInQuint:[.755,.05,.855,.06],easeOutQuint:[.23,1,.32,1],easeInOutQuint:[.86,0,.07,1],easeInExpo:[.95,.05,.795,.035],easeOutExpo:[.19,1,.22,1],easeInOutExpo:[1,0,0,1],easeInCirc:[.6,.04,.98,.335],easeOutCirc:[.075,.82,.165,1],easeInOutCirc:[.785,.135,.15,.86],easeInBack:[.6,-.28,.735,.045],easeOutBack:[.175,.885,.32,1.275],easeInOutBack:[.68,-.55,.265,1.55]},e.Svg.List=e.Class.extend({constructor:function(t){var a=this;this.svgElements=[];for(var n=0;n<t.length;n++)this.svgElements.push(new e.Svg(t[n]));Object.keys(e.Svg.prototype).filter((function(t){return-1===["constructor","parent","querySelector","querySelectorAll","replace","append","classes","height","width"].indexOf(t)})).forEach((function(t){a[t]=function(){var n=Array.prototype.slice.call(arguments,0);return a.svgElements.forEach((function(a){e.Svg.prototype[t].apply(a,n)})),a}}))}})}(this||a,t),function(t,e){"use strict";var a={m:["x","y"],l:["x","y"],c:["x1","y1","x2","y2","x","y"],a:["rx","ry","xAr","lAf","sf","x","y"]},n={accuracy:3};function i(t,a,n,i,r,s){var o=e.extend({command:r?t.toLowerCase():t.toUpperCase()},a,s?{data:s}:{});n.splice(i,0,o)}function r(t,e){t.forEach((function(n,i){a[n.command.toLowerCase()].forEach((function(a,r){e(n,a,i,r,t)}))}))}e.Svg.Path=e.Class.extend({constructor:function(t,a){this.pathElements=[],this.pos=0,this.close=t,this.options=e.extend({},n,a)},position:function(t){return void 0!==t?(this.pos=Math.max(0,Math.min(this.pathElements.length,t)),this):this.pos},remove:function(t){return this.pathElements.splice(this.pos,t),this},move:function(t,e,a,n){return i("M",{x:+t,y:+e},this.pathElements,this.pos++,a,n),this},line:function(t,e,a,n){return i("L",{x:+t,y:+e},this.pathElements,this.pos++,a,n),this},curve:function(t,e,a,n,r,s,o,l){return i("C",{x1:+t,y1:+e,x2:+a,y2:+n,x:+r,y:+s},this.pathElements,this.pos++,o,l),this},arc:function(t,e,a,n,r,s,o,l,h){return i("A",{rx:+t,ry:+e,xAr:+a,lAf:+n,sf:+r,x:+s,y:+o},this.pathElements,this.pos++,l,h),this},scale:function(t,e){return r(this.pathElements,(function(a,n){a[n]*="x"===n[0]?t:e})),this},translate:function(t,e){return r(this.pathElements,(function(a,n){a[n]+="x"===n[0]?t:e})),this},transform:function(t){return r(this.pathElements,(function(e,a,n,i,r){var s=t(e,a,n,i,r);(s||0===s)&&(e[a]=s)})),this},parse:function(t){var n=t.replace(/([A-Za-z])([0-9])/g,"$1 $2").replace(/([0-9])([A-Za-z])/g,"$1 $2").split(/[\s,]+/).reduce((function(t,e){return e.match(/[A-Za-z]/)&&t.push([]),t[t.length-1].push(e),t}),[]);"Z"===n[n.length-1][0].toUpperCase()&&n.pop();var i=n.map((function(t){var n=t.shift(),i=a[n.toLowerCase()];return e.extend({command:n},i.reduce((function(e,a,n){return e[a]=+t[n],e}),{}))})),r=[this.pos,0];return Array.prototype.push.apply(r,i),Array.prototype.splice.apply(this.pathElements,r),this.pos+=i.length,this},stringify:function(){var t=Math.pow(10,this.options.accuracy);return this.pathElements.reduce(function(e,n){var i=a[n.command.toLowerCase()].map(function(e){return this.options.accuracy?Math.round(n[e]*t)/t:n[e]}.bind(this));return e+n.command+i.join(",")}.bind(this),"")+(this.close?"Z":"")},clone:function(t){var a=new e.Svg.Path(t||this.close);return a.pos=this.pos,a.pathElements=this.pathElements.slice().map((function(t){return e.extend({},t)})),a.options=e.extend({},this.options),a},splitByCommand:function(t){var a=[new e.Svg.Path];return this.pathElements.forEach((function(n){n.command===t.toUpperCase()&&0!==a[a.length-1].pathElements.length&&a.push(new e.Svg.Path),a[a.length-1].pathElements.push(n)})),a}}),e.Svg.Path.elementDescriptions=a,e.Svg.Path.join=function(t,a,n){for(var i=new e.Svg.Path(a,n),r=0;r<t.length;r++)for(var s=t[r],o=0;o<s.pathElements.length;o++)i.pathElements.push(s.pathElements[o]);return i}}(0,t),function(t,e){"use strict";t.window,t.document;var a={x:{pos:"x",len:"width",dir:"horizontal",rectStart:"x1",rectEnd:"x2",rectOffset:"y2"},y:{pos:"y",len:"height",dir:"vertical",rectStart:"y2",rectEnd:"y1",rectOffset:"x1"}};e.Axis=e.Class.extend({constructor:function(t,e,n,i){this.units=t,this.counterUnits=t===a.x?a.y:a.x,this.chartRect=e,this.axisLength=e[t.rectEnd]-e[t.rectStart],this.gridOffset=e[t.rectOffset],this.ticks=n,this.options=i},createGridAndLabels:function(t,a,n,i,r){var s=i["axis"+this.units.pos.toUpperCase()],o=this.ticks.map(this.projectValue.bind(this)),l=this.ticks.map(s.labelInterpolationFnc);o.forEach(function(h,u){var c,d={x:0,y:0};c=o[u+1]?o[u+1]-h:Math.max(this.axisLength-h,30),e.isFalseyButZero(l[u])&&""!==l[u]||("x"===this.units.pos?(h=this.chartRect.x1+h,d.x=i.axisX.labelOffset.x,"start"===i.axisX.position?d.y=this.chartRect.padding.top+i.axisX.labelOffset.y+(n?5:20):d.y=this.chartRect.y1+i.axisX.labelOffset.y+(n?5:20)):(h=this.chartRect.y1-h,d.y=i.axisY.labelOffset.y-(n?c:0),"start"===i.axisY.position?d.x=n?this.chartRect.padding.left+i.axisY.labelOffset.x:this.chartRect.x1-10:d.x=this.chartRect.x2+i.axisY.labelOffset.x+10),s.showGrid&&e.createGrid(h,u,this,this.gridOffset,this.chartRect[this.counterUnits.len](),t,[i.classNames.grid,i.classNames[this.units.dir]],r),s.showLabel&&e.createLabel(h,c,u,l,this,s.offset,d,a,[i.classNames.label,i.classNames[this.units.dir],"start"===s.position?i.classNames[s.position]:i.classNames.end],n,r))}.bind(this))},projectValue:function(t,e,a){throw new Error("Base axis can't be instantiated!")}}),e.Axis.units=a}(this||a,t),function(t,e){"use strict";t.window,t.document,e.AutoScaleAxis=e.Axis.extend({constructor:function(t,a,n,i){var r=i.highLow||e.getHighLow(a,i,t.pos);this.bounds=e.getBounds(n[t.rectEnd]-n[t.rectStart],r,i.scaleMinSpace||20,i.onlyInteger),this.range={min:this.bounds.min,max:this.bounds.max},e.AutoScaleAxis.super.constructor.call(this,t,n,this.bounds.values,i)},projectValue:function(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.bounds.min)/this.bounds.range}})}(this||a,t),function(t,e){"use strict";t.window,t.document,e.FixedScaleAxis=e.Axis.extend({constructor:function(t,a,n,i){var r=i.highLow||e.getHighLow(a,i,t.pos);this.divisor=i.divisor||1,this.ticks=i.ticks||e.times(this.divisor).map(function(t,e){return r.low+(r.high-r.low)/this.divisor*e}.bind(this)),this.ticks.sort((function(t,e){return t-e})),this.range={min:r.low,max:r.high},e.FixedScaleAxis.super.constructor.call(this,t,n,this.ticks,i),this.stepLength=this.axisLength/this.divisor},projectValue:function(t){return this.axisLength*(+e.getMultiValue(t,this.units.pos)-this.range.min)/(this.range.max-this.range.min)}})}(this||a,t),function(t,e){"use strict";t.window,t.document,e.StepAxis=e.Axis.extend({constructor:function(t,a,n,i){e.StepAxis.super.constructor.call(this,t,n,i.ticks,i);var r=Math.max(1,i.ticks.length-(i.stretch?1:0));this.stepLength=this.axisLength/r},projectValue:function(t,e){return this.stepLength*e}})}(this||a,t),function(t,e){"use strict";t.window,t.document;var a={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,type:void 0,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,showLine:!0,showPoint:!0,showArea:!1,areaBase:0,lineSmooth:!0,showGridBackground:!1,low:void 0,high:void 0,chartPadding:{top:15,right:15,bottom:5,left:10},fullWidth:!1,reverseData:!1,classNames:{chart:"ct-chart-line",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",line:"ct-line",point:"ct-point",area:"ct-area",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};e.Line=e.Base.extend({constructor:function(t,n,i,r){e.Line.super.constructor.call(this,t,n,a,e.extend({},a,i),r)},createChart:function(t){var n=e.normalizeData(this.data,t.reverseData,!0);this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart);var i,r,s=this.svg.elem("g").addClass(t.classNames.gridGroup),o=this.svg.elem("g"),l=this.svg.elem("g").addClass(t.classNames.labelGroup),h=e.createChartRect(this.svg,t,a.padding);i=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,n.normalized.series,h,e.extend({},t.axisX,{ticks:n.normalized.labels,stretch:t.fullWidth})):t.axisX.type.call(e,e.Axis.units.x,n.normalized.series,h,t.axisX),r=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,n.normalized.series,h,e.extend({},t.axisY,{high:e.isNumeric(t.high)?t.high:t.axisY.high,low:e.isNumeric(t.low)?t.low:t.axisY.low})):t.axisY.type.call(e,e.Axis.units.y,n.normalized.series,h,t.axisY),i.createGridAndLabels(s,l,this.supportsForeignObject,t,this.eventEmitter),r.createGridAndLabels(s,l,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(s,h,t.classNames.gridBackground,this.eventEmitter),n.raw.series.forEach(function(a,s){var l=o.elem("g");l.attr({"ct:series-name":a.name,"ct:meta":e.serialize(a.meta)}),l.addClass([t.classNames.series,a.className||t.classNames.series+"-"+e.alphaNumerate(s)].join(" "));var u=[],c=[];n.normalized.series[s].forEach(function(t,o){var l={x:h.x1+i.projectValue(t,o,n.normalized.series[s]),y:h.y1-r.projectValue(t,o,n.normalized.series[s])};u.push(l.x,l.y),c.push({value:t,valueIndex:o,meta:e.getMetaData(a,o)})}.bind(this));var d={lineSmooth:e.getSeriesOption(a,t,"lineSmooth"),showPoint:e.getSeriesOption(a,t,"showPoint"),showLine:e.getSeriesOption(a,t,"showLine"),showArea:e.getSeriesOption(a,t,"showArea"),areaBase:e.getSeriesOption(a,t,"areaBase")},f=("function"==typeof d.lineSmooth?d.lineSmooth:d.lineSmooth?e.Interpolation.monotoneCubic():e.Interpolation.none())(u,c);if(d.showPoint&&f.pathElements.forEach(function(n){var o=l.elem("line",{x1:n.x,y1:n.y,x2:n.x+.01,y2:n.y},t.classNames.point).attr({"ct:value":[n.data.value.x,n.data.value.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(n.data.meta)});this.eventEmitter.emit("draw",{type:"point",value:n.data.value,index:n.data.valueIndex,meta:n.data.meta,series:a,seriesIndex:s,axisX:i,axisY:r,group:l,element:o,x:n.x,y:n.y})}.bind(this)),d.showLine){var p=l.elem("path",{d:f.stringify()},t.classNames.line,!0);this.eventEmitter.emit("draw",{type:"line",values:n.normalized.series[s],path:f.clone(),chartRect:h,index:s,series:a,seriesIndex:s,seriesMeta:a.meta,axisX:i,axisY:r,group:l,element:p})}if(d.showArea&&r.range){var g=Math.max(Math.min(d.areaBase,r.range.max),r.range.min),v=h.y1-r.projectValue(g);f.splitByCommand("M").filter((function(t){return t.pathElements.length>1})).map((function(t){var e=t.pathElements[0],a=t.pathElements[t.pathElements.length-1];return t.clone(!0).position(0).remove(1).move(e.x,v).line(e.x,e.y).position(t.pathElements.length+1).line(a.x,v)})).forEach(function(e){var o=l.elem("path",{d:e.stringify()},t.classNames.area,!0);this.eventEmitter.emit("draw",{type:"area",values:n.normalized.series[s],path:e.clone(),series:a,seriesIndex:s,axisX:i,axisY:r,chartRect:h,index:s,group:l,element:o})}.bind(this))}}.bind(this)),this.eventEmitter.emit("created",{bounds:r.bounds,chartRect:h,axisX:i,axisY:r,svg:this.svg,options:t})}})}(this||a,t),function(t,e){"use strict";t.window,t.document;var a={axisX:{offset:30,position:"end",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:30,onlyInteger:!1},axisY:{offset:40,position:"start",labelOffset:{x:0,y:0},showLabel:!0,showGrid:!0,labelInterpolationFnc:e.noop,scaleMinSpace:20,onlyInteger:!1},width:void 0,height:void 0,high:void 0,low:void 0,referenceValue:0,chartPadding:{top:15,right:15,bottom:5,left:10},seriesBarDistance:15,stackBars:!1,stackMode:"accumulate",horizontalBars:!1,distributeSeries:!1,reverseData:!1,showGridBackground:!1,classNames:{chart:"ct-chart-bar",horizontalBars:"ct-horizontal-bars",label:"ct-label",labelGroup:"ct-labels",series:"ct-series",bar:"ct-bar",grid:"ct-grid",gridGroup:"ct-grids",gridBackground:"ct-grid-background",vertical:"ct-vertical",horizontal:"ct-horizontal",start:"ct-start",end:"ct-end"}};e.Bar=e.Base.extend({constructor:function(t,n,i,r){e.Bar.super.constructor.call(this,t,n,a,e.extend({},a,i),r)},createChart:function(t){var n,i;t.distributeSeries?(n=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y")).normalized.series=n.normalized.series.map((function(t){return[t]})):n=e.normalizeData(this.data,t.reverseData,t.horizontalBars?"x":"y"),this.svg=e.createSvg(this.container,t.width,t.height,t.classNames.chart+(t.horizontalBars?" "+t.classNames.horizontalBars:""));var r=this.svg.elem("g").addClass(t.classNames.gridGroup),s=this.svg.elem("g"),o=this.svg.elem("g").addClass(t.classNames.labelGroup);if(t.stackBars&&0!==n.normalized.series.length){var l=e.serialMap(n.normalized.series,(function(){return Array.prototype.slice.call(arguments).map((function(t){return t})).reduce((function(t,e){return{x:t.x+(e&&e.x)||0,y:t.y+(e&&e.y)||0}}),{x:0,y:0})}));i=e.getHighLow([l],t,t.horizontalBars?"x":"y")}else i=e.getHighLow(n.normalized.series,t,t.horizontalBars?"x":"y");i.high=+t.high||(0===t.high?0:i.high),i.low=+t.low||(0===t.low?0:i.low);var h,u,c,d,f,p=e.createChartRect(this.svg,t,a.padding);u=t.distributeSeries&&t.stackBars?n.normalized.labels.slice(0,1):n.normalized.labels,t.horizontalBars?(h=d=void 0===t.axisX.type?new e.AutoScaleAxis(e.Axis.units.x,n.normalized.series,p,e.extend({},t.axisX,{highLow:i,referenceValue:0})):t.axisX.type.call(e,e.Axis.units.x,n.normalized.series,p,e.extend({},t.axisX,{highLow:i,referenceValue:0})),c=f=void 0===t.axisY.type?new e.StepAxis(e.Axis.units.y,n.normalized.series,p,{ticks:u}):t.axisY.type.call(e,e.Axis.units.y,n.normalized.series,p,t.axisY)):(c=d=void 0===t.axisX.type?new e.StepAxis(e.Axis.units.x,n.normalized.series,p,{ticks:u}):t.axisX.type.call(e,e.Axis.units.x,n.normalized.series,p,t.axisX),h=f=void 0===t.axisY.type?new e.AutoScaleAxis(e.Axis.units.y,n.normalized.series,p,e.extend({},t.axisY,{highLow:i,referenceValue:0})):t.axisY.type.call(e,e.Axis.units.y,n.normalized.series,p,e.extend({},t.axisY,{highLow:i,referenceValue:0})));var g=t.horizontalBars?p.x1+h.projectValue(0):p.y1-h.projectValue(0),v=[];c.createGridAndLabels(r,o,this.supportsForeignObject,t,this.eventEmitter),h.createGridAndLabels(r,o,this.supportsForeignObject,t,this.eventEmitter),t.showGridBackground&&e.createGridBackground(r,p,t.classNames.gridBackground,this.eventEmitter),n.raw.series.forEach(function(a,i){var r,o,l=i-(n.raw.series.length-1)/2;r=t.distributeSeries&&!t.stackBars?c.axisLength/n.normalized.series.length/2:t.distributeSeries&&t.stackBars?c.axisLength/2:c.axisLength/n.normalized.series[i].length/2,(o=s.elem("g")).attr({"ct:series-name":a.name,"ct:meta":e.serialize(a.meta)}),o.addClass([t.classNames.series,a.className||t.classNames.series+"-"+e.alphaNumerate(i)].join(" ")),n.normalized.series[i].forEach(function(s,u){var m,y,b,x;if(x=t.distributeSeries&&!t.stackBars?i:t.distributeSeries&&t.stackBars?0:u,m=t.horizontalBars?{x:p.x1+h.projectValue(s&&s.x?s.x:0,u,n.normalized.series[i]),y:p.y1-c.projectValue(s&&s.y?s.y:0,x,n.normalized.series[i])}:{x:p.x1+c.projectValue(s&&s.x?s.x:0,x,n.normalized.series[i]),y:p.y1-h.projectValue(s&&s.y?s.y:0,u,n.normalized.series[i])},c instanceof e.StepAxis&&(c.options.stretch||(m[c.units.pos]+=r*(t.horizontalBars?-1:1)),m[c.units.pos]+=t.stackBars||t.distributeSeries?0:l*t.seriesBarDistance*(t.horizontalBars?-1:1)),b=v[u]||g,v[u]=b-(g-m[c.counterUnits.pos]),void 0!==s){var w={};w[c.units.pos+"1"]=m[c.units.pos],w[c.units.pos+"2"]=m[c.units.pos],!t.stackBars||"accumulate"!==t.stackMode&&t.stackMode?(w[c.counterUnits.pos+"1"]=g,w[c.counterUnits.pos+"2"]=m[c.counterUnits.pos]):(w[c.counterUnits.pos+"1"]=b,w[c.counterUnits.pos+"2"]=v[u]),w.x1=Math.min(Math.max(w.x1,p.x1),p.x2),w.x2=Math.min(Math.max(w.x2,p.x1),p.x2),w.y1=Math.min(Math.max(w.y1,p.y2),p.y1),w.y2=Math.min(Math.max(w.y2,p.y2),p.y1);var k=e.getMetaData(a,u);y=o.elem("line",w,t.classNames.bar).attr({"ct:value":[s.x,s.y].filter(e.isNumeric).join(","),"ct:meta":e.serialize(k)}),this.eventEmitter.emit("draw",e.extend({type:"bar",value:s,index:u,meta:k,series:a,seriesIndex:i,axisX:d,axisY:f,chartRect:p,group:o,element:y},w))}}.bind(this))}.bind(this)),this.eventEmitter.emit("created",{bounds:h.bounds,chartRect:p,axisX:d,axisY:f,svg:this.svg,options:t})}})}(this||a,t),function(t,e){"use strict";t.window,t.document;var a={width:void 0,height:void 0,chartPadding:5,classNames:{chartPie:"ct-chart-pie",chartDonut:"ct-chart-donut",series:"ct-series",slicePie:"ct-slice-pie",sliceDonut:"ct-slice-donut",sliceDonutSolid:"ct-slice-donut-solid",label:"ct-label"},startAngle:0,total:void 0,donut:!1,donutSolid:!1,donutWidth:60,showLabel:!0,labelOffset:0,labelPosition:"inside",labelInterpolationFnc:e.noop,labelDirection:"neutral",reverseData:!1,ignoreEmptyValues:!1};function n(t,e,a){var n=e.x>t.x;return n&&"explode"===a||!n&&"implode"===a?"start":n&&"implode"===a||!n&&"explode"===a?"end":"middle"}e.Pie=e.Base.extend({constructor:function(t,n,i,r){e.Pie.super.constructor.call(this,t,n,a,e.extend({},a,i),r)},createChart:function(t){var i,r,s,o,l,h=e.normalizeData(this.data),u=[],c=t.startAngle;this.svg=e.createSvg(this.container,t.width,t.height,t.donut?t.classNames.chartDonut:t.classNames.chartPie),r=e.createChartRect(this.svg,t,a.padding),s=Math.min(r.width()/2,r.height()/2),l=t.total||h.normalized.series.reduce((function(t,e){return t+e}),0);var d=e.quantity(t.donutWidth);"%"===d.unit&&(d.value*=s/100),s-=t.donut&&!t.donutSolid?d.value/2:0,o="outside"===t.labelPosition||t.donut&&!t.donutSolid?s:"center"===t.labelPosition?0:t.donutSolid?s-d.value/2:s/2,o+=t.labelOffset;var f={x:r.x1+r.width()/2,y:r.y2+r.height()/2},p=1===h.raw.series.filter((function(t){return t.hasOwnProperty("value")?0!==t.value:0!==t})).length;h.raw.series.forEach(function(t,e){u[e]=this.svg.elem("g",null,null)}.bind(this)),t.showLabel&&(i=this.svg.elem("g",null,null)),h.raw.series.forEach(function(a,r){if(0!==h.normalized.series[r]||!t.ignoreEmptyValues){u[r].attr({"ct:series-name":a.name}),u[r].addClass([t.classNames.series,a.className||t.classNames.series+"-"+e.alphaNumerate(r)].join(" "));var g=l>0?c+h.normalized.series[r]/l*360:0,v=Math.max(0,c-(0===r||p?0:.2));g-v>=359.99&&(g=v+359.99);var m,y,b,x=e.polarToCartesian(f.x,f.y,s,v),w=e.polarToCartesian(f.x,f.y,s,g),k=new e.Svg.Path(!t.donut||t.donutSolid).move(w.x,w.y).arc(s,s,0,g-c>180,0,x.x,x.y);t.donut?t.donutSolid&&(b=s-d.value,m=e.polarToCartesian(f.x,f.y,b,c-(0===r||p?0:.2)),y=e.polarToCartesian(f.x,f.y,b,g),k.line(m.x,m.y),k.arc(b,b,0,g-c>180,1,y.x,y.y)):k.line(f.x,f.y);var _=t.classNames.slicePie;t.donut&&(_=t.classNames.sliceDonut,t.donutSolid&&(_=t.classNames.sliceDonutSolid));var S=u[r].elem("path",{d:k.stringify()},_);if(S.attr({"ct:value":h.normalized.series[r],"ct:meta":e.serialize(a.meta)}),t.donut&&!t.donutSolid&&(S._node.style.strokeWidth=d.value+"px"),this.eventEmitter.emit("draw",{type:"slice",value:h.normalized.series[r],totalDataSum:l,index:r,meta:a.meta,series:a,group:u[r],element:S,path:k.clone(),center:f,radius:s,startAngle:c,endAngle:g}),t.showLabel){var C,E;C=1===h.raw.series.length?{x:f.x,y:f.y}:e.polarToCartesian(f.x,f.y,o,c+(g-c)/2),E=h.normalized.labels&&!e.isFalseyButZero(h.normalized.labels[r])?h.normalized.labels[r]:h.normalized.series[r];var O=t.labelInterpolationFnc(E,r);if(O||0===O){var T=i.elem("text",{dx:C.x,dy:C.y,"text-anchor":n(f,C,t.labelDirection)},t.classNames.label).text(""+O);this.eventEmitter.emit("draw",{type:"label",index:r,group:i,element:T,text:""+O,x:C.x,y:C.y})}}c=g}}.bind(this)),this.eventEmitter.emit("created",{chartRect:r,svg:this.svg,options:t})},determineAnchorPosition:n})}(this||a,t),t}()}.apply(e,[]))||(t.exports=n)}).call(this,a(14))},function(t,e,a){"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__8__},function(t,e,a){"use strict";t.exports=function(t,e,a,n){for(var i=65535&t|0,r=t>>>16&65535|0,s=0;0!==a;){a-=s=a>2e3?2e3:a;do{r=r+(i=i+e[n++]|0)|0}while(--s);i%=65521,r%=65521}return i|r<<16|0}},function(t,e,a){"use strict";var n=function(){for(var t,e=[],a=0;a<256;a++){t=a;for(var n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;e[a]=t}return e}();t.exports=function(t,e,a,i){var r=n,s=i+a;t^=-1;for(var o=i;o<s;o++)t=t>>>8^r[255&(t^e[o])];return-1^t}},function(t,e,a){"use strict";var n=a(4),i=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch(t){i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(t){r=!1}for(var s=new n.Buf8(256),o=0;o<256;o++)s[o]=o>=252?6:o>=248?5:o>=240?4:o>=224?3:o>=192?2:1;function l(t,e){if(e<65534&&(t.subarray&&r||!t.subarray&&i))return String.fromCharCode.apply(null,n.shrinkBuf(t,e));for(var a="",s=0;s<e;s++)a+=String.fromCharCode(t[s]);return a}s[254]=s[254]=1,e.string2buf=function(t){var e,a,i,r,s,o=t.length,l=0;for(r=0;r<o;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<o&&56320==(64512&(i=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(i-56320),r++),l+=a<128?1:a<2048?2:a<65536?3:4;for(e=new n.Buf8(l),s=0,r=0;s<l;r++)55296==(64512&(a=t.charCodeAt(r)))&&r+1<o&&56320==(64512&(i=t.charCodeAt(r+1)))&&(a=65536+(a-55296<<10)+(i-56320),r++),a<128?e[s++]=a:a<2048?(e[s++]=192|a>>>6,e[s++]=128|63&a):a<65536?(e[s++]=224|a>>>12,e[s++]=128|a>>>6&63,e[s++]=128|63&a):(e[s++]=240|a>>>18,e[s++]=128|a>>>12&63,e[s++]=128|a>>>6&63,e[s++]=128|63&a);return e},e.buf2binstring=function(t){return l(t,t.length)},e.binstring2buf=function(t){for(var e=new n.Buf8(t.length),a=0,i=e.length;a<i;a++)e[a]=t.charCodeAt(a);return e},e.buf2string=function(t,e){var a,n,i,r,o=e||t.length,h=new Array(2*o);for(n=0,a=0;a<o;)if((i=t[a++])<128)h[n++]=i;else if((r=s[i])>4)h[n++]=65533,a+=r-1;else{for(i&=2===r?31:3===r?15:7;r>1&&a<o;)i=i<<6|63&t[a++],r--;r>1?h[n++]=65533:i<65536?h[n++]=i:(i-=65536,h[n++]=55296|i>>10&1023,h[n++]=56320|1023&i)}return l(h,n)},e.utf8border=function(t,e){var a;for((e=e||t.length)>t.length&&(e=t.length),a=e-1;a>=0&&128==(192&t[a]);)a--;return a<0?e:0===a?e:a+s[t[a]]>e?a:e}},function(t,e,a){"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},function(t,e,a){"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},function(t,e){var a;a=function(){return this}();try{a=a||new Function("return this")()}catch(t){"object"==typeof window&&(a=window)}t.exports=a},function(t,e){t.exports=function(t,e,a){return e<a?t<e?e:t>a?a:t:t<a?a:t>e?e:t}},function(t,e){t.exports=__WEBPACK_EXTERNAL_MODULE__16__},function(t){t.exports={type:"panel",name:"FlowCharting",id:"agenty-flowcharting-panel",info:{description:"Flowcharting is a plugin for grafana. It aims to display complexe diagram draws with draw.io like Visio",author:{name:"Arnaud GENTY",url:"https://github.com/algenty/grafana-flowcharting"},keywords:["flowchart","panel","diagram","workflow","floorplan","map","organigram","draw.io","visio","mxgraph"],links:[{name:"Project site",url:"https://github.com/algenty/grafana-flowcharting"},{name:"Documentation",url:"https://algenty.github.io/flowcharting-repository/"},{name:"Demonstration",url:"https://play.grafana.org/d/Unu5JcjWk/flowcharting-index?orgId=1"},{name:"Apache License",url:"https://github.com/algenty/grafana-flowcharting/blob/master/LICENSE"}],version:"0.8.1",updated:"2019-05-11",logos:{small:"img/agenty-flowcharting.svg",large:"img/agenty-flowcharting.svg"}},dependencies:{grafanaVersion:"6.x.x",plugins:[]}}},function(t,e,a){var n=a(19),r=a(28),s=a(29),o=a(38);t.exports={stringToBytes:function(t){for(var e=new Array(t.length),a=0;a<t.length;a+=1)e[a]=t.charCodeAt(a);return e},bytesToString:function(t){for(var e="",a=0;a<t.length;a+=1)e+=String.fromCharCode(t[a]);return e},encode:function(t,e,a,i){var r=t;if(e)try{r=encodeURIComponent(r)}catch(t){return void console.error(t)}if(a&&r.length>0)try{r=this.bytesToString(n.deflateRaw(r))}catch(t){return void console.error(t)}if(i)try{r=btoa(r)}catch(t){return void console.error(t)}return r},removeLinebreaks:function(t){return t.replace(/(\r\n|\n|\r)/gm,"")},isencoded:function(t){try{var e=this.parseXml(t).documentElement;if(null==e||"mxfile"!==e.nodeName)return-1===t.indexOf("mxGraphModel");if(e.getElementsByTagName("diagram").length>0)return!0}catch(t){return!0}return!1},decode:function(t,e,a,i){try{var r=this.parseXml(t).documentElement;if(null!=r&&"mxfile"===r.nodeName){var s=r.getElementsByTagName("diagram");s.length>0&&(t=this.getTextContent(s[0]))}}catch(t){}return i&&(t=atob(t)),a&&t.length>0&&(t=this.bytesToString(n.inflateRaw(t))),e&&(t=decodeURIComponent(t)),t},parseXml:function(t){if(window.DOMParser)return(new DOMParser).parseFromString(t,"text/xml");var e=this.createXmlDocument();return e.async="false",e.loadXML(t),e},createXmlDocument:function(){var t=null;return document.implementation&&document.implementation.createDocument?t=document.implementation.createDocument("","",null):window.ActiveXObject&&(t=new ActiveXObject("Microsoft.XMLDOM")),t},decodeFromUri:function(t){try{t=decodeURIComponent(t)}catch(t){return void console.error(t)}return t},getTextContent:function(t){return null!=t?t[void 0===t.textContent?"text":"textContent"]:""},normalizeXml:function(t){try{var e=t;return e=(e=e.replace(/>\s*/g,">")).replace(/\s*</g,"<"),t}catch(t){return}},sleep:function(t,e){var a;return regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return a=function(t){return new Promise((function(e){return setTimeout(e,t)}))},n.next=3,regeneratorRuntime.awrap(a(t));case 3:e&&console.log(e);case 4:case"end":return n.stop()}}))},uniqueID:function(){function t(){return Math.random().toString(16).slice(-4)}return"".concat(t()+t(),"-").concat(t(),"-").concat(t(),"-").concat(t(),"-").concat(t()).concat(t()).concat(t())},stringToJsRegex:function(t){if("/"!==t[0])return new RegExp("^".concat(t,"$"));var e=t.match(new RegExp("^/(.*?)/(g?i?m?y?)$"));return new RegExp(e[1],e[2])},matchString:function(t,e){var a=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null==t||null==e||0===t.length||0===e.length)return!1;if(t===e)return!0;if(a){var n=this.stringToJsRegex(e);return t.toString().match(n)}return!1},minify:function(t){try{return r.xmlmin(t,!1)}catch(e){return this.log(3,"Error in minify",e),t}},prettify:function(t){try{return r.xml(t)}catch(e){return this.log(3,"Error in prettify",e),t}},getRatioColor:function(t,e,a){t=Math.min(.999,t),t=Math.max(.001,t);var n=s(a,"uint8"),i=s(e,"uint8"),r=[];return r[0]=n[0]*t+(1-t)*i[0],r[1]=n[1]*t+(1-t)*i[1],r[2]=n[2]*t+(1-t)*i[2],r[3]=n[3]*t+(1-t)*i[3],"rgba(".concat(r[0],",").concat(r[1],",").concat(r[2],",").concat(r[3],")")},getStepColors:function(t,e,a){var n=s(t,"uint8"),r=s(e,"uint8"),o=a,l=0,h=[];for(i=0;i<o;i++){var u=[];l+=1/o,u[0]=n[0]*l+(1-l)*r[0],u[1]=n[1]*l+(1-l)*r[1],u[2]=n[2]*l+(1-l)*r[2],u[3]=n[3]*l+(1-l)*r[3],h.push("rgba(".concat(u[0],",").concat(u[1],",").concat(u[2],",").concat(u[3],")"))}return h},prettifyJSON:function(t){try{return r.json(t)}catch(e){return this.log(3,"Error in prettify",e),t}},addScript:function(t){var e=document.createElement("script");e.setAttribute("type","text/javascript"),e.setAttribute("src",t);var a=document.getElementsByTagName("script")[0];null!=a&&a.parentNode.insertBefore(e,a)},loadJS:function(t){try{var e=this.loadFile(t);e&&(this.evalRaw(e),console.info("LoadJS called succesfully",t))}catch(e){null!=window.console&&console.error("LoadJS failed:",t,e)}},loadFile:function(t){try{var e=mxUtils.load(t);if(null!=e&&e.getStatus()>=200&&e.getStatus()<=299)return console.info("loadFile called succesfully",t),e.getText()}catch(e){null!=window.console&&console.error("Error loadFile:",t,e)}},$loadFile:function(t){var e;return $.ajax({type:"GET",url:t,async:!1,success:function(t){e=t},error:function(e){console.log("Error when download "+t)}}),e},evalRaw:function(t){try{eval.call(window,t),console.info("eval.call succesfully")}catch(t){null!=window.console&&console.error("Error eval.call : ",t)}},evalIt:function(t){var e=t;try{e=o(t)}catch(a){e=t}return e},getfileContent:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){!function(){var e,a;regeneratorRuntime.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,regeneratorRuntime.awrap(fetch(t));case 2:return e=n.sent,n.next=5,regeneratorRuntime.awrap(e.text());case 5:a=n.sent,console.log(getfileContent,t,a);case 7:case"end":return n.stop()}}))}()}))}},function(t,e,a){"use strict";var n={};(0,a(4).assign)(n,a(20),a(23),a(13)),t.exports=n},function(t,e,a){"use strict";var n=a(21),i=a(4),r=a(11),s=a(7),o=a(12),l=Object.prototype.toString,h=0,u=-1,c=0,d=8;function f(t){if(!(this instanceof f))return new f(t);this.options=i.assign({level:u,method:d,chunkSize:16384,windowBits:15,memLevel:8,strategy:c,to:""},t||{});var e=this.options;e.raw&&e.windowBits>0?e.windowBits=-e.windowBits:e.gzip&&e.windowBits>0&&e.windowBits<16&&(e.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;var a=n.deflateInit2(this.strm,e.level,e.method,e.windowBits,e.memLevel,e.strategy);if(a!==h)throw new Error(s[a]);if(e.header&&n.deflateSetHeader(this.strm,e.header),e.dictionary){var p;if(p="string"==typeof e.dictionary?r.string2buf(e.dictionary):"[object ArrayBuffer]"===l.call(e.dictionary)?new Uint8Array(e.dictionary):e.dictionary,(a=n.deflateSetDictionary(this.strm,p))!==h)throw new Error(s[a]);this._dict_set=!0}}function p(t,e){var a=new f(e);if(a.push(t,!0),a.err)throw a.msg||s[a.err];return a.result}f.prototype.push=function(t,e){var a,s,o=this.strm,u=this.options.chunkSize;if(this.ended)return!1;s=e===~~e?e:!0===e?4:0,"string"==typeof t?o.input=r.string2buf(t):"[object ArrayBuffer]"===l.call(t)?o.input=new Uint8Array(t):o.input=t,o.next_in=0,o.avail_in=o.input.length;do{if(0===o.avail_out&&(o.output=new i.Buf8(u),o.next_out=0,o.avail_out=u),1!==(a=n.deflate(o,s))&&a!==h)return this.onEnd(a),this.ended=!0,!1;0!==o.avail_out&&(0!==o.avail_in||4!==s&&2!==s)||("string"===this.options.to?this.onData(r.buf2binstring(i.shrinkBuf(o.output,o.next_out))):this.onData(i.shrinkBuf(o.output,o.next_out)))}while((o.avail_in>0||0===o.avail_out)&&1!==a);return 4===s?(a=n.deflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===h):2!==s||(this.onEnd(h),o.avail_out=0,!0)},f.prototype.onData=function(t){this.chunks.push(t)},f.prototype.onEnd=function(t){t===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Deflate=f,e.deflate=p,e.deflateRaw=function(t,e){return(e=e||{}).raw=!0,p(t,e)},e.gzip=function(t,e){return(e=e||{}).gzip=!0,p(t,e)}},function(t,e,a){"use strict";var n,i=a(4),r=a(22),s=a(9),o=a(10),l=a(7),h=0,u=1,c=3,d=4,f=5,p=0,g=1,v=-2,m=-3,y=-5,b=-1,x=1,w=2,k=3,_=4,S=0,C=2,E=8,O=9,T=15,M=8,A=286,R=30,N=19,L=2*A+1,D=15,P=3,I=258,z=I+P+1,F=32,H=42,V=69,G=73,j=91,B=103,U=113,Y=666,X=1,Z=2,$=3,W=4,K=3;function J(t,e){return t.msg=l[e],e}function q(t){return(t<<1)-(t>4?9:0)}function Q(t){for(var e=t.length;--e>=0;)t[e]=0}function tt(t){var e=t.state,a=e.pending;a>t.avail_out&&(a=t.avail_out),0!==a&&(i.arraySet(t.output,e.pending_buf,e.pending_out,a,t.next_out),t.next_out+=a,e.pending_out+=a,t.total_out+=a,t.avail_out-=a,e.pending-=a,0===e.pending&&(e.pending_out=0))}function et(t,e){r._tr_flush_block(t,t.block_start>=0?t.block_start:-1,t.strstart-t.block_start,e),t.block_start=t.strstart,tt(t.strm)}function at(t,e){t.pending_buf[t.pending++]=e}function nt(t,e){t.pending_buf[t.pending++]=e>>>8&255,t.pending_buf[t.pending++]=255&e}function it(t,e){var a,n,i=t.max_chain_length,r=t.strstart,s=t.prev_length,o=t.nice_match,l=t.strstart>t.w_size-z?t.strstart-(t.w_size-z):0,h=t.window,u=t.w_mask,c=t.prev,d=t.strstart+I,f=h[r+s-1],p=h[r+s];t.prev_length>=t.good_match&&(i>>=2),o>t.lookahead&&(o=t.lookahead);do{if(h[(a=e)+s]===p&&h[a+s-1]===f&&h[a]===h[r]&&h[++a]===h[r+1]){r+=2,a++;do{}while(h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&h[++r]===h[++a]&&r<d);if(n=I-(d-r),r=d-I,n>s){if(t.match_start=e,s=n,n>=o)break;f=h[r+s-1],p=h[r+s]}}}while((e=c[e&u])>l&&0!=--i);return s<=t.lookahead?s:t.lookahead}function rt(t){var e,a,n,r,l,h,u,c,d,f,p=t.w_size;do{if(r=t.window_size-t.lookahead-t.strstart,t.strstart>=p+(p-z)){i.arraySet(t.window,t.window,p,p,0),t.match_start-=p,t.strstart-=p,t.block_start-=p,e=a=t.hash_size;do{n=t.head[--e],t.head[e]=n>=p?n-p:0}while(--a);e=a=p;do{n=t.prev[--e],t.prev[e]=n>=p?n-p:0}while(--a);r+=p}if(0===t.strm.avail_in)break;if(h=t.strm,u=t.window,c=t.strstart+t.lookahead,d=r,f=void 0,(f=h.avail_in)>d&&(f=d),a=0===f?0:(h.avail_in-=f,i.arraySet(u,h.input,h.next_in,f,c),1===h.state.wrap?h.adler=s(h.adler,u,f,c):2===h.state.wrap&&(h.adler=o(h.adler,u,f,c)),h.next_in+=f,h.total_in+=f,f),t.lookahead+=a,t.lookahead+t.insert>=P)for(l=t.strstart-t.insert,t.ins_h=t.window[l],t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[l+P-1])&t.hash_mask,t.prev[l&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=l,l++,t.insert--,!(t.lookahead+t.insert<P)););}while(t.lookahead<z&&0!==t.strm.avail_in)}function st(t,e){for(var a,n;;){if(t.lookahead<z){if(rt(t),t.lookahead<z&&e===h)return X;if(0===t.lookahead)break}if(a=0,t.lookahead>=P&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+P-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),0!==a&&t.strstart-a<=t.w_size-z&&(t.match_length=it(t,a)),t.match_length>=P)if(n=r._tr_tally(t,t.strstart-t.match_start,t.match_length-P),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=P){t.match_length--;do{t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+P-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart}while(0!=--t.match_length);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else n=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(n&&(et(t,!1),0===t.strm.avail_out))return X}return t.insert=t.strstart<P-1?t.strstart:P-1,e===d?(et(t,!0),0===t.strm.avail_out?$:W):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?X:Z}function ot(t,e){for(var a,n,i;;){if(t.lookahead<z){if(rt(t),t.lookahead<z&&e===h)return X;if(0===t.lookahead)break}if(a=0,t.lookahead>=P&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+P-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=P-1,0!==a&&t.prev_length<t.max_lazy_match&&t.strstart-a<=t.w_size-z&&(t.match_length=it(t,a),t.match_length<=5&&(t.strategy===x||t.match_length===P&&t.strstart-t.match_start>4096)&&(t.match_length=P-1)),t.prev_length>=P&&t.match_length<=t.prev_length){i=t.strstart+t.lookahead-P,n=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-P),t.lookahead-=t.prev_length-1,t.prev_length-=2;do{++t.strstart<=i&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+P-1])&t.hash_mask,a=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart)}while(0!=--t.prev_length);if(t.match_available=0,t.match_length=P-1,t.strstart++,n&&(et(t,!1),0===t.strm.avail_out))return X}else if(t.match_available){if((n=r._tr_tally(t,0,t.window[t.strstart-1]))&&et(t,!1),t.strstart++,t.lookahead--,0===t.strm.avail_out)return X}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(n=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<P-1?t.strstart:P-1,e===d?(et(t,!0),0===t.strm.avail_out?$:W):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?X:Z}function lt(t,e,a,n,i){this.good_length=t,this.max_lazy=e,this.nice_length=a,this.max_chain=n,this.func=i}function ht(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=E,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*L),this.dyn_dtree=new i.Buf16(2*(2*R+1)),this.bl_tree=new i.Buf16(2*(2*N+1)),Q(this.dyn_ltree),Q(this.dyn_dtree),Q(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(D+1),this.heap=new i.Buf16(2*A+1),Q(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*A+1),Q(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ut(t){var e;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=C,(e=t.state).pending=0,e.pending_out=0,e.wrap<0&&(e.wrap=-e.wrap),e.status=e.wrap?H:U,t.adler=2===e.wrap?0:1,e.last_flush=h,r._tr_init(e),p):J(t,v)}function ct(t){var e,a=ut(t);return a===p&&((e=t.state).window_size=2*e.w_size,Q(e.head),e.max_lazy_match=n[e.level].max_lazy,e.good_match=n[e.level].good_length,e.nice_match=n[e.level].nice_length,e.max_chain_length=n[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=P-1,e.match_available=0,e.ins_h=0),a}function dt(t,e,a,n,r,s){if(!t)return v;var o=1;if(e===b&&(e=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),r<1||r>O||a!==E||n<8||n>15||e<0||e>9||s<0||s>_)return J(t,v);8===n&&(n=9);var l=new ht;return t.state=l,l.strm=t,l.wrap=o,l.gzhead=null,l.w_bits=n,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=r+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+P-1)/P),l.window=new i.Buf8(2*l.w_size),l.head=new i.Buf16(l.hash_size),l.prev=new i.Buf16(l.w_size),l.lit_bufsize=1<<r+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new i.Buf8(l.pending_buf_size),l.d_buf=1*l.lit_bufsize,l.l_buf=3*l.lit_bufsize,l.level=e,l.strategy=s,l.method=a,ct(t)}n=[new lt(0,0,0,0,(function(t,e){var a=65535;for(a>t.pending_buf_size-5&&(a=t.pending_buf_size-5);;){if(t.lookahead<=1){if(rt(t),0===t.lookahead&&e===h)return X;if(0===t.lookahead)break}t.strstart+=t.lookahead,t.lookahead=0;var n=t.block_start+a;if((0===t.strstart||t.strstart>=n)&&(t.lookahead=t.strstart-n,t.strstart=n,et(t,!1),0===t.strm.avail_out))return X;if(t.strstart-t.block_start>=t.w_size-z&&(et(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===d?(et(t,!0),0===t.strm.avail_out?$:W):(t.strstart>t.block_start&&(et(t,!1),t.strm.avail_out),X)})),new lt(4,4,8,4,st),new lt(4,5,16,8,st),new lt(4,6,32,32,st),new lt(4,4,16,16,ot),new lt(8,16,32,32,ot),new lt(8,16,128,128,ot),new lt(8,32,128,256,ot),new lt(32,128,258,1024,ot),new lt(32,258,258,4096,ot)],e.deflateInit=function(t,e){return dt(t,e,E,T,M,S)},e.deflateInit2=dt,e.deflateReset=ct,e.deflateResetKeep=ut,e.deflateSetHeader=function(t,e){return t&&t.state?2!==t.state.wrap?v:(t.state.gzhead=e,p):v},e.deflate=function(t,e){var a,i,s,l;if(!t||!t.state||e>f||e<0)return t?J(t,v):v;if(i=t.state,!t.output||!t.input&&0!==t.avail_in||i.status===Y&&e!==d)return J(t,0===t.avail_out?y:v);if(i.strm=t,a=i.last_flush,i.last_flush=e,i.status===H)if(2===i.wrap)t.adler=0,at(i,31),at(i,139),at(i,8),i.gzhead?(at(i,(i.gzhead.text?1:0)+(i.gzhead.hcrc?2:0)+(i.gzhead.extra?4:0)+(i.gzhead.name?8:0)+(i.gzhead.comment?16:0)),at(i,255&i.gzhead.time),at(i,i.gzhead.time>>8&255),at(i,i.gzhead.time>>16&255),at(i,i.gzhead.time>>24&255),at(i,9===i.level?2:i.strategy>=w||i.level<2?4:0),at(i,255&i.gzhead.os),i.gzhead.extra&&i.gzhead.extra.length&&(at(i,255&i.gzhead.extra.length),at(i,i.gzhead.extra.length>>8&255)),i.gzhead.hcrc&&(t.adler=o(t.adler,i.pending_buf,i.pending,0)),i.gzindex=0,i.status=V):(at(i,0),at(i,0),at(i,0),at(i,0),at(i,0),at(i,9===i.level?2:i.strategy>=w||i.level<2?4:0),at(i,K),i.status=U);else{var m=E+(i.w_bits-8<<4)<<8;m|=(i.strategy>=w||i.level<2?0:i.level<6?1:6===i.level?2:3)<<6,0!==i.strstart&&(m|=F),m+=31-m%31,i.status=U,nt(i,m),0!==i.strstart&&(nt(i,t.adler>>>16),nt(i,65535&t.adler)),t.adler=1}if(i.status===V)if(i.gzhead.extra){for(s=i.pending;i.gzindex<(65535&i.gzhead.extra.length)&&(i.pending!==i.pending_buf_size||(i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),tt(t),s=i.pending,i.pending!==i.pending_buf_size));)at(i,255&i.gzhead.extra[i.gzindex]),i.gzindex++;i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),i.gzindex===i.gzhead.extra.length&&(i.gzindex=0,i.status=G)}else i.status=G;if(i.status===G)if(i.gzhead.name){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),tt(t),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.name.length?255&i.gzhead.name.charCodeAt(i.gzindex++):0,at(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.gzindex=0,i.status=j)}else i.status=j;if(i.status===j)if(i.gzhead.comment){s=i.pending;do{if(i.pending===i.pending_buf_size&&(i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),tt(t),s=i.pending,i.pending===i.pending_buf_size)){l=1;break}l=i.gzindex<i.gzhead.comment.length?255&i.gzhead.comment.charCodeAt(i.gzindex++):0,at(i,l)}while(0!==l);i.gzhead.hcrc&&i.pending>s&&(t.adler=o(t.adler,i.pending_buf,i.pending-s,s)),0===l&&(i.status=B)}else i.status=B;if(i.status===B&&(i.gzhead.hcrc?(i.pending+2>i.pending_buf_size&&tt(t),i.pending+2<=i.pending_buf_size&&(at(i,255&t.adler),at(i,t.adler>>8&255),t.adler=0,i.status=U)):i.status=U),0!==i.pending){if(tt(t),0===t.avail_out)return i.last_flush=-1,p}else if(0===t.avail_in&&q(e)<=q(a)&&e!==d)return J(t,y);if(i.status===Y&&0!==t.avail_in)return J(t,y);if(0!==t.avail_in||0!==i.lookahead||e!==h&&i.status!==Y){var b=i.strategy===w?function(t,e){for(var a;;){if(0===t.lookahead&&(rt(t),0===t.lookahead)){if(e===h)return X;break}if(t.match_length=0,a=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++,a&&(et(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===d?(et(t,!0),0===t.strm.avail_out?$:W):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?X:Z}(i,e):i.strategy===k?function(t,e){for(var a,n,i,s,o=t.window;;){if(t.lookahead<=I){if(rt(t),t.lookahead<=I&&e===h)return X;if(0===t.lookahead)break}if(t.match_length=0,t.lookahead>=P&&t.strstart>0&&(n=o[i=t.strstart-1])===o[++i]&&n===o[++i]&&n===o[++i]){s=t.strstart+I;do{}while(n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&n===o[++i]&&i<s);t.match_length=I-(s-i),t.match_length>t.lookahead&&(t.match_length=t.lookahead)}if(t.match_length>=P?(a=r._tr_tally(t,1,t.match_length-P),t.lookahead-=t.match_length,t.strstart+=t.match_length,t.match_length=0):(a=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++),a&&(et(t,!1),0===t.strm.avail_out))return X}return t.insert=0,e===d?(et(t,!0),0===t.strm.avail_out?$:W):t.last_lit&&(et(t,!1),0===t.strm.avail_out)?X:Z}(i,e):n[i.level].func(i,e);if(b!==$&&b!==W||(i.status=Y),b===X||b===$)return 0===t.avail_out&&(i.last_flush=-1),p;if(b===Z&&(e===u?r._tr_align(i):e!==f&&(r._tr_stored_block(i,0,0,!1),e===c&&(Q(i.head),0===i.lookahead&&(i.strstart=0,i.block_start=0,i.insert=0))),tt(t),0===t.avail_out))return i.last_flush=-1,p}return e!==d?p:i.wrap<=0?g:(2===i.wrap?(at(i,255&t.adler),at(i,t.adler>>8&255),at(i,t.adler>>16&255),at(i,t.adler>>24&255),at(i,255&t.total_in),at(i,t.total_in>>8&255),at(i,t.total_in>>16&255),at(i,t.total_in>>24&255)):(nt(i,t.adler>>>16),nt(i,65535&t.adler)),tt(t),i.wrap>0&&(i.wrap=-i.wrap),0!==i.pending?p:g)},e.deflateEnd=function(t){var e;return t&&t.state?(e=t.state.status)!==H&&e!==V&&e!==G&&e!==j&&e!==B&&e!==U&&e!==Y?J(t,v):(t.state=null,e===U?J(t,m):p):v},e.deflateSetDictionary=function(t,e){var a,n,r,o,l,h,u,c,d=e.length;if(!t||!t.state)return v;if(2===(o=(a=t.state).wrap)||1===o&&a.status!==H||a.lookahead)return v;for(1===o&&(t.adler=s(t.adler,e,d,0)),a.wrap=0,d>=a.w_size&&(0===o&&(Q(a.head),a.strstart=0,a.block_start=0,a.insert=0),c=new i.Buf8(a.w_size),i.arraySet(c,e,d-a.w_size,a.w_size,0),e=c,d=a.w_size),l=t.avail_in,h=t.next_in,u=t.input,t.avail_in=d,t.next_in=0,t.input=e,rt(a);a.lookahead>=P;){n=a.strstart,r=a.lookahead-(P-1);do{a.ins_h=(a.ins_h<<a.hash_shift^a.window[n+P-1])&a.hash_mask,a.prev[n&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=n,n++}while(--r);a.strstart=n,a.lookahead=P-1,rt(a)}return a.strstart+=a.lookahead,a.block_start=a.strstart,a.insert=a.lookahead,a.lookahead=0,a.match_length=a.prev_length=P-1,a.match_available=0,t.next_in=h,t.input=u,t.avail_in=l,a.wrap=o,p},e.deflateInfo="pako deflate (from Nodeca project)"},function(t,e,a){"use strict";var n=a(4),i=4,r=0,s=1,o=2;function l(t){for(var e=t.length;--e>=0;)t[e]=0}var h=0,u=1,c=2,d=29,f=256,p=f+1+d,g=30,v=19,m=2*p+1,y=15,b=16,x=7,w=256,k=16,_=17,S=18,C=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],E=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],O=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],T=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],M=new Array(2*(p+2));l(M);var A=new Array(2*g);l(A);var R=new Array(512);l(R);var N=new Array(256);l(N);var L=new Array(d);l(L);var D,P,I,z=new Array(g);function F(t,e,a,n,i){this.static_tree=t,this.extra_bits=e,this.extra_base=a,this.elems=n,this.max_length=i,this.has_stree=t&&t.length}function H(t,e){this.dyn_tree=t,this.max_code=0,this.stat_desc=e}function V(t){return t<256?R[t]:R[256+(t>>>7)]}function G(t,e){t.pending_buf[t.pending++]=255&e,t.pending_buf[t.pending++]=e>>>8&255}function j(t,e,a){t.bi_valid>b-a?(t.bi_buf|=e<<t.bi_valid&65535,G(t,t.bi_buf),t.bi_buf=e>>b-t.bi_valid,t.bi_valid+=a-b):(t.bi_buf|=e<<t.bi_valid&65535,t.bi_valid+=a)}function B(t,e,a){j(t,a[2*e],a[2*e+1])}function U(t,e){var a=0;do{a|=1&t,t>>>=1,a<<=1}while(--e>0);return a>>>1}function Y(t,e,a){var n,i,r=new Array(y+1),s=0;for(n=1;n<=y;n++)r[n]=s=s+a[n-1]<<1;for(i=0;i<=e;i++){var o=t[2*i+1];0!==o&&(t[2*i]=U(r[o]++,o))}}function X(t){var e;for(e=0;e<p;e++)t.dyn_ltree[2*e]=0;for(e=0;e<g;e++)t.dyn_dtree[2*e]=0;for(e=0;e<v;e++)t.bl_tree[2*e]=0;t.dyn_ltree[2*w]=1,t.opt_len=t.static_len=0,t.last_lit=t.matches=0}function Z(t){t.bi_valid>8?G(t,t.bi_buf):t.bi_valid>0&&(t.pending_buf[t.pending++]=t.bi_buf),t.bi_buf=0,t.bi_valid=0}function $(t,e,a,n){var i=2*e,r=2*a;return t[i]<t[r]||t[i]===t[r]&&n[e]<=n[a]}function W(t,e,a){for(var n=t.heap[a],i=a<<1;i<=t.heap_len&&(i<t.heap_len&&$(e,t.heap[i+1],t.heap[i],t.depth)&&i++,!$(e,n,t.heap[i],t.depth));)t.heap[a]=t.heap[i],a=i,i<<=1;t.heap[a]=n}function K(t,e,a){var n,i,r,s,o=0;if(0!==t.last_lit)do{n=t.pending_buf[t.d_buf+2*o]<<8|t.pending_buf[t.d_buf+2*o+1],i=t.pending_buf[t.l_buf+o],o++,0===n?B(t,i,e):(B(t,(r=N[i])+f+1,e),0!==(s=C[r])&&j(t,i-=L[r],s),B(t,r=V(--n),a),0!==(s=E[r])&&j(t,n-=z[r],s))}while(o<t.last_lit);B(t,w,e)}function J(t,e){var a,n,i,r=e.dyn_tree,s=e.stat_desc.static_tree,o=e.stat_desc.has_stree,l=e.stat_desc.elems,h=-1;for(t.heap_len=0,t.heap_max=m,a=0;a<l;a++)0!==r[2*a]?(t.heap[++t.heap_len]=h=a,t.depth[a]=0):r[2*a+1]=0;for(;t.heap_len<2;)r[2*(i=t.heap[++t.heap_len]=h<2?++h:0)]=1,t.depth[i]=0,t.opt_len--,o&&(t.static_len-=s[2*i+1]);for(e.max_code=h,a=t.heap_len>>1;a>=1;a--)W(t,r,a);i=l;do{a=t.heap[1],t.heap[1]=t.heap[t.heap_len--],W(t,r,1),n=t.heap[1],t.heap[--t.heap_max]=a,t.heap[--t.heap_max]=n,r[2*i]=r[2*a]+r[2*n],t.depth[i]=(t.depth[a]>=t.depth[n]?t.depth[a]:t.depth[n])+1,r[2*a+1]=r[2*n+1]=i,t.heap[1]=i++,W(t,r,1)}while(t.heap_len>=2);t.heap[--t.heap_max]=t.heap[1],function(t,e){var a,n,i,r,s,o,l=e.dyn_tree,h=e.max_code,u=e.stat_desc.static_tree,c=e.stat_desc.has_stree,d=e.stat_desc.extra_bits,f=e.stat_desc.extra_base,p=e.stat_desc.max_length,g=0;for(r=0;r<=y;r++)t.bl_count[r]=0;for(l[2*t.heap[t.heap_max]+1]=0,a=t.heap_max+1;a<m;a++)(r=l[2*l[2*(n=t.heap[a])+1]+1]+1)>p&&(r=p,g++),l[2*n+1]=r,n>h||(t.bl_count[r]++,s=0,n>=f&&(s=d[n-f]),o=l[2*n],t.opt_len+=o*(r+s),c&&(t.static_len+=o*(u[2*n+1]+s)));if(0!==g){do{for(r=p-1;0===t.bl_count[r];)r--;t.bl_count[r]--,t.bl_count[r+1]+=2,t.bl_count[p]--,g-=2}while(g>0);for(r=p;0!==r;r--)for(n=t.bl_count[r];0!==n;)(i=t.heap[--a])>h||(l[2*i+1]!==r&&(t.opt_len+=(r-l[2*i+1])*l[2*i],l[2*i+1]=r),n--)}}(t,e),Y(r,h,t.bl_count)}function q(t,e,a){var n,i,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),e[2*(a+1)+1]=65535,n=0;n<=a;n++)i=s,s=e[2*(n+1)+1],++o<l&&i===s||(o<h?t.bl_tree[2*i]+=o:0!==i?(i!==r&&t.bl_tree[2*i]++,t.bl_tree[2*k]++):o<=10?t.bl_tree[2*_]++:t.bl_tree[2*S]++,o=0,r=i,0===s?(l=138,h=3):i===s?(l=6,h=3):(l=7,h=4))}function Q(t,e,a){var n,i,r=-1,s=e[1],o=0,l=7,h=4;for(0===s&&(l=138,h=3),n=0;n<=a;n++)if(i=s,s=e[2*(n+1)+1],!(++o<l&&i===s)){if(o<h)do{B(t,i,t.bl_tree)}while(0!=--o);else 0!==i?(i!==r&&(B(t,i,t.bl_tree),o--),B(t,k,t.bl_tree),j(t,o-3,2)):o<=10?(B(t,_,t.bl_tree),j(t,o-3,3)):(B(t,S,t.bl_tree),j(t,o-11,7));o=0,r=i,0===s?(l=138,h=3):i===s?(l=6,h=3):(l=7,h=4)}}l(z);var tt=!1;function et(t,e,a,i){j(t,(h<<1)+(i?1:0),3),function(t,e,a,i){Z(t),i&&(G(t,a),G(t,~a)),n.arraySet(t.pending_buf,t.window,e,a,t.pending),t.pending+=a}(t,e,a,!0)}e._tr_init=function(t){tt||(!function(){var t,e,a,n,i,r=new Array(y+1);for(a=0,n=0;n<d-1;n++)for(L[n]=a,t=0;t<1<<C[n];t++)N[a++]=n;for(N[a-1]=n,i=0,n=0;n<16;n++)for(z[n]=i,t=0;t<1<<E[n];t++)R[i++]=n;for(i>>=7;n<g;n++)for(z[n]=i<<7,t=0;t<1<<E[n]-7;t++)R[256+i++]=n;for(e=0;e<=y;e++)r[e]=0;for(t=0;t<=143;)M[2*t+1]=8,t++,r[8]++;for(;t<=255;)M[2*t+1]=9,t++,r[9]++;for(;t<=279;)M[2*t+1]=7,t++,r[7]++;for(;t<=287;)M[2*t+1]=8,t++,r[8]++;for(Y(M,p+1,r),t=0;t<g;t++)A[2*t+1]=5,A[2*t]=U(t,5);D=new F(M,C,f+1,p,y),P=new F(A,E,0,g,y),I=new F(new Array(0),O,0,v,x)}(),tt=!0),t.l_desc=new H(t.dyn_ltree,D),t.d_desc=new H(t.dyn_dtree,P),t.bl_desc=new H(t.bl_tree,I),t.bi_buf=0,t.bi_valid=0,X(t)},e._tr_stored_block=et,e._tr_flush_block=function(t,e,a,n){var l,h,d=0;t.level>0?(t.strm.data_type===o&&(t.strm.data_type=function(t){var e,a=4093624447;for(e=0;e<=31;e++,a>>>=1)if(1&a&&0!==t.dyn_ltree[2*e])return r;if(0!==t.dyn_ltree[18]||0!==t.dyn_ltree[20]||0!==t.dyn_ltree[26])return s;for(e=32;e<f;e++)if(0!==t.dyn_ltree[2*e])return s;return r}(t)),J(t,t.l_desc),J(t,t.d_desc),d=function(t){var e;for(q(t,t.dyn_ltree,t.l_desc.max_code),q(t,t.dyn_dtree,t.d_desc.max_code),J(t,t.bl_desc),e=v-1;e>=3&&0===t.bl_tree[2*T[e]+1];e--);return t.opt_len+=3*(e+1)+5+5+4,e}(t),l=t.opt_len+3+7>>>3,(h=t.static_len+3+7>>>3)<=l&&(l=h)):l=h=a+5,a+4<=l&&-1!==e?et(t,e,a,n):t.strategy===i||h===l?(j(t,(u<<1)+(n?1:0),3),K(t,M,A)):(j(t,(c<<1)+(n?1:0),3),function(t,e,a,n){var i;for(j(t,e-257,5),j(t,a-1,5),j(t,n-4,4),i=0;i<n;i++)j(t,t.bl_tree[2*T[i]+1],3);Q(t,t.dyn_ltree,e-1),Q(t,t.dyn_dtree,a-1)}(t,t.l_desc.max_code+1,t.d_desc.max_code+1,d+1),K(t,t.dyn_ltree,t.dyn_dtree)),X(t),n&&Z(t)},e._tr_tally=function(t,e,a){return t.pending_buf[t.d_buf+2*t.last_lit]=e>>>8&255,t.pending_buf[t.d_buf+2*t.last_lit+1]=255&e,t.pending_buf[t.l_buf+t.last_lit]=255&a,t.last_lit++,0===e?t.dyn_ltree[2*a]++:(t.matches++,e--,t.dyn_ltree[2*(N[a]+f+1)]++,t.dyn_dtree[2*V(e)]++),t.last_lit===t.lit_bufsize-1},e._tr_align=function(t){j(t,u<<1,3),B(t,w,M),function(t){16===t.bi_valid?(G(t,t.bi_buf),t.bi_buf=0,t.bi_valid=0):t.bi_valid>=8&&(t.pending_buf[t.pending++]=255&t.bi_buf,t.bi_buf>>=8,t.bi_valid-=8)}(t)}},function(t,e,a){"use strict";var n=a(24),i=a(4),r=a(11),s=a(13),o=a(7),l=a(12),h=a(27),u=Object.prototype.toString;function c(t){if(!(this instanceof c))return new c(t);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},t||{});var e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,0===e.windowBits&&(e.windowBits=-15)),!(e.windowBits>=0&&e.windowBits<16)||t&&t.windowBits||(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&0==(15&e.windowBits)&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new l,this.strm.avail_out=0;var a=n.inflateInit2(this.strm,e.windowBits);if(a!==s.Z_OK)throw new Error(o[a]);if(this.header=new h,n.inflateGetHeader(this.strm,this.header),e.dictionary&&("string"==typeof e.dictionary?e.dictionary=r.string2buf(e.dictionary):"[object ArrayBuffer]"===u.call(e.dictionary)&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(a=n.inflateSetDictionary(this.strm,e.dictionary))!==s.Z_OK))throw new Error(o[a])}function d(t,e){var a=new c(e);if(a.push(t,!0),a.err)throw a.msg||o[a.err];return a.result}c.prototype.push=function(t,e){var a,o,l,h,c,d=this.strm,f=this.options.chunkSize,p=this.options.dictionary,g=!1;if(this.ended)return!1;o=e===~~e?e:!0===e?s.Z_FINISH:s.Z_NO_FLUSH,"string"==typeof t?d.input=r.binstring2buf(t):"[object ArrayBuffer]"===u.call(t)?d.input=new Uint8Array(t):d.input=t,d.next_in=0,d.avail_in=d.input.length;do{if(0===d.avail_out&&(d.output=new i.Buf8(f),d.next_out=0,d.avail_out=f),(a=n.inflate(d,s.Z_NO_FLUSH))===s.Z_NEED_DICT&&p&&(a=n.inflateSetDictionary(this.strm,p)),a===s.Z_BUF_ERROR&&!0===g&&(a=s.Z_OK,g=!1),a!==s.Z_STREAM_END&&a!==s.Z_OK)return this.onEnd(a),this.ended=!0,!1;d.next_out&&(0!==d.avail_out&&a!==s.Z_STREAM_END&&(0!==d.avail_in||o!==s.Z_FINISH&&o!==s.Z_SYNC_FLUSH)||("string"===this.options.to?(l=r.utf8border(d.output,d.next_out),h=d.next_out-l,c=r.buf2string(d.output,l),d.next_out=h,d.avail_out=f-h,h&&i.arraySet(d.output,d.output,l,h,0),this.onData(c)):this.onData(i.shrinkBuf(d.output,d.next_out)))),0===d.avail_in&&0===d.avail_out&&(g=!0)}while((d.avail_in>0||0===d.avail_out)&&a!==s.Z_STREAM_END);return a===s.Z_STREAM_END&&(o=s.Z_FINISH),o===s.Z_FINISH?(a=n.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,a===s.Z_OK):o!==s.Z_SYNC_FLUSH||(this.onEnd(s.Z_OK),d.avail_out=0,!0)},c.prototype.onData=function(t){this.chunks.push(t)},c.prototype.onEnd=function(t){t===s.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg},e.Inflate=c,e.inflate=d,e.inflateRaw=function(t,e){return(e=e||{}).raw=!0,d(t,e)},e.ungzip=d},function(t,e,a){"use strict";var n=a(4),i=a(9),r=a(10),s=a(25),o=a(26),l=0,h=1,u=2,c=4,d=5,f=6,p=0,g=1,v=2,m=-2,y=-3,b=-4,x=-5,w=8,k=1,_=2,S=3,C=4,E=5,O=6,T=7,M=8,A=9,R=10,N=11,L=12,D=13,P=14,I=15,z=16,F=17,H=18,V=19,G=20,j=21,B=22,U=23,Y=24,X=25,Z=26,$=27,W=28,K=29,J=30,q=31,Q=32,tt=852,et=592,at=15;function nt(t){return(t>>>24&255)+(t>>>8&65280)+((65280&t)<<8)+((255&t)<<24)}function it(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new n.Buf16(320),this.work=new n.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function rt(t){var e;return t&&t.state?(e=t.state,t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=1&e.wrap),e.mode=k,e.last=0,e.havedict=0,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new n.Buf32(tt),e.distcode=e.distdyn=new n.Buf32(et),e.sane=1,e.back=-1,p):m}function st(t){var e;return t&&t.state?((e=t.state).wsize=0,e.whave=0,e.wnext=0,rt(t)):m}function ot(t,e){var a,n;return t&&t.state?(n=t.state,e<0?(a=0,e=-e):(a=1+(e>>4),e<48&&(e&=15)),e&&(e<8||e>15)?m:(null!==n.window&&n.wbits!==e&&(n.window=null),n.wrap=a,n.wbits=e,st(t))):m}function lt(t,e){var a,n;return t?(n=new it,t.state=n,n.window=null,(a=ot(t,e))!==p&&(t.state=null),a):m}var ht,ut,ct=!0;function dt(t){if(ct){var e;for(ht=new n.Buf32(512),ut=new n.Buf32(32),e=0;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(o(h,t.lens,0,288,ht,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;o(u,t.lens,0,32,ut,0,t.work,{bits:5}),ct=!1}t.lencode=ht,t.lenbits=9,t.distcode=ut,t.distbits=5}function ft(t,e,a,i){var r,s=t.state;return null===s.window&&(s.wsize=1<<s.wbits,s.wnext=0,s.whave=0,s.window=new n.Buf8(s.wsize)),i>=s.wsize?(n.arraySet(s.window,e,a-s.wsize,s.wsize,0),s.wnext=0,s.whave=s.wsize):((r=s.wsize-s.wnext)>i&&(r=i),n.arraySet(s.window,e,a-i,r,s.wnext),(i-=r)?(n.arraySet(s.window,e,a-i,i,0),s.wnext=i,s.whave=s.wsize):(s.wnext+=r,s.wnext===s.wsize&&(s.wnext=0),s.whave<s.wsize&&(s.whave+=r))),0}e.inflateReset=st,e.inflateReset2=ot,e.inflateResetKeep=rt,e.inflateInit=function(t){return lt(t,at)},e.inflateInit2=lt,e.inflate=function(t,e){var a,tt,et,at,it,rt,st,ot,lt,ht,ut,ct,pt,gt,vt,mt,yt,bt,xt,wt,kt,_t,St,Ct,Et=0,Ot=new n.Buf8(4),Tt=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!t||!t.state||!t.output||!t.input&&0!==t.avail_in)return m;(a=t.state).mode===L&&(a.mode=D),it=t.next_out,et=t.output,st=t.avail_out,at=t.next_in,tt=t.input,rt=t.avail_in,ot=a.hold,lt=a.bits,ht=rt,ut=st,_t=p;t:for(;;)switch(a.mode){case k:if(0===a.wrap){a.mode=D;break}for(;lt<16;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}if(2&a.wrap&&35615===ot){a.check=0,Ot[0]=255&ot,Ot[1]=ot>>>8&255,a.check=r(a.check,Ot,2,0),ot=0,lt=0,a.mode=_;break}if(a.flags=0,a.head&&(a.head.done=!1),!(1&a.wrap)||(((255&ot)<<8)+(ot>>8))%31){t.msg="incorrect header check",a.mode=J;break}if((15&ot)!==w){t.msg="unknown compression method",a.mode=J;break}if(lt-=4,kt=8+(15&(ot>>>=4)),0===a.wbits)a.wbits=kt;else if(kt>a.wbits){t.msg="invalid window size",a.mode=J;break}a.dmax=1<<kt,t.adler=a.check=1,a.mode=512&ot?R:L,ot=0,lt=0;break;case _:for(;lt<16;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}if(a.flags=ot,(255&a.flags)!==w){t.msg="unknown compression method",a.mode=J;break}if(57344&a.flags){t.msg="unknown header flags set",a.mode=J;break}a.head&&(a.head.text=ot>>8&1),512&a.flags&&(Ot[0]=255&ot,Ot[1]=ot>>>8&255,a.check=r(a.check,Ot,2,0)),ot=0,lt=0,a.mode=S;case S:for(;lt<32;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}a.head&&(a.head.time=ot),512&a.flags&&(Ot[0]=255&ot,Ot[1]=ot>>>8&255,Ot[2]=ot>>>16&255,Ot[3]=ot>>>24&255,a.check=r(a.check,Ot,4,0)),ot=0,lt=0,a.mode=C;case C:for(;lt<16;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}a.head&&(a.head.xflags=255&ot,a.head.os=ot>>8),512&a.flags&&(Ot[0]=255&ot,Ot[1]=ot>>>8&255,a.check=r(a.check,Ot,2,0)),ot=0,lt=0,a.mode=E;case E:if(1024&a.flags){for(;lt<16;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}a.length=ot,a.head&&(a.head.extra_len=ot),512&a.flags&&(Ot[0]=255&ot,Ot[1]=ot>>>8&255,a.check=r(a.check,Ot,2,0)),ot=0,lt=0}else a.head&&(a.head.extra=null);a.mode=O;case O:if(1024&a.flags&&((ct=a.length)>rt&&(ct=rt),ct&&(a.head&&(kt=a.head.extra_len-a.length,a.head.extra||(a.head.extra=new Array(a.head.extra_len)),n.arraySet(a.head.extra,tt,at,ct,kt)),512&a.flags&&(a.check=r(a.check,tt,ct,at)),rt-=ct,at+=ct,a.length-=ct),a.length))break t;a.length=0,a.mode=T;case T:if(2048&a.flags){if(0===rt)break t;ct=0;do{kt=tt[at+ct++],a.head&&kt&&a.length<65536&&(a.head.name+=String.fromCharCode(kt))}while(kt&&ct<rt);if(512&a.flags&&(a.check=r(a.check,tt,ct,at)),rt-=ct,at+=ct,kt)break t}else a.head&&(a.head.name=null);a.length=0,a.mode=M;case M:if(4096&a.flags){if(0===rt)break t;ct=0;do{kt=tt[at+ct++],a.head&&kt&&a.length<65536&&(a.head.comment+=String.fromCharCode(kt))}while(kt&&ct<rt);if(512&a.flags&&(a.check=r(a.check,tt,ct,at)),rt-=ct,at+=ct,kt)break t}else a.head&&(a.head.comment=null);a.mode=A;case A:if(512&a.flags){for(;lt<16;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}if(ot!==(65535&a.check)){t.msg="header crc mismatch",a.mode=J;break}ot=0,lt=0}a.head&&(a.head.hcrc=a.flags>>9&1,a.head.done=!0),t.adler=a.check=0,a.mode=L;break;case R:for(;lt<32;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}t.adler=a.check=nt(ot),ot=0,lt=0,a.mode=N;case N:if(0===a.havedict)return t.next_out=it,t.avail_out=st,t.next_in=at,t.avail_in=rt,a.hold=ot,a.bits=lt,v;t.adler=a.check=1,a.mode=L;case L:if(e===d||e===f)break t;case D:if(a.last){ot>>>=7&lt,lt-=7&lt,a.mode=$;break}for(;lt<3;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}switch(a.last=1&ot,lt-=1,3&(ot>>>=1)){case 0:a.mode=P;break;case 1:if(dt(a),a.mode=G,e===f){ot>>>=2,lt-=2;break t}break;case 2:a.mode=F;break;case 3:t.msg="invalid block type",a.mode=J}ot>>>=2,lt-=2;break;case P:for(ot>>>=7&lt,lt-=7&lt;lt<32;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}if((65535&ot)!=(ot>>>16^65535)){t.msg="invalid stored block lengths",a.mode=J;break}if(a.length=65535&ot,ot=0,lt=0,a.mode=I,e===f)break t;case I:a.mode=z;case z:if(ct=a.length){if(ct>rt&&(ct=rt),ct>st&&(ct=st),0===ct)break t;n.arraySet(et,tt,at,ct,it),rt-=ct,at+=ct,st-=ct,it+=ct,a.length-=ct;break}a.mode=L;break;case F:for(;lt<14;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}if(a.nlen=257+(31&ot),ot>>>=5,lt-=5,a.ndist=1+(31&ot),ot>>>=5,lt-=5,a.ncode=4+(15&ot),ot>>>=4,lt-=4,a.nlen>286||a.ndist>30){t.msg="too many length or distance symbols",a.mode=J;break}a.have=0,a.mode=H;case H:for(;a.have<a.ncode;){for(;lt<3;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}a.lens[Tt[a.have++]]=7&ot,ot>>>=3,lt-=3}for(;a.have<19;)a.lens[Tt[a.have++]]=0;if(a.lencode=a.lendyn,a.lenbits=7,St={bits:a.lenbits},_t=o(l,a.lens,0,19,a.lencode,0,a.work,St),a.lenbits=St.bits,_t){t.msg="invalid code lengths set",a.mode=J;break}a.have=0,a.mode=V;case V:for(;a.have<a.nlen+a.ndist;){for(;mt=(Et=a.lencode[ot&(1<<a.lenbits)-1])>>>16&255,yt=65535&Et,!((vt=Et>>>24)<=lt);){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}if(yt<16)ot>>>=vt,lt-=vt,a.lens[a.have++]=yt;else{if(16===yt){for(Ct=vt+2;lt<Ct;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}if(ot>>>=vt,lt-=vt,0===a.have){t.msg="invalid bit length repeat",a.mode=J;break}kt=a.lens[a.have-1],ct=3+(3&ot),ot>>>=2,lt-=2}else if(17===yt){for(Ct=vt+3;lt<Ct;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}lt-=vt,kt=0,ct=3+(7&(ot>>>=vt)),ot>>>=3,lt-=3}else{for(Ct=vt+7;lt<Ct;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}lt-=vt,kt=0,ct=11+(127&(ot>>>=vt)),ot>>>=7,lt-=7}if(a.have+ct>a.nlen+a.ndist){t.msg="invalid bit length repeat",a.mode=J;break}for(;ct--;)a.lens[a.have++]=kt}}if(a.mode===J)break;if(0===a.lens[256]){t.msg="invalid code -- missing end-of-block",a.mode=J;break}if(a.lenbits=9,St={bits:a.lenbits},_t=o(h,a.lens,0,a.nlen,a.lencode,0,a.work,St),a.lenbits=St.bits,_t){t.msg="invalid literal/lengths set",a.mode=J;break}if(a.distbits=6,a.distcode=a.distdyn,St={bits:a.distbits},_t=o(u,a.lens,a.nlen,a.ndist,a.distcode,0,a.work,St),a.distbits=St.bits,_t){t.msg="invalid distances set",a.mode=J;break}if(a.mode=G,e===f)break t;case G:a.mode=j;case j:if(rt>=6&&st>=258){t.next_out=it,t.avail_out=st,t.next_in=at,t.avail_in=rt,a.hold=ot,a.bits=lt,s(t,ut),it=t.next_out,et=t.output,st=t.avail_out,at=t.next_in,tt=t.input,rt=t.avail_in,ot=a.hold,lt=a.bits,a.mode===L&&(a.back=-1);break}for(a.back=0;mt=(Et=a.lencode[ot&(1<<a.lenbits)-1])>>>16&255,yt=65535&Et,!((vt=Et>>>24)<=lt);){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}if(mt&&0==(240&mt)){for(bt=vt,xt=mt,wt=yt;mt=(Et=a.lencode[wt+((ot&(1<<bt+xt)-1)>>bt)])>>>16&255,yt=65535&Et,!(bt+(vt=Et>>>24)<=lt);){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}ot>>>=bt,lt-=bt,a.back+=bt}if(ot>>>=vt,lt-=vt,a.back+=vt,a.length=yt,0===mt){a.mode=Z;break}if(32&mt){a.back=-1,a.mode=L;break}if(64&mt){t.msg="invalid literal/length code",a.mode=J;break}a.extra=15&mt,a.mode=B;case B:if(a.extra){for(Ct=a.extra;lt<Ct;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}a.length+=ot&(1<<a.extra)-1,ot>>>=a.extra,lt-=a.extra,a.back+=a.extra}a.was=a.length,a.mode=U;case U:for(;mt=(Et=a.distcode[ot&(1<<a.distbits)-1])>>>16&255,yt=65535&Et,!((vt=Et>>>24)<=lt);){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}if(0==(240&mt)){for(bt=vt,xt=mt,wt=yt;mt=(Et=a.distcode[wt+((ot&(1<<bt+xt)-1)>>bt)])>>>16&255,yt=65535&Et,!(bt+(vt=Et>>>24)<=lt);){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}ot>>>=bt,lt-=bt,a.back+=bt}if(ot>>>=vt,lt-=vt,a.back+=vt,64&mt){t.msg="invalid distance code",a.mode=J;break}a.offset=yt,a.extra=15&mt,a.mode=Y;case Y:if(a.extra){for(Ct=a.extra;lt<Ct;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}a.offset+=ot&(1<<a.extra)-1,ot>>>=a.extra,lt-=a.extra,a.back+=a.extra}if(a.offset>a.dmax){t.msg="invalid distance too far back",a.mode=J;break}a.mode=X;case X:if(0===st)break t;if(ct=ut-st,a.offset>ct){if((ct=a.offset-ct)>a.whave&&a.sane){t.msg="invalid distance too far back",a.mode=J;break}ct>a.wnext?(ct-=a.wnext,pt=a.wsize-ct):pt=a.wnext-ct,ct>a.length&&(ct=a.length),gt=a.window}else gt=et,pt=it-a.offset,ct=a.length;ct>st&&(ct=st),st-=ct,a.length-=ct;do{et[it++]=gt[pt++]}while(--ct);0===a.length&&(a.mode=j);break;case Z:if(0===st)break t;et[it++]=a.length,st--,a.mode=j;break;case $:if(a.wrap){for(;lt<32;){if(0===rt)break t;rt--,ot|=tt[at++]<<lt,lt+=8}if(ut-=st,t.total_out+=ut,a.total+=ut,ut&&(t.adler=a.check=a.flags?r(a.check,et,ut,it-ut):i(a.check,et,ut,it-ut)),ut=st,(a.flags?ot:nt(ot))!==a.check){t.msg="incorrect data check",a.mode=J;break}ot=0,lt=0}a.mode=W;case W:if(a.wrap&&a.flags){for(;lt<32;){if(0===rt)break t;rt--,ot+=tt[at++]<<lt,lt+=8}if(ot!==(4294967295&a.total)){t.msg="incorrect length check",a.mode=J;break}ot=0,lt=0}a.mode=K;case K:_t=g;break t;case J:_t=y;break t;case q:return b;case Q:default:return m}return t.next_out=it,t.avail_out=st,t.next_in=at,t.avail_in=rt,a.hold=ot,a.bits=lt,(a.wsize||ut!==t.avail_out&&a.mode<J&&(a.mode<$||e!==c))&&ft(t,t.output,t.next_out,ut-t.avail_out)?(a.mode=q,b):(ht-=t.avail_in,ut-=t.avail_out,t.total_in+=ht,t.total_out+=ut,a.total+=ut,a.wrap&&ut&&(t.adler=a.check=a.flags?r(a.check,et,ut,t.next_out-ut):i(a.check,et,ut,t.next_out-ut)),t.data_type=a.bits+(a.last?64:0)+(a.mode===L?128:0)+(a.mode===G||a.mode===I?256:0),(0===ht&&0===ut||e===c)&&_t===p&&(_t=x),_t)},e.inflateEnd=function(t){if(!t||!t.state)return m;var e=t.state;return e.window&&(e.window=null),t.state=null,p},e.inflateGetHeader=function(t,e){var a;return t&&t.state?0==(2&(a=t.state).wrap)?m:(a.head=e,e.done=!1,p):m},e.inflateSetDictionary=function(t,e){var a,n=e.length;return t&&t.state?0!==(a=t.state).wrap&&a.mode!==N?m:a.mode===N&&i(1,e,n,0)!==a.check?y:ft(t,e,n,n)?(a.mode=q,b):(a.havedict=1,p):m},e.inflateInfo="pako inflate (from Nodeca project)"},function(t,e,a){"use strict";t.exports=function(t,e){var a,n,i,r,s,o,l,h,u,c,d,f,p,g,v,m,y,b,x,w,k,_,S,C,E;a=t.state,n=t.next_in,C=t.input,i=n+(t.avail_in-5),r=t.next_out,E=t.output,s=r-(e-t.avail_out),o=r+(t.avail_out-257),l=a.dmax,h=a.wsize,u=a.whave,c=a.wnext,d=a.window,f=a.hold,p=a.bits,g=a.lencode,v=a.distcode,m=(1<<a.lenbits)-1,y=(1<<a.distbits)-1;t:do{p<15&&(f+=C[n++]<<p,p+=8,f+=C[n++]<<p,p+=8),b=g[f&m];e:for(;;){if(f>>>=x=b>>>24,p-=x,0===(x=b>>>16&255))E[r++]=65535&b;else{if(!(16&x)){if(0==(64&x)){b=g[(65535&b)+(f&(1<<x)-1)];continue e}if(32&x){a.mode=12;break t}t.msg="invalid literal/length code",a.mode=30;break t}w=65535&b,(x&=15)&&(p<x&&(f+=C[n++]<<p,p+=8),w+=f&(1<<x)-1,f>>>=x,p-=x),p<15&&(f+=C[n++]<<p,p+=8,f+=C[n++]<<p,p+=8),b=v[f&y];a:for(;;){if(f>>>=x=b>>>24,p-=x,!(16&(x=b>>>16&255))){if(0==(64&x)){b=v[(65535&b)+(f&(1<<x)-1)];continue a}t.msg="invalid distance code",a.mode=30;break t}if(k=65535&b,p<(x&=15)&&(f+=C[n++]<<p,(p+=8)<x&&(f+=C[n++]<<p,p+=8)),(k+=f&(1<<x)-1)>l){t.msg="invalid distance too far back",a.mode=30;break t}if(f>>>=x,p-=x,k>(x=r-s)){if((x=k-x)>u&&a.sane){t.msg="invalid distance too far back",a.mode=30;break t}if(_=0,S=d,0===c){if(_+=h-x,x<w){w-=x;do{E[r++]=d[_++]}while(--x);_=r-k,S=E}}else if(c<x){if(_+=h+c-x,(x-=c)<w){w-=x;do{E[r++]=d[_++]}while(--x);if(_=0,c<w){w-=x=c;do{E[r++]=d[_++]}while(--x);_=r-k,S=E}}}else if(_+=c-x,x<w){w-=x;do{E[r++]=d[_++]}while(--x);_=r-k,S=E}for(;w>2;)E[r++]=S[_++],E[r++]=S[_++],E[r++]=S[_++],w-=3;w&&(E[r++]=S[_++],w>1&&(E[r++]=S[_++]))}else{_=r-k;do{E[r++]=E[_++],E[r++]=E[_++],E[r++]=E[_++],w-=3}while(w>2);w&&(E[r++]=E[_++],w>1&&(E[r++]=E[_++]))}break}}break}}while(n<i&&r<o);n-=w=p>>3,f&=(1<<(p-=w<<3))-1,t.next_in=n,t.next_out=r,t.avail_in=n<i?i-n+5:5-(n-i),t.avail_out=r<o?o-r+257:257-(r-o),a.hold=f,a.bits=p}},function(t,e,a){"use strict";var n=a(4),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],o=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(t,e,a,l,h,u,c,d){var f,p,g,v,m,y,b,x,w,k=d.bits,_=0,S=0,C=0,E=0,O=0,T=0,M=0,A=0,R=0,N=0,L=null,D=0,P=new n.Buf16(16),I=new n.Buf16(16),z=null,F=0;for(_=0;_<=15;_++)P[_]=0;for(S=0;S<l;S++)P[e[a+S]]++;for(O=k,E=15;E>=1&&0===P[E];E--);if(O>E&&(O=E),0===E)return h[u++]=20971520,h[u++]=20971520,d.bits=1,0;for(C=1;C<E&&0===P[C];C++);for(O<C&&(O=C),A=1,_=1;_<=15;_++)if(A<<=1,(A-=P[_])<0)return-1;if(A>0&&(0===t||1!==E))return-1;for(I[1]=0,_=1;_<15;_++)I[_+1]=I[_]+P[_];for(S=0;S<l;S++)0!==e[a+S]&&(c[I[e[a+S]]++]=S);if(0===t?(L=z=c,y=19):1===t?(L=i,D-=257,z=r,F-=257,y=256):(L=s,z=o,y=-1),N=0,S=0,_=C,m=u,T=O,M=0,g=-1,v=(R=1<<O)-1,1===t&&R>852||2===t&&R>592)return 1;for(;;){b=_-M,c[S]<y?(x=0,w=c[S]):c[S]>y?(x=z[F+c[S]],w=L[D+c[S]]):(x=96,w=0),f=1<<_-M,C=p=1<<T;do{h[m+(N>>M)+(p-=f)]=b<<24|x<<16|w|0}while(0!==p);for(f=1<<_-1;N&f;)f>>=1;if(0!==f?(N&=f-1,N+=f):N=0,S++,0==--P[_]){if(_===E)break;_=e[a+c[S]]}if(_>O&&(N&v)!==g){for(0===M&&(M=O),m+=C,A=1<<(T=_-M);T+M<E&&!((A-=P[T+M])<=0);)T++,A<<=1;if(R+=1<<T,1===t&&R>852||2===t&&R>592)return 1;h[g=N&v]=O<<24|T<<16|m-u|0}}return 0!==N&&(h[m+N]=_-M<<24|64<<16|0),d.bits=O,0}},function(t,e,a){"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},function(t,e){
/**
* vkBeautify - javascript plugin to pretty-print or minify text in XML, JSON, CSS and SQL formats.
*
* Copyright (c) 2012 Vadim Kiryukhin
* vkiryukhin @ gmail.com
* http://www.eslinstructor.net/vkbeautify/
*
* Dual licensed under the MIT and GPL licenses:
*   http://www.opensource.org/licenses/mit-license.php
*   http://www.gnu.org/licenses/gpl.html
*
*   Pretty print
*
*        vkbeautify.xml(text [,indent_pattern]);
*        vkbeautify.json(text [,indent_pattern]);
*        vkbeautify.css(text [,indent_pattern]);
*        vkbeautify.sql(text [,indent_pattern]);
*
*        @text - String; text to beatufy;
*        @indent_pattern - Integer | String;
*                Integer:  number of white spaces;
*                String:   character string to visualize indentation ( can also be a set of white spaces )
*   Minify
*
*        vkbeautify.xmlmin(text [,preserve_comments]);
*        vkbeautify.jsonmin(text);
*        vkbeautify.cssmin(text [,preserve_comments]);
*        vkbeautify.sqlmin(text);
*
*        @text - String; text to minify;
*        @preserve_comments - Bool; [optional];
*                Set this flag to true to prevent removing comments from @text ( minxml and mincss functions only. )
*
*   Examples:
*        vkbeautify.xml(text); // pretty print XML
*        vkbeautify.json(text, 4 ); // pretty print JSON
*        vkbeautify.css(text, '. . . .'); // pretty print CSS
*        vkbeautify.sql(text, '----'); // pretty print SQL
*
*        vkbeautify.xmlmin(text, true);// minify XML, preserve comments
*        vkbeautify.jsonmin(text);// minify JSON
*        vkbeautify.cssmin(text);// minify CSS, remove comments ( default )
*        vkbeautify.sqlmin(text);// minify SQL
*
*/
function a(t){var e="    ";if(isNaN(parseInt(t)))e=t;else switch(t){case 1:e=" ";break;case 2:e="  ";break;case 3:e="   ";break;case 4:e="    ";break;case 5:e="     ";break;case 6:e="      ";break;case 7:e="       ";break;case 8:e="        ";break;case 9:e="         ";break;case 10:e="          ";break;case 11:e="           ";break;case 12:e="            "}for(var a=["\n"],n=0;n<100;n++)a.push(a[n]+e);return a}function n(){this.step="    ",this.shift=a(this.step)}function i(t,e){return e-(t.replace(/\(/g,"").length-t.replace(/\)/g,"").length)}function r(t,e){return t.replace(/\s{1,}/g," ").replace(/ AND /gi,"~::~"+e+e+"AND ").replace(/ BETWEEN /gi,"~::~"+e+"BETWEEN ").replace(/ CASE /gi,"~::~"+e+"CASE ").replace(/ ELSE /gi,"~::~"+e+"ELSE ").replace(/ END /gi,"~::~"+e+"END ").replace(/ FROM /gi,"~::~FROM ").replace(/ GROUP\s{1,}BY/gi,"~::~GROUP BY ").replace(/ HAVING /gi,"~::~HAVING ").replace(/ IN /gi," IN ").replace(/ JOIN /gi,"~::~JOIN ").replace(/ CROSS~::~{1,}JOIN /gi,"~::~CROSS JOIN ").replace(/ INNER~::~{1,}JOIN /gi,"~::~INNER JOIN ").replace(/ LEFT~::~{1,}JOIN /gi,"~::~LEFT JOIN ").replace(/ RIGHT~::~{1,}JOIN /gi,"~::~RIGHT JOIN ").replace(/ ON /gi,"~::~"+e+"ON ").replace(/ OR /gi,"~::~"+e+e+"OR ").replace(/ ORDER\s{1,}BY/gi,"~::~ORDER BY ").replace(/ OVER /gi,"~::~"+e+"OVER ").replace(/\(\s{0,}SELECT /gi,"~::~(SELECT ").replace(/\)\s{0,}SELECT /gi,")~::~SELECT ").replace(/ THEN /gi," THEN~::~"+e).replace(/ UNION /gi,"~::~UNION~::~").replace(/ USING /gi,"~::~USING ").replace(/ WHEN /gi,"~::~"+e+"WHEN ").replace(/ WHERE /gi,"~::~WHERE ").replace(/ WITH /gi,"~::~WITH ").replace(/ ALL /gi," ALL ").replace(/ AS /gi," AS ").replace(/ ASC /gi," ASC ").replace(/ DESC /gi," DESC ").replace(/ DISTINCT /gi," DISTINCT ").replace(/ EXISTS /gi," EXISTS ").replace(/ NOT /gi," NOT ").replace(/ NULL /gi," NULL ").replace(/ LIKE /gi," LIKE ").replace(/\s{0,}SELECT /gi,"SELECT ").replace(/\s{0,}UPDATE /gi,"UPDATE ").replace(/ SET /gi," SET ").replace(/~::~{1,}/g,"~::~").split("~::~")}n.prototype.xml=function(t,e){var n=t.replace(/>\s{0,}</g,"><").replace(/</g,"~::~<").replace(/\s*xmlns\:/g,"~::~xmlns:").replace(/\s*xmlns\=/g,"~::~xmlns=").split("~::~"),i=n.length,r=!1,s=0,o="",l=0,h=e?a(e):this.shift;for(l=0;l<i;l++)n[l].search(/<!/)>-1?(o+=h[s]+n[l],r=!0,(n[l].search(/-->/)>-1||n[l].search(/\]>/)>-1||n[l].search(/!DOCTYPE/)>-1)&&(r=!1)):n[l].search(/-->/)>-1||n[l].search(/\]>/)>-1?(o+=n[l],r=!1):/^<\w/.exec(n[l-1])&&/^<\/\w/.exec(n[l])&&/^<[\w:\-\.\,]+/.exec(n[l-1])==/^<\/[\w:\-\.\,]+/.exec(n[l])[0].replace("/","")?(o+=n[l],r||s--):n[l].search(/<\w/)>-1&&-1==n[l].search(/<\//)&&-1==n[l].search(/\/>/)?o=o+=r?n[l]:h[s++]+n[l]:n[l].search(/<\w/)>-1&&n[l].search(/<\//)>-1?o=o+=r?n[l]:h[s]+n[l]:n[l].search(/<\//)>-1?o=o+=r?n[l]:h[--s]+n[l]:n[l].search(/\/>/)>-1?o=o+=r?n[l]:h[s]+n[l]:n[l].search(/<\?/)>-1?o+=h[s]+n[l]:n[l].search(/xmlns\:/)>-1||n[l].search(/xmlns\=/)>-1?o+=h[s]+n[l]:o+=n[l];return"\n"==o[0]?o.slice(1):o},n.prototype.json=function(t,e){e=e||this.step;return"undefined"==typeof JSON?t:"string"==typeof t?JSON.stringify(JSON.parse(t),null,e):"object"==typeof t?JSON.stringify(t,null,e):t},n.prototype.css=function(t,e){var n=t.replace(/\s{1,}/g," ").replace(/\{/g,"{~::~").replace(/\}/g,"~::~}~::~").replace(/\;/g,";~::~").replace(/\/\*/g,"~::~/*").replace(/\*\//g,"*/~::~").replace(/~::~\s{0,}~::~/g,"~::~").split("~::~"),i=n.length,r=0,s="",o=0,l=e?a(e):this.shift;for(o=0;o<i;o++)/\{/.exec(n[o])?s+=l[r++]+n[o]:/\}/.exec(n[o])?s+=l[--r]+n[o]:(/\*\\/.exec(n[o]),s+=l[r]+n[o]);return s.replace(/^\n{1,}/,"")},n.prototype.sql=function(t,e){var n=t.replace(/\s{1,}/g," ").replace(/\'/gi,"~::~'").split("~::~"),s=n.length,o=[],l=0,h=this.step,u=0,c="",d=0,f=e?a(e):this.shift;for(d=0;d<s;d++)o=d%2?o.concat(n[d]):o.concat(r(n[d],h));for(s=o.length,d=0;d<s;d++){u=i(o[d],u),/\s{0,}\s{0,}SELECT\s{0,}/.exec(o[d])&&(o[d]=o[d].replace(/\,/g,",\n"+h+h)),/\s{0,}\s{0,}SET\s{0,}/.exec(o[d])&&(o[d]=o[d].replace(/\,/g,",\n"+h+h)),/\s{0,}\(\s{0,}SELECT\s{0,}/.exec(o[d])?c+=f[++l]+o[d]:/\'/.exec(o[d])?(u<1&&l&&l--,c+=o[d]):(c+=f[l]+o[d],u<1&&l&&l--)}return c=c.replace(/^\n{1,}/,"").replace(/\n{1,}/g,"\n")},n.prototype.xmlmin=function(t,e){return(e?t:t.replace(/\<![ \r\n\t]*(--([^\-]|[\r\n]|-[^\-])*--[ \r\n\t]*)\>/g,"").replace(/[ \r\n\t]{1,}xmlns/g," xmlns")).replace(/>\s{0,}</g,"><")},n.prototype.jsonmin=function(t){return"undefined"==typeof JSON?t:JSON.stringify(JSON.parse(t),null,0)},n.prototype.cssmin=function(t,e){return(e?t:t.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*+\//g,"")).replace(/\s{1,}/g," ").replace(/\{\s{1,}/g,"{").replace(/\}\s{1,}/g,"}").replace(/\;\s{1,}/g,";").replace(/\/\*\s{1,}/g,"/*").replace(/\*\/\s{1,}/g,"*/")},n.prototype.sqlmin=function(t){return t.replace(/\s{1,}/g," ").replace(/\s{1,}\(/,"(").replace(/\s{1,}\)/,")")},t.exports=new n},function(t,e,a){"use strict";var n=a(30),i=a(15),r=a(37);t.exports=function(t,e){"float"!==e&&e||(e="array"),"uint"===e&&(e="uint8"),"uint_clamped"===e&&(e="uint8_clamped");var a=new(r(e))(4),s="uint8"!==e&&"uint8_clamped"!==e;return t.length&&"string"!=typeof t||((t=n(t))[0]/=255,t[1]/=255,t[2]/=255),function(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||!!(Array.isArray(t)&&(t[0]>1||0===t[0])&&(t[1]>1||0===t[1])&&(t[2]>1||0===t[2])&&(!t[3]||t[3]>1))}(t)?(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=null!=t[3]?t[3]:255,s&&(a[0]/=255,a[1]/=255,a[2]/=255,a[3]/=255),a):(s?(a[0]=t[0],a[1]=t[1],a[2]=t[2],a[3]=null!=t[3]?t[3]:1):(a[0]=i(Math.floor(255*t[0]),0,255),a[1]=i(Math.floor(255*t[1]),0,255),a[2]=i(Math.floor(255*t[2]),0,255),a[3]=null==t[3]?255:i(Math.floor(255*t[3]),0,255)),a)}},function(t,e,a){"use strict";var n=a(31),i=a(35),r=a(15);t.exports=function(t){var e,a=n(t);return a.space?((e=Array(3))[0]=r(a.values[0],0,255),e[1]=r(a.values[1],0,255),e[2]=r(a.values[2],0,255),"h"===a.space[0]&&(e=i.rgb(e)),e.push(r(a.alpha,0,1)),e):[]}},function(t,e,a){"use strict";(function(e){var n=a(32),i=a(33),r=a(34);t.exports=function(t){var a,o,l=[],h=1;if("string"==typeof t)if(n[t])l=n[t].slice(),o="rgb";else if("transparent"===t)h=0,o="rgb",l=[0,0,0];else if(/^#[A-Fa-f0-9]+$/.test(t)){var u=(f=t.slice(1)).length;h=1,u<=4?(l=[parseInt(f[0]+f[0],16),parseInt(f[1]+f[1],16),parseInt(f[2]+f[2],16)],4===u&&(h=parseInt(f[3]+f[3],16)/255)):(l=[parseInt(f[0]+f[1],16),parseInt(f[2]+f[3],16),parseInt(f[4]+f[5],16)],8===u&&(h=parseInt(f[6]+f[7],16)/255)),l[0]||(l[0]=0),l[1]||(l[1]=0),l[2]||(l[2]=0),o="rgb"}else if(a=/^((?:rgb|hs[lvb]|hwb|cmyk?|xy[zy]|gray|lab|lchu?v?|[ly]uv|lms)a?)\s*\(([^\)]*)\)/.exec(t)){var c=a[1],d="rgb"===c,f=c.replace(/a$/,"");o=f;u="cmyk"===f?4:"gray"===f?1:3;l=a[2].trim().split(/\s*,\s*/).map((function(t,e){if(/%$/.test(t))return e===u?parseFloat(t)/100:"rgb"===f?255*parseFloat(t)/100:parseFloat(t);if("h"===f[e]){if(/deg$/.test(t))return parseFloat(t);if(void 0!==s[t])return s[t]}return parseFloat(t)})),c===f&&l.push(1),h=d?1:void 0===l[u]?1:l[u],l=l.slice(0,u)}else t.length>10&&/[0-9](?:\s|\/)/.test(t)&&(l=t.match(/([0-9]+)/g).map((function(t){return parseFloat(t)})),o=t.match(/([a-z])/gi).join("").toLowerCase());else if(isNaN(t))if(i(t)){var p=r(t.r,t.red,t.R,null);null!==p?(o="rgb",l=[p,r(t.g,t.green,t.G),r(t.b,t.blue,t.B)]):(o="hsl",l=[r(t.h,t.hue,t.H),r(t.s,t.saturation,t.S),r(t.l,t.lightness,t.L,t.b,t.brightness)]),h=r(t.a,t.alpha,t.opacity,1),null!=t.opacity&&(h/=100)}else(Array.isArray(t)||e.ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(t))&&(l=[t[0],t[1],t[2]],o="rgb",h=4===t.length?t[3]:1);else o="rgb",l=[t>>>16,(65280&t)>>>8,255&t];return{space:o,values:l,alpha:h}};var s={red:0,orange:60,yellow:120,green:180,blue:240,purple:300}}).call(this,a(14))},function(t,e,a){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},function(t,e,a){"use strict";var n=Object.prototype.toString;t.exports=function(t){var e;return"[object Object]"===n.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))}},function(t,e){t.exports=function(){for(var t=0;t<arguments.length;t++)if(void 0!==arguments[t])return arguments[t]}},function(t,e,a){"use strict";var n=a(36);t.exports={name:"hsl",min:[0,0,0],max:[360,100,100],channel:["hue","saturation","lightness"],alias:["HSL"],rgb:function(t){var e,a,n,i,r,s=t[0]/360,o=t[1]/100,l=t[2]/100;if(0===o)return[r=255*l,r,r];e=2*l-(a=l<.5?l*(1+o):l+o-l*o),i=[0,0,0];for(var h=0;h<3;h++)(n=s+1/3*-(h-1))<0?n++:n>1&&n--,r=6*n<1?e+6*(a-e)*n:2*n<1?a:3*n<2?e+(a-e)*(2/3-n)*6:e,i[h]=255*r;return i}},n.hsl=function(t){var e,a,n=t[0]/255,i=t[1]/255,r=t[2]/255,s=Math.min(n,i,r),o=Math.max(n,i,r),l=o-s;return o===s?e=0:n===o?e=(i-r)/l:i===o?e=2+(r-n)/l:r===o&&(e=4+(n-i)/l),(e=Math.min(60*e,360))<0&&(e+=360),a=(s+o)/2,[e,100*(o===s?0:a<=.5?l/(o+s):l/(2-o-s)),100*a]}},function(t,e,a){"use strict";t.exports={name:"rgb",min:[0,0,0],max:[255,255,255],channel:["red","green","blue"],alias:["RGB"]}},function(t,e){t.exports=function(t){switch(t){case"int8":return Int8Array;case"int16":return Int16Array;case"int32":return Int32Array;case"uint8":return Uint8Array;case"uint16":return Uint16Array;case"uint32":return Uint32Array;case"float32":return Float32Array;case"float64":return Float64Array;case"array":return Array;case"uint8_clamped":return Uint8ClampedArray}}},function(t,e,a){var n=a(39);t.exports=function(t,e,a){var i={},r="SAFE_EVAL_"+Math.floor(1e6*Math.random());i[r]={};return t="\n    (function(){\n      Function = undefined;\n      const keys = Object.getOwnPropertyNames(this).concat(['constructor']);\n      keys.forEach((key) => {\n        const item = this[key];\n        if(!item || typeof item.constructor !== 'function') return;\n        this[key].constructor = undefined;\n      });\n    })();\n  "+r+"="+t,e&&Object.keys(e).forEach((function(t){i[t]=e[t]})),n.runInNewContext(t,i,a),i[r]}},function(module,exports){var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var a=0;a<t.length;a++)if(t[a]===e)return a;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var a in t)e.push(a);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var a=0;a<t.length;a++)e(t[a],a,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,a){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:a})}}catch(t){return function(t,e,a){t[e]=a}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var a=e.contentWindow,n=a.eval,i=a.execScript;!n&&i&&(i.call(a,"null"),n=a.eval),forEach(Object_keys(t),(function(e){a[e]=t[e]})),forEach(globals,(function(e){t[e]&&(a[e]=t[e])}));var r=Object_keys(a),s=n.call(a,this.code);return forEach(Object_keys(a),(function(e){(e in t||-1===indexOf(r,e))&&(t[e]=a[e])})),forEach(globals,(function(e){e in t||defineProp(t,e,a[e])})),document.body.removeChild(e),s},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),a=this.runInContext(e);return t&&forEach(Object_keys(e),(function(a){t[a]=e[a]})),a},forEach(Object_keys(Script.prototype),(function(t){exports[t]=Script[t]=function(e){var a=Script(e);return a[t].apply(a,[].slice.call(arguments,1))}})),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),(function(a){e[a]=t[a]})),e}},function(t,e,a){"use strict";a.r(e);var n=a(5),i=a(1),r=a(8),s=a.n(r),o=a(16),l=a.n(o),h=a(3),u={formatValue:function(t,e,a){return s.a.valueFormats[e](t,a,null).toString()},getUnitFormats:function(){return s.a.getUnitFormats()},loadCss:function(){Object(n.loadPluginCss)({dark:"plugins/agenty-flowcharting-panel/static/css/flowchart.dark.css",light:"plugins/agenty-flowcharting-panel/static/css/flowchart.light.css"})},getTimeSeries:function(t){return new l.a({datapoints:t.datapoints||[],alias:t.target,unit:t.unit})},getFormatedDate:function(t,e){return Object(h.dateTime)(t).format(e)}},c=a(2),d=a.n(c),f=a(0);function p(t){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function g(t,e){return!e||"object"!==p(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t,e,a){return(v="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=m(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(a):i.value}})(t,e,a||t)}function m(t){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function y(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function w(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function k(t,e,a){return e&&w(t.prototype,e),a&&w(t,a),t}var _=function(){function t(e,a){x(this,t),this.shapeMaps=[],this.textMaps=[],this.linkMaps=[],this.eventMaps=[],this.valueMaps=[],this.rangeMaps=[],this.removeClick=2,this.highestLevel=-1,this.highestColor="",this.highestFormattedValue="",this.highestValue=void 0,this.execTimes=0,this.data=a,this.data.pattern=e,this.id=f.a.utils.uniqueID(),this.states=new Map}return k(t,[{key:"getData",value:function(){return this.data}},{key:"import",value:function(t){var e=this,a=f.a.trace.before(this.constructor.name+".import()");t.unit&&(this.data.unit=t.unit),t.type&&(this.data.type=t.type),t.metricType&&(this.data.metricType=t.metricType),t.alias&&(this.data.alias=t.alias),t.refId&&(this.data.refId=t.refId),t.column&&(this.data.column=t.column),t.aggregation&&(this.data.aggregation=t.aggregation),(t.decimals||0===t.decimals)&&(this.data.decimals=t.decimals),t.colors&&(this.data.colors=t.colors.slice(0)),this.data.reduce&&(this.data.reduce=!0);var n=void 0;t.colorOn&&(n=t.colorOn);var i=void 0;t.style&&(i=t.style);var r=!1,s=void 0,o=void 0;t.link&&(r=t.link),t.linkUrl&&(s=t.linkUrl),t.linkParams&&(o=t.linkParams);var l=void 0;t.linkOn&&(l=t.linkOn);var h=void 0;t.textOn&&(h=t.textOn);var u=void 0,c=void 0;t.textReplace&&(u=t.textReplace),t.textPattern&&(c=t.textPattern),t.pattern&&(this.data.pattern=t.pattern),t.dateFormat&&(this.data.dateFormat=t.dateFormat),t.thresholds&&(this.data.thresholds=t.thresholds.map((function(t){var e=t;return"string"==typeof e&&(e=parseFloat(e)),e}))),t.stringThresholds&&(this.data.stringThresholds=t.stringThresholds.slice(0)),t.stringWarning&&(this.data.stringThresholds[1]=t.stringWarning),t.stringCritical&&(this.data.stringThresholds[0]=t.stringCritical),(t.invert||!1===t.invert)&&(this.data.invert=t.invert),(t.gradient||!1===t.gradient)&&(this.data.gradient=t.gradient),(t.overlayIcon||!1===t.overlayIcon)&&(this.data.overlayIcon=t.overlayIcon),(t.tooltip||!1===t.tooltip)&&(this.data.tooltip=t.tooltip),t.tooltipLabel&&(this.data.tooltipLabel=t.tooltipLabel),(t.tooltipColors||!1===t.tooltipColors)&&(this.data.tooltipColors=t.tooltipColors),t.tooltipOn&&(this.data.tooltipOn=t.tooltipOn),t.tpDirection&&(this.data.tpDirection=t.tpDirection),(t.tpGraph||!1===this.data.tpGraph)&&(this.data.tpGraph=t.tpGraph),t.tpGraphSize&&(this.data.tpGraphSize=t.tpGraphSize),t.tpGraphType&&(this.data.tpGraphType=t.tpGraphType),(t.tpGraphLow||0===t.tpGraphLow)&&(this.data.tpGraphLow=t.tpGraphLow),(t.tpGraphHigh||0===t.tpGraphHigh)&&(this.data.tpGraphHigh=t.tpGraphHigh),t.tpGraphScale&&(this.data.tpGraphScale=t.tpGraphScale);var d=[];return t.shapeProp&&(this.data.shapeProp=t.shapeProp),(t.shapeRegEx||!1===t.shapeRegEx)&&(this.data.shapeRegEx=t.shapeRegEx),this.data.shapeData=[],d=[],null!=(d=void 0!==t.shapeMaps&&null!==t.shapeMaps&&t.shapeMaps.length>0?t.shapeMaps:t.shapeData)&&d.length>0&&d.forEach((function(t){i&&(t.style=i),n&&(t.colorOn=n),e.addShapeMap("").import(t)})),this.data.textProp=t.textProp||"id",(t.textRegEx||!1===t.textRegEx)&&(this.data.textRegEx=t.textRegEx),this.data.textData=[],d=[],void 0!==(d=void 0!==t.shapeMaps&&null!==t.shapeMaps&&t.shapeMaps.length>0?t.textMaps:t.textData)&&null!=d&&d.length>0&&d.forEach((function(t){u&&(t.textReplace=u),c&&(t.textPattern=c),h&&(t.textOn=h),e.addTextMap("").import(t)})),this.data.linkProp=t.linkProp||"id",(t.linkRegEx||!1===t.linkRegEx)&&(this.data.linkRegEx=t.linkRegEx),this.data.linkData=[],void 0!==t.linkData&&null!=t.linkData&&t.linkData.length>0&&t.linkData.forEach((function(t){s&&r&&(t.linkUrl=s),o&&r&&(t.linkParams=o),l&&(t.linkOn=l),e.addLinkMap("").import(t)})),this.data.eventProp=t.eventProp||"id",(t.eventRegEx||!1===t.eventRegEx)&&(this.data.eventRegEx=t.eventRegEx),this.data.eventData=[],void 0!==t.eventData&&null!=t.eventData&&t.eventData.length>0&&t.eventData.forEach((function(t){e.addEventMap("").import(t)})),this.data.mappingType=t.mappingType||1,this.data.valueData=[],void 0!==t.valueData&&null!=t.valueData&&t.valueData.length>0&&t.valueData.forEach((function(t){e.addValueMap("value","text").import(t)})),this.data.rangeData=[],void 0!==t.rangeData&&null!=t.rangeData&&t.rangeData.length>0&&t.rangeData.forEach((function(t){e.addRangeMap("from","to","text").import(t)})),this.data.sanitize=t.sanitize||!1,a.after(),this}},{key:"getId",value:function(){return this.id}},{key:"highlightCells",value:function(){this.states&&this.states.forEach((function(t){t.highlightCell()}))}},{key:"unhighlightCells",value:function(){this.states&&this.states.forEach((function(t){t.unhighlightCell()}))}},{key:"setOrder",value:function(t){this.data.order=t}},{key:"getOrder",value:function(){return this.data.order}},{key:"isHidden",value:function(){return this.data.hidden}},{key:"hide",value:function(){return this.data.hidden=!0,this}},{key:"show",value:function(){return this.data.hidden=!1,this}},{key:"invertColorOrder",value:function(){return this.data.colors.reverse(),this}},{key:"invertThesholds",value:function(){return this.invertColorOrder(),this.data.invert=!this.data.invert,this}},{key:"addColor",value:function(t){var e,a,n=this.data.thresholds,i=this.data.colors,r=i[t];if(t!==i.length-1){var s=i[t+1];if(e=f.a.utils.getRatioColor(.5,r,s),"number"===this.data.type)a=(n[t]-n[t-1])/2+n[t-1];else a=this.data.stringThresholds[t-1]}else e=r;return this.data.colors.splice(t+1,0,e),"number"===this.data.type?this.data.thresholds.splice(t,0,a):"string"===this.data.type&&this.data.stringThresholds.splice(t,0,a),this}},{key:"removeColor",value:function(t){return this.data.thresholds.splice(t-1,1),this.data.stringThresholds.splice(t-1,1),this.data.colors.splice(t,1),this}},{key:"getColor",value:function(t){return this.data.colors[t]}},{key:"getColors",value:function(){return this.data.colors}},{key:"getColorsCount",value:function(){return this.data.colors.length}},{key:"toIconize",value:function(t){return!1!==this.data.overlayIcon&&(!0===this.data.overlayIcon&&t>=1)}},{key:"toTooltipize",value:function(t){return!1!==this.data.tooltip&&("a"===this.data.tooltipOn||"wc"===this.data.tooltipOn&&t>=1)}},{key:"matchMetric",value:function(t){return"serie"===this.data.metricType&&"serie"===t.type?f.a.utils.matchString(t.getName(),this.data.pattern):"table"===this.data.metricType&&"table"===t.type&&t.getName()===this.data.refId}},{key:"addShapeMap",value:function(t){var e=C.getDefaultData(),a=new C(t,e);return this.shapeMaps.push(a),this.data.shapeData.push(e),a}},{key:"removeShapeMap",value:function(t){return this.data.shapeData.splice(t,1),this.shapeMaps.splice(t,1),this}},{key:"getShapeMap",value:function(t){return this.shapeMaps[t]}},{key:"getShapeMaps",value:function(){return this.shapeMaps}},{key:"matchShape",value:function(t){var e=this,a=!1;return this.shapeMaps.forEach((function(n){n.match(t,e.data.shapeRegEx)&&(a=!0)})),a}},{key:"addTextMap",value:function(t){var e=E.getDefaultData(),a=new E(t,e);return this.textMaps.push(a),this.data.textData.push(e),a}},{key:"removeTextMap",value:function(t){this.data.textData.splice(t,1),this.textMaps.splice(t,1)}},{key:"getTextMap",value:function(t){return this.textMaps[t]}},{key:"getTextMaps",value:function(){return this.textMaps}},{key:"matchText",value:function(t){var e=!1;return this.textMaps.forEach((function(a){a.match(t)&&(e=!0)})),e}},{key:"addEventMap",value:function(t){var e=T.getDefaultData(),a=new T(t,e);return this.eventMaps.push(a),this.data.eventData.push(e),a}},{key:"removeEventMap",value:function(t){this.data.eventData.splice(t,1),this.eventMaps.splice(t,1)}},{key:"getEventMap",value:function(t){return this.eventMaps[t]}},{key:"getEventMaps",value:function(){return this.eventMaps}},{key:"matchEvent",value:function(t){var e=!1;return this.eventMaps.forEach((function(a){a.match(t)&&(e=!0)})),e}},{key:"addLinkMap",value:function(t){f.a.log.info("Rule.addLinkMap()");var e=O.getDefaultData(),a=new O(t,e);return a.import(e),this.linkMaps.push(a),this.data.linkData.push(e),a}},{key:"removeLinkMap",value:function(t){this.data.linkData.splice(t,1),this.linkMaps.splice(t,1)}},{key:"getLinkMap",value:function(t){return this.linkMaps[t]}},{key:"getLinkMaps",value:function(){return this.linkMaps}},{key:"matchLink",value:function(t){var e=!1;return this.linkMaps.forEach((function(a){a.match(t)&&(e=!0)})),e}},{key:"addValueMap",value:function(t,e){var a=A.getDefaultdata(),n=new A(t,e,a);return this.valueMaps.push(n),this.data.valueData.push(a),n}},{key:"removeValueMap",value:function(t){this.data.valueData.splice(t,1),this.valueMaps.splice(t,1)}},{key:"getValueMap",value:function(t){return this.valueMaps[t]}},{key:"getValueMaps",value:function(){return this.valueMaps}},{key:"addRangeMap",value:function(t,e,a){var n=M.getDefaultData(),i=new M(t,e,a,n);return this.rangeMaps.push(i),this.data.rangeData.push(n),i}},{key:"removeRangeMap",value:function(t){this.data.rangeData.splice(t,1),this.rangeMaps.splice(t,1)}},{key:"getRangeMap",value:function(t){return this.rangeMaps[t]}},{key:"getRangeMaps",value:function(){return this.rangeMaps}},{key:"hideRangeMap",value:function(t){return this.rangeMaps[t].hide(),this}},{key:"showRangeMap",value:function(t){return this.rangeMaps[t].show(),this}},{key:"getExectedTime",value:function(){return"number"==typeof this.execTimes?"".concat(this.execTimes.toFixed(2)," ms"):"".concat(this.execTimes," ms")}},{key:"getColorForValue",value:function(t){if(!this.data.gradient||"number"!==this.data.type){var e=this.getThresholdLevel(t);return this.getColorForLevel(e)}if("number"===this.data.type){var a=this.data.thresholds,n=this.data.colors,i=a.length;if(void 0===a||0===i)return n[0];for(var r=0,s=0;s<i;s++){if(t<a[s])break;r=s}if(0===r&&t<=a[0])return n[0];if(r===i-1)return n[r+1];var o=a[r+1]-a[r],l=(t-a[r])/o;return f.a.utils.getRatioColor(l,n[r+1],n[r+2])}return""}},{key:"getColorForLevel",value:function(t){var e=this.data.colors;if(t<0)return e[0];var a=t;return this.data.invert||(a=this.data.colors.length-1-t),void 0!==e[a]?e[a]:e[0]}},{key:"getThresholdLevel",value:function(t){if("number"===this.data.type){var e=0,a=this.data.thresholds;if(void 0===a||0===a.length)return 0;for(var n=a.length,i=0;i<n;i++){if(t<a[i])break;e=i+1}return this.data.invert||(e=this.data.colors.length-1-e),e}if("string"===this.data.type){var r=0,s=this.getFormattedValue(t),o=this.data.stringThresholds;if(void 0===o||0===o.length)return 0;for(var l=o.length,h=0;h<l;h++){var u=o[h];if(f.a.utils.matchString(t,u)||f.a.utils.matchString(s,u)){r=h+1;break}}return this.data.invert||(r=this.data.colors.length-1-r),r}return 0}},{key:"getValueForMetric",value:function(t){if(this.matchMetric(t))try{return t.getValue(this.data.aggregation,this.data.column)}catch(t){return f.a.log.error("datapoint for metric is null",t),null}return"-"}},{key:"getFormattedValueForMetric",value:function(t){var e=this.getValueForMetric(t);return this.getFormattedValue(e)}},{key:"getFormattedValue",value:function(t){if("number"===this.data.type){if(!d.a.isFinite(t))return"Invalid Number";if(null==t)return"-";var e=this.decimalPlaces(t);return e="number"==typeof this.data.decimals?Math.min(this.data.decimals,e):e,u.formatValue(t,this.data.unit,this.data.decimals)}if("string"===this.data.type){null==t&&(t="null"),d.a.isArray(t)&&(t=t.join(", "));var a=this.data.mappingType||0;if(1===a&&this.valueMaps){for(var n=0;n<this.valueMaps.length;n+=1){var i=this.valueMaps[n];if(i.match(t))return i.getFormattedText(t)}return t.toString()}if(2===a&&this.rangeMaps){for(var r=0;r<this.rangeMaps.length;r+=1){var s=this.rangeMaps[r];if(s.match(t))return s.getFormattedText(t)}return t.toString()}if(null==t)return"null"}return"date"===this.data.type?null==t?"-":(d.a.isArray(t)&&(t=t[0]),u.getFormatedDate(t,this.data.dateFormat)):t}},{key:"defaultValueFormatter",value:function(t){return null==t||void 0===t?"":(d.a.isArray(t)&&(t=t.join(", ")),this.data.sanitize?this.$sanitize(t):d.a.escape(t))}},{key:"$sanitize",value:function(t){throw new Error("Method not implemented.")}},{key:"decimalPlaces",value:function(t){var e=(""+t).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return e?Math.max(0,(e[1]?e[1].length:0)-(e[2]?+e[2]:0)):0}}],[{key:"getDefaultData",value:function(){return{order:1,pattern:".*",unit:"short",type:"number",metricType:"serie",alias:"myRule",refId:"A",column:"Time",hidden:!1,aggregation:"current",decimals:2,colors:["rgba(245, 54, 54, 0.9)","rgba(237, 129, 40, 0.89)","rgba(50, 172, 45, 0.97)"],reduce:!0,dateFormat:"YYYY-MM-DD HH:mm:ss",thresholds:[50,80],stringThresholds:["/.*/","/.*/"],invert:!1,gradient:!1,overlayIcon:!1,tooltip:!1,tooltipLabel:"",tooltipColors:!1,tooltipOn:"a",tpDirection:"v",tpGraph:!1,tpGraphSize:"100%",tpGraphType:"line",tpGraphLow:null,tpGraphHigh:null,tpGraphScale:"linear",shapeProp:"id",shapeRegEx:!0,shapeData:[],textProp:"id",textRegEx:!0,textData:[],linkProp:"id",linkRegEx:!0,linkData:[],eventProp:"id",eventRegEx:!1,eventData:[],mappingType:1,valueData:[],rangeData:[],sanitize:!1}}}]),t}(),S=function(){function t(e,a){x(this,t),this.data=a,this.data.pattern=e,this.id=f.a.utils.uniqueID()}return k(t,[{key:"import",value:function(t){return t.pattern&&(this.data.pattern=t.pattern),t.hidden&&(this.data.hidden=t.hidden),this}},{key:"match",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null!=t&&0!==t.length&&f.a.utils.matchString(t,this.data.pattern,e)}},{key:"getId",value:function(){return this.id}},{key:"show",value:function(){return this.data.hidden=!1,this}},{key:"hide",value:function(){return this.data.hidden=!0,this}},{key:"isHidden",value:function(){return void 0!==this.data.hidden&&this.data.hidden}},{key:"toVisible",value:function(){return!this.data.hidden}},{key:"export",value:function(){return{pattern:this.data.pattern,hidden:this.data.hidden}}}],[{key:"getDefaultMethods",value:function(){return this.methods}},{key:"getDefaultPlaceHolder",value:function(t){var e=this.methods.find((function(e){return e.value===t}));if(void 0!==e)return e.placeholder}},{key:"getDefaultValue",value:function(t){var e=this.methods.find((function(e){return e.value===t}));if(void 0!==e)return e.default}}]),t}();S.methods=[];var C=function(t){function e(t,a){var n;return x(this,e),(n=g(this,m(e).call(this,t,a))).data=a,n}return y(e,t),k(e,[{key:"toColorize",value:function(t){return-1!==t&&("n"!==this.data.colorOn&&("a"===this.data.colorOn||"wc"===this.data.colorOn&&t>=1))}},{key:"import",value:function(t){return v(m(e.prototype),"import",this).call(this,t),t.style&&(this.data.style=t.style),t.colorOn&&(this.data.colorOn=t.colorOn),this}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,style:"fillColor",colorOn:"a"}}}]),e}(S),E=function(t){function e(t,a){var n;return x(this,e),(n=g(this,m(e).call(this,t,a))).data=a,n}return y(e,t),k(e,[{key:"toLabelize",value:function(t){return"wmd"===this.data.textOn||"n"!==this.data.textOn&&("wc"===this.data.textOn&&t>=1||"co"===this.data.textOn&&t>=2)}},{key:"import",value:function(t){return v(m(e.prototype),"import",this).call(this,t),t.textReplace&&(this.data.textReplace=t.textReplace),t.textPattern&&(this.data.textPattern=t.textPattern),t.textOn&&(this.data.textOn=t.textOn),this}},{key:"getReplaceText",value:function(t,e){if("content"===this.data.textReplace)return e;if("pattern"===this.data.textReplace){var a=f.a.utils.stringToJsRegex(this.data.textPattern);return t.toString().match(a)?t.toString().replace(a,e):t}return"as"===this.data.textReplace?"".concat(t," ").concat(e):"anl"===this.data.textReplace?"".concat(t,"\n").concat(e):t}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,textReplace:"content",textPattern:"/.*/",textOn:"wmd"}}}]),e}(S),O=function(t){function e(t,a){var n;return x(this,e),(n=g(this,m(e).call(this,t,a))).data=a,n}return y(e,t),k(e,[{key:"getLink",value:function(){return this.data.linkParams?this.data.linkUrl+window.location.search:this.data.linkUrl}},{key:"import",value:function(t){return v(m(e.prototype),"import",this).call(this,t),t.linkUrl&&(this.data.linkUrl=t.linkUrl),t.linkParams&&(this.data.linkParams=t.linkParams),t.linkOn&&(this.data.linkOn=t.linkOn),this}},{key:"toLinkable",value:function(t){return"a"===this.data.linkOn||"wc"===this.data.linkOn&&t>=1}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,linkUrl:"",linkParams:!1,linkOn:"a"}}}]),e}(S),T=function(t){function e(t,a){var n;return x(this,e),(n=g(this,m(e).call(this,t,a))).data=a,n}return y(e,t),k(e,[{key:"getPlaceHolder",value:function(){var t=e.getDefaultPlaceHolder(this.data.style);return void 0!==t?t:""}},{key:"getTypeahead",value:function(){var t=this,a=f.a.getFullAvailableVarNames(),n=e.methods.find((function(e){return e.value===t.data.style}));if(void 0!==n&&void 0!==n.typeahead)return a=a.concat(n.typeahead.split("|"));if("shape"===this.data.style){var i=e.getFormNames();Array.prototype.push.apply(a,i)}return a}},{key:"getValueByDefault",value:function(){var t=e.getDefaultValue(this.data.style);return void 0!==t?t:""}},{key:"toEventable",value:function(t){return-1===this.data.eventOn||t===this.data.eventOn}},{key:"import",value:function(t){return v(m(e.prototype),"import",this).call(this,t),t.style&&(this.data.style=t.style),t.eventOn&&(this.data.eventOn=t.eventOn),t.value&&(this.data.value=t.value),this}}],[{key:"getDefaultData",value:function(){return{pattern:"",hidden:!1,style:"shape",eventOn:0,value:""}}},{key:"getFormNames",value:function(){if(e.shapes.length>0)return e.shapes;var t=f.a.utils.loadFile(f.a.getVar(f.a.CONSTANTS.VAR_STG_CTXROOT)+f.a.CONSTANTS.CONF_FILE_SHAPESTXT);return void 0!==t&&0===e.shapes.length?(e.shapes=e.shapes.concat(t.split(/\n/)),e.shapes):e.shapes}}]),e}(S);T.methods=f.a.CONSTANTS.EVENTMETHODS,T.shapes=[];var M=function(){function t(e,a,n,i){x(this,t),this.data=i,this.data.from=e,this.data.to=a,this.data.text=n,this.data.hidden=!1}return k(t,[{key:"import",value:function(t){return this.data.from=t.from?t.from:void 0,this.data.to=t.to?t.to:void 0,this.data.text=t.text?t.text:void 0,this.data.hidden=!(!t.hidden&&!1!==t.hidden)&&t.hidden,this}},{key:"match",value:function(t){if(void 0!==t&&"string"==typeof t&&t.length>0||void 0!==t&&"number"==typeof t){var e=Number(t);return void 0!==this.data.from&&"string"==typeof t&&this.data.from.length>0||void 0!==this.data.from&&"number"==typeof t?e>=Number(this.data.from)&&(!(void 0!==this.data.to&&"string"==typeof this.data.to&&this.data.to.length>0||void 0!==this.data.from&&"number"==typeof this.data.to)||e<Number(this.data.to)):!(void 0!==this.data.to&&"string"==typeof this.data.to&&this.data.to.length>0||void 0!==this.data.to&&"number"==typeof this.data.to)||e<Number(this.data.to)}return!1}},{key:"getFormattedText",value:function(t){return this.match(t)?this.data.text:t}},{key:"show",value:function(){this.data.hidden=!1}},{key:"hide",value:function(){this.data.hidden=!0}},{key:"isHidden",value:function(){return this.data.hidden}},{key:"toVisible",value:function(){return!this.data.hidden}},{key:"export",value:function(){return{from:this.data.from,to:this.data.to,text:this.data.text,hidden:this.data.hidden}}}],[{key:"getDefaultData",value:function(){return{from:void 0,to:void 0,text:void 0,hidden:!1}}}]),t}(),A=function(){function t(e,a,n){x(this,t),this.data=n,this.data.value=e,this.data.text=a,this.data.hidden=!1,this.import(n)}return k(t,[{key:"import",value:function(t){return this.data.value=t.value||this.data.value||void 0,this.data.text=t.text||this.data.text||void 0,this.data.hidden=t.hidden||this.data.hidden||!1,this}},{key:"match",value:function(t){return null==t?"null"===this.data.value:!d.a.isString(t)&&Number(this.data.value)===Number(t)||f.a.utils.matchString(t.toString(),this.data.value)}},{key:"getFormattedText",value:function(t){return null!=t||"null"!==this.data.value&&"undefined"!==this.data.value?this.match(t)?this.data.text?this.data.text:"":"".concat(t):this.data.text?this.data.text:""}},{key:"show",value:function(){this.data.hidden=!1}},{key:"hide",value:function(){this.data.hidden=!0}},{key:"isHidden",value:function(){return this.data.hidden}},{key:"export",value:function(){return{value:this.data.value,text:this.data.text,hidden:this.data.hidden}}}],[{key:"getDefaultdata",value:function(){return{value:void 0,text:void 0,hidden:!1}}}]),t}();function R(t){return function(t){if(Array.isArray(t)){for(var e=0,a=new Array(t.length);e<t.length;e++)a[e]=t[e];return a}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function N(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}D.$inject=["$q","uiSegmentSrv"];var L=function(){function t(e){var a=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.style=f.a.CONSTANTS.COLORMETHODS,this.metricType=f.a.CONSTANTS.METRIC_TYPES,this.colorOn=f.a.CONSTANTS.COLOR_APPLYON,this.linkOn=f.a.CONSTANTS.LINK_APPLYON,this.tooltipOn=f.a.CONSTANTS.TOOLTIP_APPLYON,this.textOn=f.a.CONSTANTS.TEXT_APPLYON,this.textReplace=f.a.CONSTANTS.TEXTMETHODS,this.EventType=T.getDefaultMethods(),this.tpDirection=f.a.CONSTANTS.TOOLTIP_DIRECTION_TYPES,this.propTypes=f.a.CONSTANTS.IDENT_TYPES,this.textPattern="/.*/",this.metricTypes=f.a.CONSTANTS.VALUE_TYPES,this.dateFormats=f.a.CONSTANTS.VALUE_DATEFORMAT_TYPES,this.aggregationTypes=f.a.CONSTANTS.AGGREGATION_TYPES,this.mappingTypes=f.a.CONSTANTS.VALUEMAPPINGTYPES,this.tpGraphType=f.a.CONSTANTS.TOOLTIP_GRAPH_TYPES,this.tpGraphScale=f.a.CONSTANTS.TOOLTIP_GRAPH_SCALE_TYPES,this.tpGraphSize=f.a.CONSTANTS.TOOLTIP_GRAPH_SIZE_TYPES,e.editor=this,e.$GF=f.a.me(),this.$scope=e,this.ctrl=e.ctrl,this.panel=this.ctrl.panel,this.rulesHandler=this.ctrl.rulesHandler,this.flowchartHandler=this.ctrl.flowchartHandler,this.rulesHandler=this.ctrl.rulesHandler,this.metricHandler=this.ctrl.metricHandler,this.unitFormats=u.getUnitFormats(),this.tpGraphSize=f.a.CONSTANTS.TOOLTIP_GRAPH_SIZE_TYPES,this.getMetricNames=function(){return a.metricHandler.getNames("serie")},this.getCellNames=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"id";f.a.log.info("MappingOptionsCtrl.getCellNamesForShape()");var e=a.flowchartHandler.getFlowchart(),n=e.getNamesByProp(t),i=new Set(n),r=R(i);return r=r.filter((function(t){return void 0!==t&&t.length>0}))},this.getCellNamesById=function(){return a.getCellNames("id")},this.getCellNamesByValue=function(){return a.getCellNames("value")},this.getVariables=function(){return f.a.getFullAvailableVarNames()},this.getEventValues=[]}var e,a,n;return t.$inject=["$scope"],e=t,(a=[{key:"isFirstRule",value:function(t){return 0===t}},{key:"isOnlySeries",value:function(){return this.metricHandler.isTypeOf("serie")&&!this.metricHandler.isTypeOf("table")}},{key:"isOnlyTables",value:function(){return!this.metricHandler.isTypeOf("serie")&&this.metricHandler.isTypeOf("table")}},{key:"isMultipleType",value:function(){return this.metricHandler.isTypeOf("serie")&&this.metricHandler.isTypeOf("table")}},{key:"initType",value:function(t){this.isOnlyTables()?t.data.metricType="table":this.isOnlySeries()&&(t.data.metricType="serie")}},{key:"getTablesName",value:function(){return this.metricHandler.getNames("table")}},{key:"getColumnsForTable",value:function(t){return this.metricHandler.getColumnsName(t,"table")}},{key:"isLastRule",value:function(t){return t===this.rulesHandler.countRules()-1}},{key:"render",value:function(){this.ctrl.render()}},{key:"setUnitFormat",value:function(t,e){t.data.unit=e.value,this.onRulesChange()}},{key:"onRulesChange",value:function(){return f.a.log.info("MappingOptionsCtrl.onRulesChange()"),this.flowchartHandler.ruleChanged(),this.render(),!0}},{key:"getLevels",value:function(t){for(var e=[],a=t.data.colors.length,n=0;n<a;n++)e.push({text:"".concat(n),value:n});return e}},{key:"removeShapeMap",value:function(t,e){var a=t.getShapeMap(e);this.unselectCell(t.data.shapeProp,a.data.pattern),t.removeShapeMap(e)}},{key:"removeTextMap",value:function(t,e){var a=t.getTextMap(e);this.unselectCell(t.data.textProp,a.data.pattern),t.removeTextMap(e)}},{key:"removeLinkMap",value:function(t,e){var a=t.getLinkMap(e);this.unselectCell(t.data.linkProp,a.data.pattern),t.removeLinkMap(e)}},{key:"removeEventMap",value:function(t,e){var a=t.getEventMap(e);this.unselectCell(t.data.eventProp,a.data.pattern),t.removeEventMap(e)}},{key:"onColorChange",value:function(t,e){var a=this;return function(n){a.rulesHandler.getRule(t).data.colors[e]=n,a.onRulesChange()}}},{key:"selectCell",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=this.flowchartHandler.getFlowchart(),(i=n.getXGraph())&&i.selectMxCells(t,e);case 3:case"end":return a.stop()}}),a,this)})))}},{key:"unselectCell",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=this.flowchartHandler.getFlowchart(),(i=n.getXGraph())&&i.unselectMxCells(t,e);case 3:case"end":return a.stop()}}),a,this)})))}},{key:"toggleShow",value:function(t,e){t.data.hidden=e,this.onRulesChange()}},{key:"highlightCells",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.highlightCells();case 1:case"end":return e.stop()}}),e)})))}},{key:"unhighlightCells",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.unhighlightCells();case 1:case"end":return e.stop()}}),e)})))}},{key:"unhighlightAllCells",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,a;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=this.flowchartHandler.getFlowchart(),(a=e.getXGraph())&&a.unhighlightCells();case 3:case"end":return t.stop()}}),t,this)})))}},{key:"removeRule",value:function(t,e){(1===t.removeClick||e)&&(this.rulesHandler.removeRule(t),this.onRulesChange()),t.removeClick=1,window.setInterval((function(){t&&(t.removeClick=2)}),2e3)}},{key:"cloneRule",value:function(t){this.rulesHandler.cloneRule(t),this.onRulesChange()}},{key:"moveRule",value:function(t,e){e?this.rulesHandler.moveRuleToUp(t):this.rulesHandler.moveRuleToDown(t),this.onRulesChange()}},{key:"onEventValue",value:function(t){this.getEventValues=t.getTypeahead()}}])&&N(e.prototype,a),n&&N(e,n),t}();function D(t,e){return{restrict:"E",scope:!0,templateUrl:"".concat(f.a.plugin.getPartialPath(),"/mapping/index.html"),controller:L}}function P(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var I=function(){function t(e,a,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xmlGraph="",this.type="xml",this.graph=void 0,this.scale=!0,this.tooltip=!0,this.lock=!0,this.center=!0,this.animation=!0,this.zoom=!1,this.zoomFactor=1.2,this.cumulativeZoomFactor=1,this.grid=!1,this.bgColor=null,this.zoomPercent="1",this.cells={id:[],value:[]},f.a.log.info("XGraph.constructor()"),this.container=e,this.type=a,this.onMapping={active:!1,$scope:null,value:null,prop:"id",object:null},t.initMxGgraph(),"xml"===a&&(f.a.utils.isencoded(n)?this.xmlGraph=f.a.utils.decode(n,!0,!0,!0):this.xmlGraph=n),this.initGraph()}var e,a,n;return e=t,n=[{key:"isValidXml",value:function(t){try{var e=document.createElement("div"),a=new Graph(e);f.a.utils.isencoded(t)&&(t=f.a.utils.decode(t,!0,!0,!0));var n=mxUtils.parseXml(t),i=new mxCodec(n);return a.getModel().beginUpdate(),i.decode(n.documentElement,a.getModel()),a.getModel().endUpdate(),a.destroy(),!0}catch(t){return f.a.log.error("isValidXml",t),!1}}},{key:"initMxGgraph",value:function(){var e=f.a.trace.before(this.constructor.name+".initMxGgraph()"),a=window;if(!t.initialized){if(void 0===a.mxGraph||void 0===a.mxGraph){t.preInitGlobalVars();var n=f.a.utils.$loadFile("".concat(f.a.plugin.getDrawioPath(),"js/viewer.min.js"));f.a.utils.evalRaw(n),t.postInitGlobalVars(),n=f.a.utils.$loadFile("".concat(f.a.plugin.getLibsPath(),"/Graph_custom.js")),f.a.utils.evalRaw(n)}t.initialized=!0}e.after()}},{key:"preInitGlobalVars",value:function(){var t=window;t.BASE_PATH=f.a.plugin.getMxBasePath(),t.RESOURCES_PATH=f.a.plugin.getMxResourcePath(),t.RESOURCE_BASE=f.a.plugin.getMxResourcePath(),t.STENCIL_PATH=f.a.plugin.getStencilsPath(),t.SHAPES_PATH=f.a.plugin.getShapesPath(),t.IMAGE_PATH=f.a.plugin.getMxImagePath(),t.STYLE_PATH=f.a.plugin.getMxStylePath(),t.CSS_PATH=f.a.plugin.getMxCssPath(),t.mxLanguages=["en"],t.DRAWIO_BASE_URL=f.a.plugin.getDrawioPath(),t.DRAW_MATH_URL=f.a.plugin.getDrawioPath(),t.DRAWIO_VIEWER_URL=f.a.plugin.getDrawioPath()+"viewer.min.js",t.DRAW_MATH_URL=f.a.plugin.getDrawioPath()+"math/",t.DRAWIO_CONFIG=null;var e=new Object;t.urlParams=e,e.sync="none",e.lightbox="1",e.nav="1",e.local="1",e.embed="1",t.mxImageBasePath=f.a.plugin.getMxImagePath(),t.mxBasePath=f.a.plugin.getMxBasePath(),t.mxLoadStylesheets=!0,t.mxLanguage="en",t.mxLoadResources=!0}},{key:"postInitGlobalVars",value:function(){var t=window;t.mxClient.mxBasePath=f.a.plugin.getMxBasePath(),t.mxClient.mxImageBasePath=f.a.plugin.getMxImagePath(),t.mxClient.mxLoadResources=!0,t.mxClient.mxLanguage="en",t.mxClient.mxLoadStylesheets=!0,t.VSD_CONVERT_URL=null,t.EMF_CONVERT_URL=null,t.ICONSEARCH_PATH=null}},{key:"loadXml",value:function(t){try{var e=mxUtils.load(t);if(e.getStatus()>=200&&e.getStatus()<=299)return e.getText();f.a.log.error("Cannot load "+t,e.getStatus())}catch(e){f.a.log.error("Cannot load "+t,e)}return null}},{key:"compress",value:function(t){return Graph.compress(t,!0)}},{key:"decompress",value:function(t){return Graph.decompress(t,!0)}}],(a=[{key:"initGraph",value:function(){var t=f.a.trace.before(this.constructor.name+".initGraph()");return this.graph=new Graph(this.container),this.graph.setPanning(!0),this.clickBackup=this.graph.click,this.dbclickBackup=this.graph.dblClick,mxEvent.addMouseWheelListener(mxUtils.bind(this,this.eventMouseWheel),this.container),(mxClient.IS_IE||mxClient.IS_EDGE)&&mxEvent.addListener(this.container,"wheel",mxUtils.bind(this,this.eventMouseWheel)),mxEvent.addListener(document,"keydown",mxUtils.bind(this,this.eventKey)),this.container.addEventListener("contextmenu",(function(t){return t.preventDefault()})),this.graph.dblClick=this.eventDbClick.bind(this),t.after(),this}},{key:"drawGraph",value:function(){var t=f.a.trace.before(this.constructor.name+".drawGraph()");this.graph.getModel().beginUpdate(),this.graph.getModel().clear();try{var e=mxUtils.parseXml(this.xmlGraph);new mxCodec(e).decode(e.documentElement,this.graph.getModel())}catch(t){f.a.log.error("Error in draw",t)}finally{this.graph.getModel().endUpdate(),this.cells.id=this.getCurrentCells("id"),this.cells.value=this.getCurrentCells("value")}return t.after(),this}},{key:"applyGraph",value:function(){var t=f.a.trace.before(this.constructor.name+".applyGraph()");return this.scale?this.unzoomGraph():this.zoomGraph(this.zoomPercent),this.tooltipGraph(this.tooltip),this.lockGraph(this.lock),this.scale&&this.center?this.fitGraph():(this.scaleGraph(this.scale),this.centerGraph(this.center)),this.gridGraph(this.grid),this.bgGraph(this.bgColor),this.graph.foldingEnabled=!0,this.graph.cellRenderer.forceControlClickHandler=!0,this.refresh(),t.after(),this}},{key:"refresh",value:function(){var t=f.a.trace.before(this.constructor.name+".refresh()");return this.graph.refresh(),t.after(),this}},{key:"destroyGraph",value:function(){return this.graph.destroy(),this.graph=void 0,this}},{key:"lockGraph",value:function(t){return t?this.graph.setEnabled(!1):this.graph.setEnabled(!0),this.lock=t,this}},{key:"tooltipGraph",value:function(t){return t?this.graph.setTooltips(!0):this.graph.setTooltips(!1),this.tooltip=t,this}},{key:"allowDrawio",value:function(t){return t?(mxUrlConverter.prototype.baseUrl="http://draw.io/",mxUrlConverter.prototype.baseDomain=""):(mxUrlConverter.prototype.baseUrl=null,mxUrlConverter.prototype.baseDomain=null),this}},{key:"enableAnim",value:function(t){return this.animation=t,this}},{key:"centerGraph",value:function(t){var e=f.a.trace.before(this.constructor.name+".centerGraph()");return this.graph.centerZoom=!1,t?this.graph.center(!0,!0):this.graph.center(!1,!1),this.center=t,e.after(),this}},{key:"scaleGraph",value:function(t){var e=f.a.trace.before(this.constructor.name+".scaleGraph()");return t&&(this.unzoomGraph(),this.graph.fit(),this.graph.view.rendering=!0),this.scale=t,e.after(),this}},{key:"fitGraph",value:function(){var t=f.a.trace.before(this.constructor.name+".fitGraph()"),e=this.graph.getGraphBounds(),a=this.graph.container.clientWidth-2,n=this.graph.container.clientHeight-2,i=e.width/this.graph.view.scale,r=e.height/this.graph.view.scale,s=Math.min(3,Math.min(a/i,n/r));return this.graph.view.scaleAndTranslate(s,(2+a-i*s)/(2*s)-e.x/this.graph.view.scale,(2+n-r*s)/(2*s)-e.y/this.graph.view.scale),t.after(),this}},{key:"gridGraph",value:function(t){return this.container.style.backgroundImage=t?"url('".concat(f.a.plugin.getMxImagePath(),"/grid.gif')"):"",this.grid=t,this}},{key:"zoomGraph",value:function(t){var e=f.a.trace.before(this.constructor.name+".zoomGraph()");if(!this.scale&&t&&t.length>0&&"100%"!==t&&"0%"!==t){var a=Number(t.replace("%",""))/100;this.graph.zoomTo(a,!0),this.zoomPercent=t}else this.unzoomGraph();return this.zoom=!0,e.after(),this}},{key:"unzoomGraph",value:function(){return this.zoom=!1,this.graph.zoomActual(),this}},{key:"bgGraph",value:function(t){var e=$(this.container);return t?(this.bgColor=t,e.css("background-color",t)):e.css("background-color",""),this}},{key:"getMxGraph",value:function(){return this.graph}},{key:"getxmlGraph",value:function(){return this.xmlGraph}},{key:"setXmlGraph",value:function(t){var e=f.a.trace.before(this.constructor.name+".setXmlGraph()");return f.a.utils.isencoded(t)?this.xmlGraph=f.a.utils.decode(t,!0,!0,!0):this.xmlGraph=t,this.drawGraph(),e.after(),this}},{key:"getCurrentCells",value:function(t){var e=this,a=f.a.trace.before(this.constructor.name+".getCurrentCells()"),n=[],i=this.graph.getModel().cells;return"id"===t?d.a.each(i,(function(t){f.a.log.debug("this.getStyleCell(mxcell, 'shape') ["+t.id+"] : ",e.getStyleCell(t,"shape")),n.push(e.getId(t))})):"value"===t&&d.a.each(i,(function(t){n.push(e.getLabelCell(t))})),a.after(),n}},{key:"findMxCells",value:function(t,e){var a=this,n=f.a.trace.before(this.constructor.name+".findMxCells()"),i=this.getMxCells(),r=[];return"id"===t?d.a.each(i,(function(t){f.a.utils.matchString(t.id,e)&&r.push(t)})):"value"===t&&d.a.each(i,(function(t){f.a.utils.matchString(a.getLabelCell(t),e)&&r.push(t)})),n.after(),r}},{key:"selectMxCells",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(n=this.findMxCells(t,e))&&this.highlightCells(n);case 2:case"end":return a.stop()}}),a,this)})))}},{key:"unselectMxCells",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:(n=this.findMxCells(t,e))&&this.unhighlightCells(n);case 2:case"end":return a.stop()}}),a,this)})))}},{key:"createOverlay",value:function(t,e){var a=new mxCellOverlay(t,e);return a.addListener(mxEvent.CLICK,(function(t,a){mxUtils.alert("".concat(e,"\nLast update: ").concat(new Date))})),a}},{key:"addOverlay",value:function(t,e){return this.graph.addCellOverlay(e,this.createOverlay(this.graph.warningImage,"State: ".concat(t))),this}},{key:"removeOverlay",value:function(t){return this.graph.removeCellOverlays(t),this}},{key:"addLink",value:function(t,e){return this.graph.setLinkForCell(t,e),this}},{key:"getLink",value:function(t){return this.graph.getLinkForCell(t)}},{key:"removeLink",value:function(t){return this.graph.setLinkForCell(t,null),this}},{key:"getOrignalCells",value:function(t){return"id"===t||"value"===t?this.cells[t]:[]}},{key:"renameId",value:function(t,e){var a=this.findMxCells("id",t);return void 0!==a&&a.length>0?a.forEach((function(t){t.id=e})):f.a.log.warn("Cell ".concat(t," not found")),this}},{key:"getXmlModel",value:function(){var t=(new mxCodec).encode(this.graph.getModel());return mxUtils.getXml(t)}},{key:"getMxCells",value:function(){return this.graph.getModel().cells}},{key:"getValuePropOfMxCell",value:function(t,e){return"id"===t?this.getId(e):"value"===t?this.getLabelCell(e):null}},{key:"getStyleCell",value:function(t,e){var a=this.graph.view.getState(t);return a?a.style[e]:null}},{key:"setColorAnimCell",value:function(t,e,a){if(this.animation&&a)try{var n=this.getStyleCell(t,e);if(n){var i=a,r=f.a.utils.getStepColors(i,n,f.a.CONSTANTS.CONF_COLORS_STEPS),s=this;!function a(n,i){n<i.length&&(s.setStyleCell(t,e,i[n]),window.setTimeout((function(){a(n+1,i)}),f.a.CONSTANTS.CONF_COLORS_MS))}(0,r)}else this.setStyleCell(t,e,a)}catch(n){f.a.log.error("Error on graduate color",n),this.setStyleCell(t,e,a)}else this.setStyleCell(t,e,a);return this}},{key:"setStyleCell",value:function(t,e,a){return this.graph.setCellStyles(e,a,[t]),this}},{key:"setStyleAnimCell",value:function(t,e,a,n){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var r,s,o,l,h,u;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(this.animation&&null!==a)try{r=Number(a),s=Number(void 0!==n?n:this.getStyleCell(t,e)),r!==s&&(o=function a(n,i){n<h&&(u.setStyleCell(t,e,i[n]),window.setTimeout((function(){a(n+1,i)}),f.a.CONSTANTS.CONF_ANIMS_MS))},l=f.a.getIntervalCounter(s,r,f.a.CONSTANTS.CONF_ANIMS_STEP),h=l.length,u=this,o(0,l))}catch(n){this.graph.setCellStyles(e,a,[t])}else this.graph.setCellStyles(e,a,[t]);case 1:case"end":return i.stop()}}),i,this)})))}},{key:"setStyles",value:function(t,e){this.graph.getModel().setStyle(t,e)}},{key:"getLabelCell",value:function(t){return mxUtils.isNode(t.value)?t.value.getAttribute("label"):t.getValue(t)}},{key:"setLabelCell",value:function(t,e){return this.graph.cellLabelChanged(t,e,!1),this}},{key:"getId",value:function(t){return t.getId()}},{key:"setMap",value:function(t){f.a.log.info("XGraph.setMapping()"),this.onMapping=t,!0===this.onMapping.active&&(this.container.style.cursor="crosshair",this.graph.click=this.eventClick.bind(this))}},{key:"unsetMap",value:function(){f.a.log.info("XGraph.unsetMapping()"),this.onMapping.active=!1,this.container.style.cursor="auto",this.graph.click=this.clickBackup,this.onMapping.$scope&&this.onMapping.$scope.$applyAsync()}},{key:"eventClick",value:function(t){if(this.onMapping.active){var e=t.getState();if(e){var a=null!==this.onMapping.prop?this.onMapping.prop:"id",n=this.getValuePropOfMxCell(a,e.cell);if(this.onMapping.object&&(this.onMapping.object.data.pattern=n),this.onMapping.value){var i=document.getElementById(this.onMapping.value);i&&setTimeout((function(){i.focus()}),100)}this.unsetMap()}}}},{key:"eventDbClick",value:function(t,e){f.a.log.info("XGraph.eventDbClick()"),f.a.log.info("XGraph.eventDbClick() container.getBoundingClientRect()",this.container.getBoundingClientRect()),void 0!==e&&this.lazyZoomCell(e)}},{key:"eventMouseWheel",value:function(t,e){if(f.a.log.info("XGraph.eventMouseWheel()"),this.graph.isZoomWheelEvent(t)){null==e&&(e=t.deltaY<0);var a=this.container.getBoundingClientRect(),n=t.clientX-a.left,i=t.clientY-a.top;this.cumulativeZoomFactor=e?1.2*this.cumulativeZoomFactor:.8*this.cumulativeZoomFactor,this.lazyZoomPointer(this.cumulativeZoomFactor,n,i),mxEvent.consume(t)}}},{key:"eventKey",value:function(t){mxEvent.isConsumed(t)||27!==t.keyCode||(this.cumulativeZoomFactor=1,this.graph&&(this.graph.zoomActual(),this.applyGraph()))}},{key:"lazyZoomCenter",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.graph.zoomTo(t,!0);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"lazyZoomPointer",value:function(t,e,a){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function n(){var i,r,s,o,l;return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:f.a.log.info("XGraph.lazyZoomPointer()"),i=2*e,r=2*a,t=Math.max(.01,Math.min(this.graph.view.scale*t,160))/this.graph.view.scale,t=this.cumulativeZoomFactor/this.graph.view.scale,s=Math.round(this.graph.view.scale*t*100)/100,(t=s/this.graph.view.scale)>1?(i*=-(o=(t-1)/(2*s)),r*=-o):(l=(1/t-1)/(2*this.graph.view.scale),i*=l,r*=l),this.graph.view.scaleAndTranslate(s,this.graph.view.translate.x+i,this.graph.view.translate.y+r);case 9:case"end":return n.stop()}}),n,this)})))}},{key:"highlightCells",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getMxCells();return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a=0;a<t.length;a++)this.highlightCell(t[a]);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"unhighlightCells",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getMxCells();return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a=this;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:d.a.each(t,(function(t){a.unhighlightCell(t)}));case 1:case"end":return e.stop()}}),e)})))}},{key:"highlightCell",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.highlight||null!=(a=this.graph.view.getState(t))&&(n=Math.max(5,mxUtils.getValue(a.style,mxConstants.STYLE_STROKEWIDTH,1)+4),(i=new mxCellHighlight(this.graph,"#99ff33",n,!1)).opacity=100,i.highlight(a),t.highlight=i);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"unhighlightCell",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.highlight&&(null!=(a=t.highlight).shape&&(mxUtils.setPrefixedStyle(a.shape.node.style,"transition","all 500ms ease-in-out"),a.shape.node.style.opacity=0),window.setTimeout((function(){a.destroy()}),500),t.highlight=null);case 1:case"end":return e.stop()}}),e)})))}},{key:"blinkCell",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n,i,r;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:t.blink||(n=this,i=function(){var a=n.graph.view.getState(t);if(null!=a){var i=Math.max(5,mxUtils.getValue(a.style,mxConstants.STYLE_STROKEWIDTH,1)+4),s=new mxCellHighlight(n.graph,"#f5f242",i,!1);s.opacity=100,s.highlight(a),t.blink_on=s,t.blink_ms=e,window.setTimeout((function(){r()}),e)}},r=function(){if(t&&t.blink_on){var a=t.blink_on;null!=a.shape&&(mxUtils.setPrefixedStyle(a.shape.node.style,"transition","all ".concat(e,"ms ease-in-out")),a.shape.node.style.opacity=0),window.setTimeout((function(){a.destroy(),t.blink_on=null}),e)}},t.blink=f.a.setInterval(i,3*e));case 1:case"end":return a.stop()}}),a,this)})))}},{key:"unblinkCell",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.blink&&(f.a.clearInterval(t.blink),t.blink_on&&null!=(a=t.blink_on).shape&&(a.shape.node.style.opacity=0,a.destroy(),t.blink_on=null,t.blink_ms=0),t.blink=null);case 1:case"end":return e.stop()}}),e)})))}},{key:"isBlinkCell",value:function(t){return!!t.blink}},{key:"geBlinkMxCell",value:function(t){return t.blink?t.blink_ms:0}},{key:"isCollapsedCell",value:function(t){return this.graph.isCellCollapsed(t)}},{key:"collapseCell",value:function(t){this.isCollapsedCell(t)||this.graph.foldCells(!0,!1,[t],null,null)}},{key:"expandCell",value:function(t){this.isCollapsedCell(t)&&this.graph.foldCells(!1,!1,[t],null,null)}},{key:"toggleFoldCell",value:function(t){var e=!this.isCollapsedCell(t);this.graph.foldCells(e,!1,[t],null,null)}},{key:"hideCell",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isVisibleCell(t)&&this.graph.model.setVisible(t,!1);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"showCell",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.isVisibleCell(t)||this.graph.model.setVisible(t,!0);case 1:case"end":return e.stop()}}),e,this)})))}},{key:"isVisibleCell",value:function(t){return this.graph.model.isVisible(t)}},{key:"resizeCell",value:function(t,e,a,n){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var r,s,o,l,h,u,c,d,p,g,v,m,y,b,x;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:null!==(r=this.graph.model.getGeometry(t))&&(s=void 0!==n?n.x:r.x,o=void 0!==n?n.width:r.x,l=void 0!==n?n.y:r.y,h=void 0!==n?n.height:r.y,s=void 0!==e&&e<0?s+e+o:s,l=void 0!==a&&a<0?l+a+h:l,u=void 0!==a?Math.abs(a):void 0!==n?n.height:r.height,c=void 0!==e?Math.abs(e):void 0!==n?n.width:r.width,this.animation?(d=function e(a,n,i,r,s){a<y&&window.setTimeout((function(){var o=new mxRectangle(n[a],i[a],r[a],s[a]);b.graph.resizeCell(t,o,!0),e(a+1,n,i,r,s)}),f.a.CONSTANTS.CONF_ANIMS_MS)},p=f.a.getIntervalCounter(r.x,s,f.a.CONSTANTS.CONF_ANIMS_STEP),g=f.a.getIntervalCounter(r.y,l,f.a.CONSTANTS.CONF_ANIMS_STEP),v=f.a.getIntervalCounter(r.width,c,f.a.CONSTANTS.CONF_ANIMS_STEP),m=f.a.getIntervalCounter(r.height,u,f.a.CONSTANTS.CONF_ANIMS_STEP),y=p.length,b=this,d(0,p,g,v,m)):(x=new mxRectangle(s,l,c,u),this.graph.resizeCell(t,x,!0)));case 2:case"end":return i.stop()}}),i,this)})))}},{key:"getSizeCell",value:function(t){return this.graph.model.getGeometry(t)}},{key:"resetSizeCell",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){var n;return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:n=new mxRectangle(e.x,e.y,e.width,e.height),this.graph.resizeCell(t,n,!0);case 2:case"end":return a.stop()}}),a,this)})))}},{key:"lazyZoomCell",value:function(t){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var a,n,i,r,s,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:null!=t&&t.isVertex()&&null!==(a=this.graph.view.getState(t))&&(n=a.x,i=a.y,r=a.width,s=a.height,o=new mxRectangle(n,i,r,s),this.graph.zoomToRect(o),this.cumulativeZoomFactor=this.graph.view.scale);case 1:case"end":return e.stop()}}),e,this)})))}}])&&P(e.prototype,a),n&&P(e,n),t}();function z(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}I.initialized=!1,H.$inject=["$q","$sce","uiSegmentSrv"];var F=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.sourceTypes=[{text:"XML Content",value:"xml"}],this.themes=[{text:"Dark",value:"dark"},{text:"Light",value:"kennedy"},{text:"Mobile",value:"minimal"},{text:"Atlas",value:"atlas"}],this.errorSourceFlag=!1,this.errorSourceMsg="",this.errorDownloadFlag=!1,this.errorDownloadMsg="",e.editor=this,e.$GF=f.a.me(),this.$scope=e,this.ctrl=e.ctrl,this.panel=this.ctrl.panel,this.flowchartHandler=this.ctrl.flowchartHandler}var e,a,n;return t.$inject=["$scope"],e=t,(a=[{key:"render",value:function(){this.flowchartHandler.render()}},{key:"onSourceChange",value:function(){this.flowchartHandler.sourceChanged(),this.render()}},{key:"onOptionChange",value:function(){f.a.log.info("FlowchartOptionsCtrl.onOptionChange()"),this.flowchartHandler.optionChanged(),this.render()}},{key:"checkSource_onSourceChange",value:function(t){var e=I.isValidXml(t);return this.errorSourceFlag=!e,e?(this.errorSourceMsg="",this.onSourceChange(),this.$scope.$applyAsync()):this.errorSourceMsg="Invalid Xml definition",e}},{key:"checkUrl_onSourceChange",value:function(t){var e=this;this.errorDownloadFlag=!1,this.errorDownloadMsg="";try{t=this.ctrl.templateSrv.replaceWithText(t),fetch(t,{method:"GET",mode:"cors",cache:"default"}).then((function(t){t.status>=200&&t.status<=299?t.text().then((function(t){var a=I.isValidXml(t);e.errorSourceFlag=!a,e.errorSourceFlag?e.errorSourceMsg="Response is an invalid Xml definition":(e.errorDownloadMsg="",e.onSourceChange()),e.$scope.$applyAsync()})):(e.errorSourceFlag=!0,e.errorDownloadMsg="Error ".concat(t.status," : ").concat(t.statusText),e.$scope.$applyAsync())})).catch((function(t){e.errorSourceFlag=!0,e.errorDownloadMsg="Error : ".concat(t),e.$scope.$applyAsync()}))}catch(t){this.errorDownloadFlag=!0,this.errorDownloadMsg="Error when call url"}return!0}},{key:"edit",value:function(t){this.flowchartHandler.openDrawEditor(t)}},{key:"getFlowcharts",value:function(){return this.flowchartHandler.getFlowcharts()}},{key:"getNames",value:function(){return this.flowchartHandler.getFlowchartNames()}},{key:"getCurrentFlowchart",value:function(){return[this.flowchartHandler.getFlowchart()]}}])&&z(e.prototype,a),n&&z(e,n),t}();function H(t,e,a){return{restrict:"E",scope:!0,templateUrl:"".concat(f.a.plugin.getPartialPath(),"/flowchart/index.html"),controller:F}}function V(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}j.$inject=["$q","uiSegmentSrv"];var G=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.enable=!1,e.editor=this,e.$GF=f.a.me(),this.state={data:this.getStates(),columns:[{id:"cellId",desc:"Shape ID",sort:"asc",select:!1},{id:"label",desc:"Label",sort:"asc",select:!1},{id:"cellId",desc:"Shape ID",sort:"asc",select:!1},{id:"font",desc:"Font color",sort:"asc",select:!1},{id:"fill",desc:"Fill color",sort:"asc",select:!1},{id:"stroke",desc:"Stroke color",sort:"asc",select:!1},{id:"tags",desc:"Tags Mapping",sort:"asc",select:!1}]},this.ctrl=e.ctrl,this.panel=this.ctrl.panel,this.flowchartHandler=this.ctrl.flowchartHandler,this.stateHandler=this.flowchartHandler.getFlowchart().getStateHandler()}var e,a,n;return t.$inject=["$scope"],e=t,(a=[{key:"render",value:function(){this.panel.render()}},{key:"onChangeId",value:function(t){if(void 0!==t.newcellId&&t.cellId!==t.newcellId){t.edited=!0;var e=this.flowchartHandler.getFlowchart().getStateHandler();void 0!==e&&(e.edited=!0),void 0===t.previousId&&(t.previousId=t.cellId),t.cellId=t.newcellId,t.edited=!0}t.edit=!1}},{key:"onEdit",value:function(t){t.edit=!0,t.newcellId=t.cellId;var e=document.getElementById(t.cellId);setTimeout((function(){e&&e.focus()}),100)}},{key:"reset",value:function(){this.flowchartHandler.draw(),this.flowchartHandler.refresh()}},{key:"apply",value:function(){var t=this.flowchartHandler.getFlowchart(),e=t.getStateHandler();void 0!==e&&(e.getStates().forEach((function(e){e.edited&&e.previousId&&(t.renameId(e.previousId,e.cellId),e.edited=!1)})),e.edited=!1),t.applyModel()}},{key:"selectCell",value:function(t){t.highlightCell()}},{key:"unselectCell",value:function(t){t.unhighlightCell()}},{key:"getStates",value:function(){if(this.stateHandler){var t=this.stateHandler.getStatesForInspect();return d.a.orderBy(t,["cellId","globalLevel"],["asc"])}return[]}},{key:"getStateValue",value:function(t,e){switch(e){case"cellId":return t.cellId;case"level":return t.getTextLevel();case"label":return t.getCellProp("value");default:return null}}}])&&V(e.prototype,a),n&&V(e,n),t}();function j(t,e){return{restrict:"E",scope:!0,templateUrl:"".concat(f.a.plugin.getPartialPath(),"inspect/index.html"),controller:G}}function B(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var U=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeRuleIndex=0,f.a.log.info("RulesHandler.constructor()"),this.rules=[],this.data=e}var e,a,n;return e=t,n=[{key:"getDefaultData",value:function(){return{rulesData:[]}}}],(a=[{key:"import",value:function(t){var e=this;f.a.log.info("RuleHandler.import()"),this.rules=[];var a,n=1;return null!=t&&((a=Array.isArray(t)?t:t.rulesData).length>0&&void 0!==a[0].order&&(a=d.a.sortBy(d.a.sortBy(a,(function(t){return t.order})))),a.forEach((function(t){e.addRule("").import(t).setOrder(n),n+=1}))),this}},{key:"getRules",value:function(){return this.rules}},{key:"getRule",value:function(t){return this.rules[t]}},{key:"addRule",value:function(t){var e=_.getDefaultData(),a=new _(t,e);return this.rules.push(a),this.data.rulesData.push(e),a.setOrder(this.countRules()),a}},{key:"countRules",value:function(){return void 0!==this.rules&&Array.isArray(this.rules)?this.rules.length:0}},{key:"setOrder",value:function(){for(var t=this.rules.length,e=0;e<t;e++)this.rules[e].setOrder(e+1);return this}},{key:"removeRule",value:function(t){var e=t.getOrder()-1;this.rules.splice(e,1),this.data.rulesData.splice(e,1),this.setOrder()}},{key:"cloneRule",value:function(t){var e=t.getOrder()-1,a=t.getData(),n=_.getDefaultData();this.reduce();var i=new _(n.pattern,n);i.import(a),n.alias="Copy of ".concat(n.alias),this.rules.splice(e,0,i),this.data.rulesData.splice(e,0,n),i.data.reduce=!1,this.activeRuleIndex=e,this.setOrder();var r=document.getElementById(i.getId());return r&&setTimeout((function(){r.focus()}),100),i}},{key:"reduce",value:function(){return this.getRules().forEach((function(t){t.data.reduce=!0})),this}},{key:"moveRuleToUp",value:function(t){var e=t.getOrder()-1,a=this.rules,n=a.length-1;if(0!==e&&0!==n){var i=a[e];i.setOrder(e);var r=a[e-1];r.setOrder(e+1),a[e-1]=i,a[e]=r}}},{key:"moveRuleToDown",value:function(t){var e=t.getOrder()-1,a=this.rules,n=a.length-1;if(e!==n&&0!==n){var i=a[e];i.setOrder(e+2);var r=a[e+1];r.setOrder(e+1),a[e+1]=i,a[e]=r}}}])&&B(e.prototype,a),n&&B(e,n),t}(),Y=a(6),X=a.n(Y);function Z(t){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function W(t,e){return!e||"object"!==Z(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function K(t){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function J(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&q(t,e)}function q(t,e){return(q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Q(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function tt(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function et(t,e,a){return e&&tt(t.prototype,e),a&&tt(t,a),t}var at=function(){function t(e){Q(this,t),this.timeFormat="YYYY-MM-DD HH:mm:ss",this.checked=!1,this.div=null,this.mxcell=e,this.checked=!1,this.metrics=new Set}return et(t,[{key:"isChecked",value:function(){return this.checked}},{key:"addMetric",value:function(){this.checked=!0;var t=new nt;return this.metrics.add(t),t}},{key:"updateDate",value:function(){var t=new Date;this.lastChange=t.getFullYear()+"-"+(t.getMonth()+1).toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+"-"+t.getDate().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+" "+t.getHours().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+t.getMinutes().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})+":"+t.getSeconds().toLocaleString("en-US",{minimumIntegerDigits:2,useGrouping:!1})}},{key:"destroy",value:function(){this.metrics.clear(),this.mxcell.GF_tooltipHandler&&delete this.mxcell.GF_tooltipHandler}},{key:"getDiv",value:function(t){if(null!==this.div&&void 0!==this.div)return t&&this.div&&t.appendChild(this.div),this.div;if(!this.checked)return null;var e=document.createElement("div");return void 0!==t&&t.appendChild(e),this.metrics.size>0&&(this.getDateDiv(e),this.metrics.forEach((function(t){t.getDiv(e)}))),this.div=e,e}},{key:"getDateDiv",value:function(t){var e=document.createElement("div");return e.id=this.mxcell.mxObjectId+"_DATE",void 0!==t&&t.appendChild(e),e.className="graph-tooltip-time tooltip-date",e.innerHTML="".concat(this.lastChange),e}}]),t}(),nt=function(){function t(){Q(this,t),this.direction="v",this.color="#8c8980",this.graphs=new Set,this.label="",this.value=""}return et(t,[{key:"setLabel",value:function(t){return this.label=t,this}},{key:"setValue",value:function(t){return this.value=t,this}},{key:"setColor",value:function(t){return null!==t&&(this.color=t),this}},{key:"setDirection",value:function(t){return this.direction=t,this}},{key:"getDiv",value:function(t){var e=document.createElement("div");return e.className="tooltip-metric","h"===this.direction&&(e.style.display="inline-block"),void 0!==t&&t.appendChild(e),this.div=e,this.getTextDiv(e),this.getGraphsDiv(e),e}},{key:"getTextDiv",value:function(t){var e=document.createElement("div");e.className="tooltip-text";var a="";return void 0!==t&&t.appendChild(e),void 0!==this.label&&(a+="".concat(this.label," : "),a+='<span style="color:'.concat(this.color,'"><b>').concat(this.value,"</b></span>")),e.innerHTML=a,e}},{key:"getGraphsDiv",value:function(t){var e=document.createElement("div");return void 0!==t&&t.appendChild(e),this.graphs.size>0&&this.graphs.forEach((function(t){t.getDiv(e)})),e}},{key:"addGraph",value:function(t){var e;switch(t){case"line":e=new rt;break;case"bar":e=new st;break;default:f.a.log.error("Graph type unknow",t),e=new st}return this.graphs.add(e),e}}]),t}(),it=function(){function t(){Q(this,t),this.color="#8c8980",this.type="line",this.data={series:[{data:[{x:0,y:0}]}]},this.size="100%",this.low=null,this.high=null,this.scaleType="linear"}return et(t,[{key:"getDiv",value:function(t){return this.div}},{key:"setName",value:function(t){return this.name=t,this}},{key:"setColumn",value:function(t){return this.column=t,this}},{key:"setType",value:function(t){return this.type=t,this}},{key:"setSize",value:function(t){return this.size=t,this}},{key:"setMetric",value:function(t){return this.metric=t,this}},{key:"setScaling",value:function(t,e){return this.low=t,this.high=e,this}},{key:"setScale",value:function(t){this.scaleType=t}},{key:"setColor",value:function(t){return null!==t&&(this.color=t),this}},{key:"setParentDiv",value:function(t){return this.parentDiv=t,this}},{key:"getChart",value:function(){return this.chart}}]),t}(),rt=function(t){function e(){var t;return Q(this,e),(t=W(this,K(e).call(this))).type="line",t.chartistOptions={showPoint:!1,showLine:!0,showArea:!0,fullWidth:!0,axisX:{showGrid:!1,showLabel:!1,offset:0},axisY:{showGrid:!1,showLabel:!1,offset:0},chartPadding:{top:0,left:0,right:0,bottom:0}},t}return J(e,t),et(e,[{key:"getDiv",value:function(t){if(this.metric){var e="log"===this.scaleType;this.data.series[0].data=this.metric.getData(this.column,e)}var a=document.createElement("div"),n=this.color;return this.div=a,void 0!==t&&t.appendChild(a),a.className="ct-chart ct-golden-section",null!==this.size&&(a.style.width=this.size),null!==this.low&&(this.chartistOptions.low=this.low),null!==this.high&&(this.chartistOptions.high=this.high),this.chart=new X.a.Line(a,this.data,this.chartistOptions),this.chart.on("draw",(function(t){"line"!==t.type&&"area"!==t.type||("line"===t.type&&t.element.attr({style:"stroke: ".concat(n)}),"area"===t.type&&t.element.attr({style:"fill: ".concat(n)}),t.element.animate({d:{begin:1e3*t.index,dur:1e3,from:t.path.clone().scale(1,0).translate(0,t.chartRect.height()).stringify(),to:t.path.clone().stringify(),easing:X.a.Svg.Easing.easeOutQuint}}))})),a}}]),e}(it),st=function(t){function e(){var t;return Q(this,e),(t=W(this,K(e).call(this))).type="bar",t.chartistOptions={axisX:{showGrid:!1,showLabel:!1,offset:0},axisY:{showGrid:!1,showLabel:!1,offset:0},chartPadding:{top:0,left:0,right:0,bottom:0}},t}return J(e,t),et(e,[{key:"getDiv",value:function(t){if(this.metric){var e="log"===this.scaleType;this.data.series[0].data=this.metric.getData(this.column,e)}var a=document.createElement("div"),n=this.color;this.div=a,void 0!==t&&t.appendChild(a),a.className="ct-chart ct-golden-section",null!==this.size&&(a.style.width=this.size),null!==this.low&&(this.chartistOptions.low=this.low),null!==this.high&&(this.chartistOptions.high=this.high),this.chart=new X.a.Bar(a,this.data,this.chartistOptions);var i=0,r=this.data.series[0].data.length,s=Math.round(50/(r/10)),o=Math.round(250/(r/10));return this.chart.on("draw",(function(t){"bar"===t.type&&(t.element.attr({style:"stroke: ".concat(n)}),i++,t.element.animate({opacity:{begin:i*s,dur:o,from:0,to:1,easing:"ease"}}))})),a}}]),e}(it);function ot(t,e,a){return(ot="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,a){var n=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ut(t)););return t}(t,e);if(n){var i=Object.getOwnPropertyDescriptor(n,e);return i.get?i.get.call(a):i.value}})(t,e,a||t)}function lt(t){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ht(t,e){return!e||"object"!==lt(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ut(t){return(ut=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ct(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&dt(t,e)}function dt(t,e){return(dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ft(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function pt(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function gt(t,e,a){return e&&pt(t.prototype,e),a&&pt(t,a),t}var vt=function(){function t(e,a){ft(this,t),this.changed=!1,this.matched=!1,this.globalLevel=-1,this.tooltipHandler=null;var n=f.a.trace.before(this.constructor.name+".constructor()");this.mxcell=e,this.cellId=e.id,this.xgraph=a,this.shapeState=new wt(a,e),this.tooltipState=new kt(a,e),this.iconState=new _t(a,e),this.eventState=new yt(a,e),this.textState=new bt(a,e),this.linkState=new xt(a,e),this.variables=f.a.createLocalVars(),this.status=new Map,this.tooltipHandler=null,this.mxcell.GF_tooltipHandler=null,this.originalText=this.xgraph.getLabelCell(e),n.after()}return gt(t,[{key:"async_applyState",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.applyState();case 1:case"end":return t.stop()}}),t,this)})))}},{key:"setState",value:function(t,e){var a=this,n=f.a.trace.before(this.constructor.name+".setState()");if(!t.isHidden()&&t.matchMetric(e)){var i=Date.now(),r=t.getShapeMaps(),s=t.getTextMaps(),o=t.getLinkMaps(),l=t.getEventMaps(),h=t.getValueForMetric(e),u=t.getFormattedValue(h),c=t.getThresholdLevel(h),d=t.data.gradient&&"number"===t.data.type?t.getColorForValue(h):t.getColorForLevel(c);this.variables.set(f.a.CONSTANTS.VAR_STR_RULENAME,t.data.alias),this.variables.set(f.a.CONSTANTS.VAR_NUM_VALUE,h),this.variables.set(f.a.CONSTANTS.VAR_STR_FORMATED,u),this.variables.set(f.a.CONSTANTS.VAR_NUM_LEVEL,c),this.variables.set(f.a.CONSTANTS.VAR_STR_COLOR,d);var p=this.getCellProp(t.data.shapeProp);r.forEach((function(n){var i=n.data.style;if(!n.isHidden()&&n.match(p,t.data.shapeRegEx)){var r=d;a.matched=!0,a.globalLevel=c>a.globalLevel?c:a.globalLevel,n.toColorize(c)&&a.shapeState.set(i,r,c)&&a.status.set(i,r),t.toTooltipize(c)&&(i="tooltip",r=!0,a.tooltipState.set("tooltip",!0,c)&&a.status.set(i,r),a.tooltipState.setTooltip(t,e,d,u)),t.toIconize(c)&&(i="icon",r=!0,a.iconState.set("icon",!0,c)&&a.status.set(i,r))}})),p=this.getCellProp(t.data.textProp),s.forEach((function(e){var n="label";if(!e.isHidden()&&e.match(p,t.data.textRegEx)&&e.toLabelize(c)&&e.toLabelize(c)){a.matched=!0,a.globalLevel=c>a.globalLevel?c:a.globalLevel;var i=a.variables.replaceText(u),r=e.getReplaceText(a.textState.getMatchValue(n),i);a.textState.set(n,r,c)&&a.status.set(n,r)}})),p=this.getCellProp(t.data.eventProp),l.forEach((function(e){var n=e.data.style;if(!e.isHidden()&&e.match(p,t.data.eventRegEx)&&e.toEventable(c)&&e.toEventable(c)){a.matched=!0,a.globalLevel=c>a.globalLevel?c:a.globalLevel;var i=a.variables.eval(e.data.value);a.eventState.set(n,i,c)&&a.status.set(n,i)}})),p=this.getCellProp(t.data.linkProp),o.forEach((function(e){var n="link";if(!e.isHidden()&&e.match(p,t.data.linkRegEx)&&e.toLinkable(c)){a.matched=!0,a.globalLevel=c>a.globalLevel?c:a.globalLevel;var i=a.variables.replaceText(e.getLink());a.linkState.set(n,i,c)&&a.status.set(n,i)}})),c>=t.highestLevel&&this.matched&&(t.highestLevel=c,t.highestValue=h,t.highestFormattedValue=u,t.highestColor=d);var g=Date.now();t.execTimes+=g-i}return n.after(),this}},{key:"unsetState",value:function(){var t=f.a.trace.before(this.constructor.name+".unsetState()");return this.eventState.unset(),this.textState.unset(),this.linkState.unset(),this.tooltipState.unset(),this.iconState.unset(),this.matched=!1,t.after(),this}},{key:"getCellProp",value:function(t){return"id"===t?this.cellId:"value"===t?this.originalText:null}},{key:"getLevel",value:function(){return this.globalLevel}},{key:"getTextLevel",value:function(){return-1===this.globalLevel?"":this.globalLevel.toString()}},{key:"getStatus",value:function(t){var e=this.status.get(t);return null!=e?e:(null===(e=this.xgraph.getStyleCell(this.mxcell,t))&&(e=""),this.status.set(t,e),e)}},{key:"haveStatus",value:function(t){return this.status.has(t)}},{key:"isShape",value:function(){return this.mxcell.isVertex()}},{key:"isConnector",value:function(){return this.mxcell.isEdge()}},{key:"applyState",value:function(){var t=f.a.trace.before(this.constructor.name+".applyState()");return(this.matched||this.changed)&&(this.changed=!0,this.shapeState.apply(),this.tooltipState.apply(),this.iconState.apply(),this.textState.apply(),this.eventState.apply(),this.linkState.apply()),t.after(),this}},{key:"reset",value:function(){var t=f.a.trace.before(this.constructor.name+".reset()");return this.shapeState.reset(),this.tooltipState.reset(),this.iconState.reset(),this.textState.reset(),this.eventState.reset(),this.linkState.reset(),this.variables.clear(),this.status.clear(),this.globalLevel=-1,this.changed=!1,t.after(),this}},{key:"prepare",value:function(){var t=f.a.trace.before(this.constructor.name+".prepare()");return this.changed&&(this.shapeState.prepare(),this.tooltipState.prepare(),this.iconState.prepare(),this.textState.prepare(),this.eventState.prepare(),this.linkState.prepare(),this.variables.clear(),this.status.clear(),this.globalLevel=-1,this.matched=!1),t.after(),this}},{key:"highlightCell",value:function(){return this.xgraph.highlightCell(this.mxcell),this}},{key:"unhighlightCell",value:function(){return this.xgraph.unhighlightCell(this.mxcell),this}}]),t}(),mt=function(){function t(e,a){ft(this,t),this.keys=[],this.matchedKey=new Map,this.changedKey=new Map,this.originalValue=new Map,this.matchValue=new Map,this.matchLevel=new Map,this.xgraph=e,this.mxcell=a,this.init_core()}return gt(t,[{key:"init_core",value:function(){}},{key:"addValue",value:function(e,a){!0!==this.keys.includes(e)&&this.keys.push(e),this.originalValue.set(e,a),this.matchValue.set(e,a),this.matchLevel.set(e,t.DEFAULTLEVEL),this.matchedKey.set(e,!1),this.changedKey.set(e,!1),f.a.log.debug("GFState.addValue from "+this.constructor.name+" ["+this.mxcell.id+"] KEY="+e+" VALUE="+a)}},{key:"getOriginalValue",value:function(t){return this.originalValue.get(t)}},{key:"getMatchValue",value:function(t){return this.matchValue.get(t)}},{key:"set",value:function(t,e,a){var n=this.matchLevel.get(t);return void 0===n?(this.addValue(t,e),this.set(t,e,a)):n<=a&&(this.matchLevel.set(t,a),this.matchedKey.set(t,!0),this.matchValue.set(t,e),!0)}},{key:"apply",value:function(t){var e=this;if(void 0!==t)if(this.isMatched(t)){f.a.log.debug("GFState.apply from "+this.constructor.name+" ["+this.mxcell.id+"] MATCHED KEY="+t);var a=this.getMatchValue(t);try{this.apply_core(t,a)}catch(e){f.a.log.error("Error on reset for key "+t,e)}this.changedKey.set(t,!0),this.matchedKey.set(t,!1)}else this.isChanged(t)&&(f.a.log.debug("GFState.apply from "+this.constructor.name+" ["+this.mxcell.id+"] CHANGED KEY="+t),this.reset(t));else this.keys.forEach((function(t){e.apply(t)}));return this}},{key:"apply_core",value:function(t,e){}},{key:"isMatched",value:function(t){var e=this;if(void 0!==t)return!0===this.matchedKey.get(t);var a=!1;return this.keys.forEach((function(t){a=e.isMatched(t)||a})),a}},{key:"isChanged",value:function(t){var e=this;if(void 0!==t)return!0===this.changedKey.get(t);var a=!1;return this.keys.forEach((function(t){a=!!e.isChanged(t)||a})),a}},{key:"getLevel",value:function(e){var a=this;if(void 0!==e){var n=this.matchLevel.get(e);return void 0!==n?n:t.DEFAULTLEVEL}var i=t.DEFAULTLEVEL;return this.keys.forEach((function(t){return i=Math.max(a.getLevel(t))})),i}},{key:"unset",value:function(t){var e=this;return void 0!==t?(this.matchValue.set(t,this.originalValue.get(t)),this.matchedKey.set(t,!1),this.matchLevel.set(t,-1)):this.keys.forEach((function(t){e.unset(t)})),this}},{key:"reset",value:function(t){var e=this;if(void 0!==t){f.a.log.debug("GFState.reset from "+this.constructor.name+" ["+this.mxcell.id+"] KEY="+t),this.unset(t);var a=this.getOriginalValue(t);try{this.reset_core(t,a)}catch(e){f.a.log.error("Error on reset for key "+t,e)}this.changedKey.set(t,!1),this.matchedKey.set(t,!1)}else this.keys.forEach((function(t){e.reset(t)}));return this}},{key:"reset_core",value:function(t,e){}},{key:"prepare",value:function(){return this.isChanged()&&this.unset(),this}}]),t}();mt.DEFAULTLEVEL=-1;var yt=function(t){function e(t,a){var n;return ft(this,e),(n=ht(this,ut(e).call(this,t,a))).keys=[],n.geo=void 0,n.init_core(),n}return ct(e,t),gt(e,[{key:"init_core",value:function(){var t=this;this.keys=f.a.CONSTANTS.EVENTMETHODS.map((function(t){return t.value})),this.geo=this.xgraph.getSizeCell(this.mxcell),this.keys.forEach((function(e){var a=t._get(e);t.addValue(e,a)}))}},{key:"apply_core",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:void 0===e&&(e=null),this._set(t,e);case 2:case"end":return a.stop()}}),a,this)})))}},{key:"reset_core",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:void 0===e&&(e=null),this._set(t,e);case 2:case"end":return a.stop()}}),a,this)})))}},{key:"_set",value:function(t,e){void 0===e&&(e=null);var a=void 0;switch(t){case"text":e=String(e),this.xgraph.setLabelCell(this.mxcell,e);break;case"visibility":"0"===(e=String(e))?this.xgraph.hideCell(this.mxcell):"1"===e&&this.xgraph.showCell(this.mxcell);break;case"fold":"0"===(e=String(e))?this.xgraph.collapseCell(this.mxcell):"1"===e&&this.xgraph.expandCell(this.mxcell);break;case"height":if(void 0!==this.geo){var n=Number(e);if(this.isMatched("height")){var i=this.isMatched("width")?Number(this.getMatchValue("width")):void 0;this.xgraph.resizeCell(this.mxcell,i,n,this.geo),this.unset("width")}else this.isMatched("width")||(this.xgraph.resetSizeCell(this.mxcell,this.geo),this.unset("width"))}break;case"width":if(void 0!==this.geo){var r=Number(e);if(this.isMatched("width")){var s=this.isMatched("height")?Number(this.getMatchValue("height")):void 0;this.xgraph.resizeCell(this.mxcell,r,s,this.geo),this.unset("width")}else this.isMatched("height")||(this.xgraph.resetSizeCell(this.mxcell,this.geo),this.unset("height"))}break;case"barPos":case"fontSize":case"opacity":case"textOpacity":case"rotation":a=void 0===(a=this._get(t))?T.getDefaultValue(t):a,this.xgraph.setStyleAnimCell(this.mxcell,t,e,a);break;case"blink":e?this.xgraph.blinkCell(this.mxcell,e):this.xgraph.unblinkCell(this.mxcell);break;default:this.xgraph.setStyleCell(this.mxcell,t,e)}}},{key:"_get",value:function(t){switch(t){case"text":return this.xgraph.getLabelCell(this.mxcell);case"visibility":return!1===this.xgraph.isVisibleCell(this.mxcell)?"0":"1";case"height":return void 0!==this.geo?this.geo.height:void 0;case"width":return void 0!==this.geo?this.geo.width:void 0;case"fold":return!0===this.xgraph.isCollapsedCell(this.mxcell)?"0":"1";case"blink":return this.xgraph.geBlinkMxCell(this.mxcell);default:return this.xgraph.getStyleCell(this.mxcell,t)}}}]),e}(mt),bt=function(t){function e(t,a){var n;return ft(this,e),(n=ht(this,ut(e).call(this,t,a))).keys=["label"],n.init_core(),n}return ct(e,t),gt(e,[{key:"init_core",value:function(){var t=this.xgraph.getLabelCell(this.mxcell);this.addValue("label",t)}},{key:"apply_core",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.xgraph.setLabelCell(this.mxcell,e);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"reset_core",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.xgraph.setLabelCell(this.mxcell,e);case 1:case"end":return t.stop()}}),t,this)})))}}]),e}(mt),xt=function(t){function e(t,a){var n;return ft(this,e),(n=ht(this,ut(e).call(this,t,a))).keys=["link"],n.init_core(),n}return ct(e,t),gt(e,[{key:"init_core",value:function(){var t=this.xgraph.getLink(this.mxcell);this.addValue("link",t)}},{key:"apply_core",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.xgraph.addLink(this.mxcell,e);case 1:case"end":return t.stop()}}),t,this)})))}},{key:"reset_core",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null==e||0===e.length?this.xgraph.removeLink(this.mxcell):this.xgraph.addLink(this.mxcell,e);case 1:case"end":return t.stop()}}),t,this)})))}}]),e}(mt),wt=function(t){function e(t,a){var n;return ft(this,e),(n=ht(this,ut(e).call(this,t,a))).keys=[],n.init_core(),n}return ct(e,t),gt(e,[{key:"init_core",value:function(){var t=this;f.a.log.info("ShapeState ["+this.mxcell.id+"]"),this.keys=f.a.CONSTANTS.COLORMETHODS.map((function(t){return t.value})),this.fullStylesString=this.mxcell.getStyle(),this.keys.forEach((function(e){var a=t.xgraph.getStyleCell(t.mxcell,e);t.addValue(e,a),f.a.log.debug("ShapeState ["+t.mxcell.id+"] Add value : "+e,a)})),this.mxcell.GF_tooltipHandler=null}},{key:"apply_core",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:void 0===e&&(e=null),this.xgraph.setColorAnimCell(this.mxcell,t,e);case 2:case"end":return a.stop()}}),a,this)})))}},{key:"reset_core",value:function(t,e){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:void 0===e&&(e=null),this.xgraph.setColorAnimCell(this.mxcell,t,e);case 2:case"end":return a.stop()}}),a,this)})))}}]),e}(mt),kt=function(t){function e(t,a){var n;return ft(this,e),(n=ht(this,ut(e).call(this,t,a))).keys=["tooltip"],n.init_core(),n}return ct(e,t),gt(e,[{key:"init_core",value:function(){this.addValue("tooltip",!1),this.tooltipHandler=void 0,this.mxcell.GF_tooltipHandler=null}},{key:"setTooltip",value:function(t,e,a,n){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function i(){var r,s,o;return regeneratorRuntime.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:r=null,s=t.data.tooltipLabel,null!==this.tooltipHandler&&void 0!==this.tooltipHandler||(this.tooltipHandler=new at(this.mxcell)),null!==s&&0!==s.length||("serie"===t.data.metricType&&(s=e.getName()),"table"===t.data.metricType&&(s=t.data.column)),t.data.tooltipColors&&(r=a),o=this.tooltipHandler.addMetric().setLabel(s).setValue(n).setColor(r).setDirection(t.data.tpDirection),t.data.tpGraph&&o.addGraph(t.data.tpGraphType).setColor(r).setColumn(t.data.column).setMetric(e).setSize(t.data.tpGraphSize).setScaling(t.data.tpGraphLow,t.data.tpGraphHigh).setScale(t.data.tpGraphScale),this.tooltipHandler.updateDate();case 8:case"end":return i.stop()}}),i,this)})))}},{key:"apply",value:function(t){var a=this;return void 0!==t&&"tooltip"===t?this.isMatched(t)&&!0===this.getMatchValue(t)&&(null!=this.tooltipHandler&&this.tooltipHandler.isChecked()&&(this.mxcell.GF_tooltipHandler=this.tooltipHandler),ot(ut(e.prototype),"apply",this).call(this,t)):this.keys.forEach((function(t){a.apply(t)})),this}},{key:"prepare",value:function(){return ot(ut(e.prototype),"prepare",this).call(this),this.reset(),this}},{key:"reset",value:function(t){var a=this;return void 0!==t&&"tooltip"===t?(this.mxcell.GF_tooltipHandler=null,this.tooltipHandler&&this.tooltipHandler.destroy(),this.tooltipHandler=void 0,ot(ut(e.prototype),"reset",this).call(this,t)):this.keys.forEach((function(t){a.reset(t)})),this}}]),e}(mt),_t=function(t){function e(t,a){var n;return ft(this,e),(n=ht(this,ut(e).call(this,t,a))).keys=["icon"],n.init(),n}return ct(e,t),gt(e,[{key:"init",value:function(){this.addValue("icon",!1)}},{key:"apply",value:function(t){var a=this;return void 0!==t&&"icon"===t?this.isMatched(t)&&!0===this.getMatchValue(t)?(this.isChanged(t)||this.xgraph.addOverlay("WARNING/ERROR",this.mxcell),ot(ut(e.prototype),"apply",this).call(this,t)):this.isChanged(t)&&this.reset(t):this.keys.forEach((function(t){a.apply(t)})),this}},{key:"reset",value:function(t){var a=this;return void 0!==t&&"icon"===t?(this.xgraph.removeOverlay(this.mxcell),ot(ut(e.prototype),"reset",this).call(this,t)):this.keys.forEach((function(t){a.reset(t)})),this}}]),e}(mt);function St(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ct=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.edited=!1,f.a.log.info("StateHandler.constructor()"),this.states=new Map,this.xgraph=e,this.initStates(this.xgraph)}var e,a,n;return e=t,(a=[{key:"initStates",value:function(t){var e=this;f.a.log.info("StateHandler.initStates()"),this.xgraph=t,this.states.clear();var a=t.getMxCells();return d.a.each(a,(function(t){e.addState(t)})),this}},{key:"getStatesForRule",value:function(t){f.a.log.info("StateHandler.getStatesForRule()");var e,a=new Map,n=this.xgraph;return this.states.forEach((function(i){var r=i.mxcell,s=r.id,o=!1;null!==(e=n.getValuePropOfMxCell(t.data.shapeProp,r))&&t.matchShape(e)&&(a.set(s,i),o=!0),o||(e=n.getValuePropOfMxCell(t.data.textProp,r),t.matchText(e)&&(a.set(s,i),o=!0)),o||(e=n.getValuePropOfMxCell(t.data.linkProp,r),t.matchLink(e)&&(a.set(s,i),o=!0)),o||(e=n.getValuePropOfMxCell(t.data.eventProp,r),t.matchEvent(e)&&(a.set(s,i),o=!0))})),a}},{key:"updateStates",value:function(t){var e=this;f.a.log.info("StateHandler.updateStates()"),t.forEach((function(t){t.states=e.getStatesForRule(t)}))}},{key:"getStates",value:function(){return this.states}},{key:"getStatesForInspect",value:function(){var t=[];return this.states.forEach((function(e){t.push(e)})),t}},{key:"getState",value:function(t){return this.states.get(t)}},{key:"addState",value:function(t){var e=new vt(t,this.xgraph);return this.states.set(t.id,e),e}},{key:"countStates",value:function(){return this.states.size}},{key:"prepare",value:function(){var t=f.a.trace.before(this.constructor.name+".prepare()");return this.states.forEach((function(t){t.prepare()})),t.after(),this}},{key:"setStates",value:function(t,e){var a=this,n=f.a.trace.before(this.constructor.name+".setStates()");return this.prepare(),t.forEach((function(t){t.highestLevel=-1,t.highestFormattedValue="",t.highestColor="",t.highestValue="",t.execTimes=0,void 0!==t.states&&0!==t.states.size||(t.states=a.getStatesForRule(t)),t.states.forEach((function(a){e.forEach((function(e){a.setState(t,e)}))}))})),n.after(),this}},{key:"applyStates",value:function(){var t=f.a.trace.before(this.constructor.name+".setStates()");return this.states.forEach((function(t){t.async_applyState()})),t.after(),this}},{key:"async_applyStates",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:this.applyStates();case 1:case"end":return t.stop()}}),t,this)})))}}])&&St(e.prototype,a),n&&St(e,n),t}();function Et(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Ot=function(){function t(e,a,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.xgraph=void 0,this.data=i,this.data.name=e,this.container=a,this.templateSrv=n.templateSrv}var e,a,n;return e=t,n=[{key:"getDefaultData",value:function(){return{name:"name",xml:Mt.getDefaultGraph(),csv:"",download:!1,type:"xml",url:"http://<YourUrl>/<Your XML/drawio file/api>",zoom:"100%",center:!0,scale:!0,lock:!0,allowDrawio:!1,enableAnim:!0,tooltip:!0,grid:!1,bgColor:null,editorUrl:"https://www.draw.io",editorTheme:"dark"}}}],(a=[{key:"import",value:function(t){return f.a.log.info("flowchart[".concat(this.data.name,"].import()")),(t.download||!1===this.data.download)&&(this.data.download=t.download),t.source&&(this.data.type=t.source.type,this.data.xml=t.source.xml.value,this.data.url=t.source.url.value),t.options&&(this.data.zoom=t.options.zoom,this.data.center=t.options.center,this.data.scale=t.options.scale,this.data.lock=t.options.lock,this.data.allowDrawio=!1,this.data.tooltip=t.options.tooltip,this.data.grid=t.options.grid,this.data.bgColor=t.options.bgColor),t.type&&(this.data.type=t.type),t.xml&&(this.data.xml=t.xml),t.url&&(this.data.url=t.url),t.zoom&&(this.data.zoom=t.zoom),(t.center||!1===t.center)&&(this.data.center=t.center),(t.scale||!1===t.scale)&&(this.data.scale=t.scale),(t.lock||!1===t.lock)&&(this.data.lock=t.lock),(t.allowDrawio||!1===t.allowDrawio)&&(this.data.allowDrawio=t.allowDrawio),(t.enableAnim||!1===t.enableAnim)&&(this.data.enableAnim=t.enableAnim),t.tooltip&&(this.data.tooltip=t.tooltip),(t.grid||!1===t.grid)&&(this.data.grid=t.grid),t.bgColor&&(this.data.bgColor=t.bgColor),t.editorUrl&&(this.data.editorUrl=t.editorUrl),t.editorTheme&&(this.data.editorTheme=t.editorTheme),this.init(),this}},{key:"getData",value:function(){return this.data}},{key:"updateStates",value:function(t){var e=this,a=f.a.trace.before(this.constructor.name+".updateStates()");return t.forEach((function(t){void 0!==e.stateHandler?(t.states=e.stateHandler.getStatesForRule(t),t.states?t.states.forEach((function(t){t.unsetState()})):f.a.log.warn("States not defined for this rule")):f.a.log.error("updateStates => this.stateHandler undefined")})),a.after(),this}},{key:"init",value:function(){f.a.log.info("flowchart[".concat(this.data.name,"].init()"));try{void 0===this.xgraph&&(this.xgraph=new I(this.container,this.data.type,this.getContent())),void 0!==this.data.xml&&null!==this.data.xml?(this.data.download&&this.xgraph.setXmlGraph(this.getContent()),this.data.allowDrawio?this.xgraph.allowDrawio(!0):this.xgraph.allowDrawio(!1),this.data.enableAnim?this.xgraph.enableAnim(!0):this.xgraph.enableAnim(!1),this.setOptions(),this.xgraph.drawGraph(),this.data.tooltip&&this.xgraph.tooltipGraph(!0),this.data.scale?this.xgraph.scaleGraph(!0):this.xgraph.zoomGraph(this.data.zoom),this.data.center&&this.xgraph.centerGraph(!0),this.data.lock&&this.xgraph.lockGraph(!0),this.stateHandler=new Ct(this.xgraph)):f.a.log.error("XML Graph not defined")}catch(t){f.a.log.error("Unable to initialize graph",t)}return this}},{key:"getStateHandler",value:function(){return this.stateHandler}},{key:"getXGraph",value:function(){return this.xgraph}},{key:"setStates",value:function(t,e){return f.a.log.info("flowchart[".concat(this.data.name,"].setStates()")),void 0===t&&f.a.log.warn("Rules shoudn't be null"),void 0===e&&f.a.log.warn("Metrics shoudn't be null"),this.stateHandler&&this.stateHandler.setStates(t,e),this}},{key:"setOptions",value:function(){var t=f.a.trace.before(this.constructor.name+".setOptions()");return this.setScale(this.data.scale),this.setCenter(this.data.center),this.setGrid(this.data.grid),this.setTooltip(this.data.tooltip),this.setLock(this.data.lock),this.setZoom(this.data.zoom),this.setBgColor(this.data.bgColor),t.after(),this}},{key:"applyStates",value:function(){return f.a.log.info("flowchart[".concat(this.data.name,"].applyStates()")),this.stateHandler&&this.stateHandler.applyStates(),this}},{key:"applyOptions",value:function(){var t=f.a.trace.before(this.constructor.name+".applyOptions()");this.xgraph&&this.xgraph.applyGraph(),t.after()}},{key:"refresh",value:function(){this.xgraph&&this.xgraph.refresh()}},{key:"redraw",value:function(t){f.a.log.info("flowchart[".concat(this.data.name,"].redraw()")),void 0!==t?(this.data.xml=t,this.xgraph&&this.xgraph.setXmlGraph(this.getXml(!0))):(f.a.log.warn("XML Content not defined"),this.xgraph&&this.xgraph.setXmlGraph(this.getXml(!0))),this.applyOptions()}},{key:"reload",value:function(){f.a.log.info("flowchart[".concat(this.data.name,"].reload()")),void 0!==this.xgraph&&null!==this.xgraph?(this.xgraph.destroyGraph(),this.xgraph=void 0,this.init()):this.init()}},{key:"setLock",value:function(t){return this.data.lock=t,this.xgraph&&(this.xgraph.lock=t),this}},{key:"applyLock",value:function(t){return void 0!==t&&(this.data.lock=t),this.xgraph&&this.xgraph.lockGraph(this.data.lock),this}},{key:"setTooltip",value:function(t){return this.data.tooltip=t,this.xgraph&&(this.xgraph.tooltip=t),this}},{key:"applyTooltip",value:function(t){return void 0!==t&&(this.data.tooltip=t),this.xgraph&&this.xgraph.tooltipGraph(this.data.tooltip),this}},{key:"setScale",value:function(t){return this.data.scale=t,this.xgraph&&(this.xgraph.scale=t),this}},{key:"setBgColor",value:function(t){return this.data.bgColor=t,this.xgraph&&(this.xgraph.bgColor=t),this}},{key:"ApplyBgColor",value:function(t){return this.data.bgColor=t,t&&this.xgraph&&this.xgraph.bgGraph(t),this}},{key:"applyScale",value:function(t){return f.a.log.info("Flowchart.scale()"),void 0!==t&&(this.data.scale=t),this.xgraph&&this.xgraph.scaleGraph(this.data.scale),this}},{key:"setCenter",value:function(t){return this.data.center=t,this.xgraph&&(this.xgraph.center=t),this}},{key:"getNamesByProp",value:function(t){return this.xgraph?this.xgraph.getOrignalCells(t):[]}},{key:"getXml",value:function(t){return f.a.log.info("flowchart[".concat(this.data.name,"].getXml()")),t?this.templateSrv.replaceWithText(this.data.xml):this.data.xml}},{key:"getCsv",value:function(t){return f.a.log.info("flowchart[".concat(this.data.name,"].getXml()")),t?this.templateSrv.replaceWithText(this.data.csv):this.data.csv}},{key:"getUrlEditor",value:function(){return this.data.editorUrl}},{key:"getThemeEditor",value:function(){return this.data.editorTheme}},{key:"getContent",value:function(){if(f.a.log.info("flowchart[".concat(this.data.name,"].getContent()")),this.data.download){var t=this.templateSrv.replaceWithText(this.data.url),e=this.loadContent(t);return null!==e?e:""}return"xml"===this.data.type?this.getXml(!0):"csv"===this.data.type?this.getCsv(!0):(f.a.log.error("type unknow",this.data.type),"")}},{key:"loadContent",value:function(t){return I.loadXml(t)}},{key:"renameId",value:function(t,e){return this.xgraph&&this.xgraph.renameId(t,e),this}},{key:"applyModel",value:function(){return this.xgraph&&(this.data.xml=this.xgraph.getXmlModel()),this.redraw(this.data.xml),this}},{key:"center",value:function(t){return void 0!==t&&(this.data.center=t),this.xgraph&&this.xgraph.centerGraph(this.data.center),this}},{key:"setZoom",value:function(t){return this.data.zoom=t,this.xgraph&&(this.xgraph.zoomPercent=t),this}},{key:"zoom",value:function(t){return void 0!==t&&(this.data.zoom=t),this.xgraph&&this.xgraph.zoomGraph(this.data.zoom),this}},{key:"setGrid",value:function(t){return this.data.grid=t,this.xgraph&&(this.xgraph.grid=t),this}},{key:"grid",value:function(t){return void 0!==t&&(this.data.grid=t),this.xgraph&&this.xgraph.gridGraph(this.data.grid),this}},{key:"setXml",value:function(t){return this.data.xml=t,this}},{key:"minify",value:function(){this.data.xml=f.a.utils.minify(this.data.xml)}},{key:"prettify",value:function(){this.data.xml=f.a.utils.prettify(this.data.xml)}},{key:"decode",value:function(){f.a.utils.isencoded(this.data.xml)&&(this.data.xml=f.a.utils.decode(this.data.xml,!0,!0,!0))}},{key:"encode",value:function(){f.a.utils.isencoded(this.data.xml)||(this.data.xml=f.a.utils.encode(this.data.xml,!0,!0,!0))}},{key:"getContainer",value:function(){return this.container}},{key:"setMap",value:function(t){f.a.log.info("flowchart[".concat(this.data.name,"].setMap()"));var e=this.getContainer();this.xgraph&&this.xgraph.setMap(t),e.scrollIntoView(),e.focus()}},{key:"unsetMap",value:function(){this.xgraph&&this.xgraph.unsetMap()}}])&&Et(e.prototype,a),n&&Et(e,n),t}();function Tt(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var Mt=function(){function t(e,a,n,i){var r=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.flowcharts=[],this.currentFlowchart="Main",this.firstLoad=!0,this.changeSourceFlag=!1,this.changeOptionFlag=!0,this.changeDataFlag=!1,this.changeRuleFlag=!1,this.onMapping={active:!1,object:null,value:null,prop:"id",$scope:null},this.mousedownTimeout=0,this.mousedown=0,this.onEdit=!1,this.editorWindow=null,f.a.log.info("FlowchartHandler.constructor()"),t.getDefaultGraph(),this.$scope=e,this.$elem=a.find(".flowchart-panel__chart"),this.parentDiv=this.$elem[0],this.ctrl=n,this.data=i,n.events.on("render",(function(){r.render()})),document.body.onmousedown=function(){r.mousedown=0,window.clearInterval(r.mousedownTimeout),r.mousedownTimeout=window.setInterval((function(){r.mousedown+=1}),200)},document.body.onmouseup=function(){r.mousedown=0,window.clearInterval(r.mousedownTimeout)}}var e,a,n;return e=t,n=[{key:"getDefaultData",value:function(){return{flowcharts:[]}}},{key:"getDefaultGraph",value:function(){var e=t.defaultXml;if(!e){var a="".concat(f.a.plugin.getRootPath()).concat(f.a.CONSTANTS.CONF_FILE_DEFAULTGRAPH);$.ajax({type:"GET",url:a,async:!1,success:function(e){t.defaultXml=e},error:function(){alert("Error when download "+a)}})}return e}}],(a=[{key:"import",value:function(t){var e=this;return f.a.log.info("FlowchartHandler.import()"),this.flowcharts=[],null!=t&&(Array.isArray(t)?t:t.flowcharts).forEach((function(t){var a=e.createContainer(),n=Ot.getDefaultData(),i=new Ot(t.name,a,e.ctrl,n);i.import(t),e.flowcharts.push(i),e.data.flowcharts.push(n)})),this}},{key:"getFlowchart",value:function(t){return this.flowcharts[0]}},{key:"getFlowcharts",value:function(){return this.flowcharts}},{key:"countFlowcharts",value:function(){return void 0!==this.flowcharts&&Array.isArray(this.flowcharts)?this.flowcharts.length:0}},{key:"createContainer",value:function(){var t=document.createElement("div");return t.style.margin="auto",t.style.position="relative",t.style.width="100%",t.style.height="100%",t.style.touchAction="none",t.style.border="none",t.style.cursor="default",t.style.right="0px",t.style.left="0px",t.style.bottom="0px",t.style.top="0px",this.parentDiv.appendChild(t),t}},{key:"addFlowchart",value:function(t){var e=f.a.trace.before(this.constructor.name+".addFlowchart()"),a=this.createContainer(),n=Ot.getDefaultData(),i=new Ot(t,a,this.ctrl,n);return i.init(),this.data.flowcharts.push(n),this.flowcharts.push(i),e.after(),i}},{key:"render",value:function(){return Object(i.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var e,a,n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e=f.a.trace.before(this.constructor.name+".render()"),this.mousedown||(a=!0,(n=this).changeSourceFlag&&(n.load(),n.changeSourceFlag=!1,n.changeRuleFlag=!0,a=!0),n.changeOptionFlag&&(n.setOptions(),n.changeOptionFlag=!1,a=!0),(n.changeRuleFlag||n.changeDataFlag)&&(i=n.ctrl.rulesHandler.getRules(),r=n.ctrl.metricHandler.getMetrics(),n.async_refreshStates(i,r),n.changeDataFlag=!1,a=!1),(a||n.firstLoad)&&(n.applyOptions(),a=!1,n.firstLoad=!1)),this.ctrl.renderingCompleted(),e.after();case 4:case"end":return t.stop()}}),t,this)})))}},{key:"sourceChanged",value:function(){return this.changeSourceFlag=!0,this}},{key:"optionChanged",value:function(){return this.changeOptionFlag=!0,this}},{key:"ruleChanged",value:function(){return this.changeRuleFlag=!0,this}},{key:"dataChanged",value:function(){return this.changeDataFlag=!0,this}},{key:"applyOptions",value:function(){var t=f.a.trace.before(this.constructor.name+".applyOptions()");return this.flowcharts.forEach((function(t){t.applyOptions()})),t.after(),this}},{key:"async_refreshStates",value:function(t,e){var a=f.a.trace.before(this.constructor.name+".async_refreshStates()");this.refreshStates(t,e),a.after()}},{key:"refreshStates",value:function(t,e){var a=f.a.trace.before(this.constructor.name+".refreshStates()");return this.changeRuleFlag&&(this.updateStates(t),this.changeRuleFlag=!1),this.setStates(t,e),this.applyStates(),a.after(),this}},{key:"refresh",value:function(){return this.flowcharts.forEach((function(t){t.refresh()})),this}},{key:"setStates",value:function(t,e){var a=f.a.trace.before(this.constructor.name+".setStates()");return this.flowcharts.forEach((function(a){a.setStates(t,e)})),a.after(),this}},{key:"updateStates",value:function(t){var e=f.a.trace.before(this.constructor.name+".updateStates()");return this.flowcharts.forEach((function(e){e.updateStates(t)})),e.after(),this}},{key:"applyStates",value:function(){var t=this,e=f.a.trace.before(this.constructor.name+".applyStates()");return new Promise((function(){t.flowcharts.forEach((function(t){t.applyStates()}))})).then((function(){t.refresh()})),e.after(),this}},{key:"setOptions",value:function(){var t=f.a.trace.before(this.constructor.name+".setOptions()");return this.flowcharts.forEach((function(t){t.setOptions()})),t.after(),this}},{key:"draw",value:function(){return f.a.log.info("FlowchartHandler.draw()"),this.flowcharts.forEach((function(t){t.redraw()})),this}},{key:"load",value:function(){return f.a.log.info("FlowchartHandler.load()"),this.flowcharts.forEach((function(t){t.reload()})),this}},{key:"setMap",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"id",a=this.getFlowchart(this.currentFlowchart);return this.onMapping.active=!0,this.onMapping.object=t,this.onMapping.value=t.getId(),this.onMapping.$scope=this.$scope,this.onMapping.prop=e,a.setMap(this.onMapping),this}},{key:"unsetMap",value:function(){var t=this.getFlowchart(this.currentFlowchart);return this.onMapping.active=!1,this.onMapping.object=void 0,this.onMapping.value="",t.unsetMap(),this}},{key:"isMapping",value:function(t){return void 0===t||null==t?this.onMapping.active:!0===this.onMapping.active&&t===this.onMapping.object}},{key:"listenMessage",value:function(t){"ready"===t.data?t.source.postMessage(this.getFlowchart(this.currentFlowchart).data.xml,t.origin):(this.onEdit&&void 0!==t.data&&t.data.length>0&&(this.getFlowchart(this.currentFlowchart).redraw(t.data),this.sourceChanged(),this.$scope.$apply(),this.render()),(this.onEdit&&void 0!==t.data||0===t.data.length)&&(this.editorWindow&&this.editorWindow.close(),this.onEdit=!1,window.removeEventListener("message",this.listenMessage.bind(this),!1)))}},{key:"openDrawEditor",value:function(t){var e=this.getFlowchart(t).getUrlEditor(),a=this.getFlowchart(t).getThemeEditor(),n="".concat(e,"?embed=1&spin=1&libraries=1&ui=").concat(a,"&src=grafana");this.editorWindow=window.open(n,"MxGraph Editor","width=1280, height=720"),this.onEdit=!0,window.addEventListener("message",this.listenMessage.bind(this),!1)}},{key:"getFlowchartNames",value:function(){return this.flowcharts.map((function(t){return t.data.name}))}}])&&Tt(e.prototype,a),n&&Tt(e,n),t}();function At(t){return(At="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Rt(t,e){return!e||"object"!==At(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nt(t){return(Nt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Lt(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dt(t,e)}function Dt(t,e){return(Dt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Pt(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function It(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function zt(t,e,a){return e&&It(t.prototype,e),a&&It(t,a),t}var Ft=function(){function t(e){Pt(this,t),this.type="unknow",this.metrics={},this.name="",this.nullPointMode="connected"}return zt(t,[{key:"getName",value:function(){return void 0!==this.name&&null!==this.name||f.a.log.error("Metric => getName : Name is null"),this.name}},{key:"getValue",value:function(t,e){return null}},{key:"getData",value:function(t){arguments.length>1&&void 0!==arguments[1]&&arguments[1];return[]}},{key:"getColumnsName",value:function(){return[]}}]),t}(),Ht=function(t){function e(t){var a;return Pt(this,e),(a=Rt(this,Nt(e).call(this,t))).type="serie",a.metrics=a.seriesHandler(t),a.name=a.metrics.alias,a}return Lt(e,t),zt(e,[{key:"seriesHandler",value:function(t){var e=u.getTimeSeries(t);return e.flotpairs=e.getFlotPairs(this.nullPointMode),e}},{key:"getValue",value:function(t){try{var e=this.metrics.stats[t];return null==e&&(e=this.metrics.datapoints[this.metrics.datapoints.length-1][0]),e}catch(t){return f.a.log.error("datapoint for serie is null",t),null}}},{key:"getData",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.metrics.flotpairs.map((function(e){return t?{x:e[0],y:Math.log10(e[1])}:{x:e[0],y:e[1]}}))}},{key:"getColumnsName",value:function(){return["time","value"]}}]),e}(Ft),Vt=function(t){function e(t){var a;return Pt(this,e),(a=Rt(this,Nt(e).call(this,t))).tableColumnOptions={},a.tableColumn="",a.allIsNull=!0,a.allIsZero=!0,a.type="table",a.name=t.refId,a.metrics=a.tableHandler(t),a}return Lt(e,t),zt(e,[{key:"tableHandler",value:function(t){var e={datapoints:[],columnNames:{},stats:{}};return t.columns.forEach((function(t,a){e.columnNames[a]=t.text,"time"===t.text.toString().toLowerCase()&&(e.timeIndex=a,e.timeColumn=t.text)})),this.tableColumnOptions=e.columnNames,d.a.find(t.columns,["text",this.tableColumn])||this.setTableColumnToSensibleDefault(t),t.rows.forEach((function(t){var a={};t.forEach((function(t,n){var i=e.columnNames[n];a[i]=t})),e.datapoints.push(a)})),this.metrics.flotpairs=this.getFlotPairs(this.nullPointMode,e),e}},{key:"setTableColumnToSensibleDefault",value:function(t){1===t.columns.length?this.tableColumn=t.columns[0].text:this.tableColumn=d.a.find(t.columns,(function(t){return"time"!==t.type})).text}},{key:"getFlotPairs",value:function(t,e){var a=[],n="connected"===t,i="null as zero"===t;for(var r in e.allIsNull=!0,e.allIsZero=!0,e.columnNames){var s=e.columnNames[r];e.stats[s]={},e.stats[s].name=s,e.stats[s].total=0,e.stats[s].max=-Number.MAX_VALUE,e.stats[s].min=Number.MAX_VALUE,e.stats[s].logmin=Number.MAX_VALUE,e.stats[s].avg=null,e.stats[s].current=null,e.stats[s].first=null,e.stats[s].delta=0,e.stats[s].diff=null,e.stats[s].range=null,e.stats[s].timeStep=Number.MAX_VALUE;var o=void 0,l=void 0,h=0,u=void 0,c=0,p=!0;try{for(var g=0;g<e.datapoints.length;g++){if(e.timeColumn&&(o=e.datapoints[g][e.timeColumn]),l=e.datapoints[g][s],void 0!==u){var v=o-u;v<e.stats[s].timeStep&&(e.stats[s].timeStep=v)}if(u=o,null===l){if(n)continue;i&&(l=0)}null!==l&&(d.a.isNumber(l)&&(e.stats[s].total+=l,this.allIsNull=!1,h++),l>e.stats[s].max&&(e.stats[s].max=l),l<e.stats[s].min&&(e.stats[s].min=l),null===e.stats[s].first?e.stats[s].first=l:c>l?(p=!1,g===e.datapoints.length-1&&(e.stats[s].delta+=l)):(e.stats[s].delta+=p?l-c:l,p=!0),c=l,l<e.stats[s].logmin&&l>0&&(e.stats[s].logmin=l),0!==l&&(this.allIsZero=!1)),a.push([o,l])}}catch(t){f.a.log.error("Unable to aggregate data",t)}e.stats[s].max===-Number.MAX_VALUE&&(e.stats[s].max=null),e.stats[s].min===Number.MAX_VALUE&&(e.stats[s].min=null),a.length&&!this.allIsNull&&(e.stats[s].avg=e.stats[s].total/h,e.stats[s].current=a[a.length-1][1],null===e.stats[s].current&&a.length>1&&(e.stats[s].current=a[a.length-2][1])),null!==e.stats[s].max&&null!==e.stats[s].min&&(e.stats[s].range=e.stats[s].max-e.stats[s].min),null!==e.stats[s].current&&null!==e.stats[s].first&&(e.stats[s].diff=e.stats[s].current-e.stats[s].first),e.stats[s].count=a.length}return a}},{key:"getValue",value:function(t,e){try{var a=this.metrics.stats[e][t];return null==a&&(a=this.metrics.datapoints[this.metrics.datapoints.length-1][e]),a}catch(t){return f.a.log.error("datapoint for table is null",t),null}}},{key:"getColumnIndex",value:function(t){for(var e in this.tableColumnOptions)if(t===this.tableColumnOptions[e])return Number(e);return null}},{key:"getColumnsName",value:function(){var t=[];for(var e in this.tableColumnOptions)t.push(this.tableColumnOptions[e]);return t}},{key:"getData",value:function(t){var e=this;return this.metrics.timeColumn?this.metrics.datapoints.map((function(a){return{x:a[e.metrics.timeColumn],y:a[t]}})):this.metrics.datapoints.map((function(e){return e[t]}))}}]),e}(Ft);function Gt(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var jt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tables=[],this.series=[],this.metrics=[],this.$scope=e}var e,a,n;return e=t,(a=[{key:"initData",value:function(t){var e=this;f.a.log.info("initData"),this.tables=[],this.series=[],this.metrics=[],t.forEach((function(t){e.addMetric(t)}))}},{key:"addMetric",value:function(t){"table"===t.type?this.addTable(t):this.addSerie(t)}},{key:"addTable",value:function(t){f.a.log.info("addTable");var e=new Vt(t);return this.tables.push(e),this.metrics.push(e),e}},{key:"addSerie",value:function(t){f.a.log.info("addSerie");var e=new Ht(t);return this.series.push(e),this.metrics.push(e),e}},{key:"getNames",value:function(t){return"serie"===t?this.series.map((function(t){return t.getName()})):"table"===t?this.tables.map((function(t){return t.getName()})):this.metrics.map((function(t){return t.getName()}))}},{key:"getMetrics",value:function(t){return"serie"===t?this.series:"table"===t?this.tables:this.metrics}},{key:"isTypeOf",value:function(t){return"serie"===t?this.series.length>0:"table"===t&&this.tables.length>0}},{key:"findMetrics",value:function(t,e){var a=[];return e?("table"===e&&(a=this.tables.filter((function(e){return e.getName()===t}))),"serie"===e&&(a=this.series.filter((function(e){return e.getName()===t})))):a=this.metrics.filter((function(e){return e.getName()===t})),a}},{key:"getColumnsName",value:function(t,e){var a=this.findMetrics(t,e),n=[];return a.forEach((function(t){n=n.concat(t.getColumnsName())})),n}}])&&Gt(e.prototype,a),n&&Gt(e,n),t}();function Bt(t){return(Bt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ut(t,e){for(var a=0;a<e.length;a++){var n=e[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function Yt(t){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Xt(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zt(t,e){return(Zt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var $t=function(t){function e(t,a,n,i){var r,s,o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),s=this,r=!(o=Yt(e).call(this,t,a))||"object"!==Bt(o)&&"function"!=typeof o?Xt(s):o,f.a.init(t,i),r.$rootScope=n,r.$scope=t,r.version=f.a.plugin.getVersion(),r.templateSrv=i,r.changedSource=!0,r.changedData=!0,r.changedOptions=!0,r.rulesHandler=void 0,r.flowchartHandler=void 0,r.metricHandler=void 0,r.panelDefaults={newFlag:!0,format:"short",valueName:"current",rulesData:U.getDefaultData(),flowchartsData:Mt.getDefaultData()},d.a.defaults(r.panel,r.panelDefaults),r.panel.graphId="flowchart_".concat(r.panel.id),r.containerDivId="container_".concat(r.panel.graphId),r.events.on(h.PanelEvents.render,r.onRender.bind(Xt(r))),r.events.on(h.PanelEvents.refresh,r.onRefresh.bind(Xt(r))),r.events.on(h.PanelEvents.dataReceived,r.onDataReceived.bind(Xt(r))),r.events.on(h.PanelEvents.dataError,r.onDataError.bind(Xt(r))),r.events.on(h.PanelEvents.dataSnapshotLoad,r.onDataReceived.bind(Xt(r))),r.events.on(h.PanelEvents.editModeInitialized,r.onInitEditMode.bind(Xt(r))),r.events.on("template-variable-value-updated",r.onVarChanged.bind(Xt(r))),r.dashboard.events.on("template-variable-value-updated",r.onVarChanged.bind(Xt(r)),t),t.$root.onAppEvent&&t.$root.onAppEvent("template-variable-value-updated",r.onVarChanged.bind(Xt(r)),t),r}var a,n,i;return e.$inject=["$scope","$injector","$rootScope","templateSrv"],function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Zt(t,e)}(e,t),a=e,(n=[{key:"onInitEditMode",value:function(){this.addEditorTab("Flowchart",H,2),this.addEditorTab("Mapping",D,3),this.addEditorTab("Inspect",j,4)}},{key:"onRefresh",value:function(){this.onRender()}},{key:"onVarChanged",value:function(){void 0!==this.flowchartHandler&&(this.flowchartHandler.sourceChanged(),this.flowchartHandler.render())}},{key:"onRender",value:function(){}},{key:"onDataReceived",value:function(t){var e=f.a.trace.before(this.constructor.name+".onDataReceived()");this.metricHandler&&(this.metricHandler.initData(t),this.flowchartHandler&&this.flowchartHandler.dataChanged()),this.render(),e.after(),f.a.trace.resume()}},{key:"onDataError",value:function(){this.render()}},{key:"link",value:function(t,e,a,n){var i=f.a.trace.before(this.constructor.name+".link()");this.metricHandler=new jt(this.$scope);var r=U.getDefaultData();this.rulesHandler=new U(r),void 0===this.panel.version&&void 0!==this.panel.styles?(this.rulesHandler.import(this.panel.styles),delete this.panel.styles):this.rulesHandler.import(this.panel.rulesData),this.panel.newFlag&&0===this.rulesHandler.countRules()&&this.rulesHandler.addRule(".*"),this.panel.rulesData=r;var s=Mt.getDefaultData();this.flowchartHandler=new Mt(t,e,n,s),void 0===this.panel.version&&void 0!==this.panel.flowchart?(this.flowchartHandler.import([this.panel.flowchart]),delete this.panel.flowchart):this.flowchartHandler.import(this.panel.flowchartsData),this.panel.newFlag&&0===this.flowchartHandler.countFlowcharts()&&this.flowchartHandler.addFlowchart("Main"),this.panel.flowchartsData=s,this.panel.newFlag=!1,this.panel.version=this.version,i.after()}},{key:"$onDestroy",value:function(){f.a.destroy()}}])&&Ut(a.prototype,n),i&&Ut(a,i),e}(n.MetricsPanelCtrl);$t.templateUrl="./partials/module.html",a.d(e,"PanelCtrl",(function(){return $t})),u.loadCss()}])}));
//# sourceMappingURL=module.js.map